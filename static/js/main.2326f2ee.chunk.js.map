{"version":3,"sources":["assets/logo.svg","main/landing/landing.tsx","redux/Database.ts","redux/reducers/transactions.ts","main/common/colors.ts","redux/reducers/users.ts","main/common/currency.tsx","entities/entities.ts","main/common/genericTable.tsx","main/ledgers/transactionsTable.tsx","main/ledgers/ledgers.tsx","redux/reducers/feeTypes.ts","main/common/currencyField.tsx","main/ledgers/transactionForm.tsx","main/settings/FeeTypes/feeTypesEditForm.tsx","redux/reducers/penalties.ts","redux/reducers/games.ts","redux/reducers/roles.ts","redux/store.ts","main/settings/FeeTypes/feeTypesCreateForm.tsx","main/common/confirmationDialog.tsx","main/settings/FeeTypes/feeTypesTable.tsx","main/settings/FeeTypes/feeTypes.tsx","main/settings/Roles/rolesCreateForm.tsx","main/settings/Roles/rolesEditForm.tsx","main/settings/Roles/rolesTable.tsx","main/settings/Roles/roles.tsx","main/settings/Users/usersTable.tsx","main/settings/Users/users.tsx","main/settings/settings.tsx","main/games/games.tsx","main/users/userForm.tsx","sidebar/links.tsx","sidebar/user.tsx","sidebar/sidebar.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","_ref","svgRef","title","props","width","height","viewBox","ref","undefined","transform","style","strokeWidth","d","fill","stroke","ForwardRef","forwardRef","Landing","className","user","fullName","db","feeTypes","penalties","roles","users","transactions","games","version","stores","table","Dexie","transactionsAdapter","createEntityAdapter","transactionsSlice","createSlice","initialState","getInitialState","name","reducers","create","state","action","ids","push","payload","id","entities","put","delete","filter","set","map","ft","clear","then","bulkPut","update","_","merge","changes","colors","usersAdapter","usersSlice","color","ldsh","sample","deleted","formatCurrency","val","toFixed","FeeTypeApplicationStrategy","Currency","Balance","inverted","display","alignItems","gap","float","size","GenericTable","currentPage","order","pageBounds","bind","pageNumber","rowCount","lowerBound","entriesPerPage","upperBound","Math","min","rows","columns","sortedRows","entries","sort","a","b","priority","forEach","column","find","c","Error","direction","valA","data","valB","comparisonResult","cols","selectable","addSelected","removeSelected","row","Checkbox","onChange","evt","checked","orderable","align","headerCells","col","arr","TableCell","v4","sortDirection","TableSortLabel","active","onClick","shiftKey","Date","now","setState","tableRows","sortByOrderObject","slice","TableRow","cells","actions","padding","IconButton","handle","icon","TableContainer","component","Paper","elevation","Table","TableHead","TableBody","TableFooter","TablePagination","count","rowsPerPage","rowsPerPageOptions","page","onChangePage","Component","TransactionTable","useSelector","getSelectors","selectEntities","r","to","localeCompare","description","substr","userId","userA","userB","value","createdOn","toLocaleDateString","Ledgers","withRouter","history","selectAll","usersArray","u","dispatch","useDispatch","t","affectsGlobalLedger","reduce","agg","next","Button","balance","cursor","position","Avatar","backgroundColor","top","right","abbreviation","marginLeft","marginRight","bottom","e","stopPropagation","tId","affectsUserLedger","toString","padStart","feeTypesAdapter","feeTypesSlice","NumberFormatCustom","inputRef","other","getInputRef","onValueChange","values","thousandSeparator","decimalSeparator","isNumericString","fixedDecimalScale","decimalScale","allowedDecimalSeparators","allowNegative","allowLeadingZeros","prefix","CurrencyField","variant","InputProps","startAdornment","inputComponent","TransactionForm","router","useHistory","validationSchema","yup","required","notOneOf","transaction","selectById","match","params","transactionId","transactionCount","selectTotal","transactionPenalties","p","countedPenalties","penalty","feeType","feeTypeId","label","formik","useFormik","initialValues","onSubmit","setSubmitting","resetForm","newTransactionId","parseFloat","handleSubmit","FormControl","Switch","setFieldValue","disabled","error","touched","Boolean","errors","helperText","Select","itemType","renderValue","onMouseDown","MenuItem","TextField","multiline","handleChange","fullWidth","type","startIcon","FeeTypesEditForm","applicationStrategy","Target","parseInt","AllButTarget","AutoAll","editFeeType","connect","ownProps","bindActionCreators","penaltiesAdapter","penaltiesSlice","createMultiple","deleteMultiple","findIndex","del","bulkDelete","gameSelectors","openGame","gameId","usr","playerId","gamesSlice","createGame","newGame","status","finishGame","game","abortGame","g","setGames","addPlayerToOpenGame","removePlayerFromGame","rolesAdapter","rolesSlice","loadingSlice","store","configureStore","reducer","loading","toArray","dbFeeTypes","dbRoles","dbUsers","useStoreDispatch","FeeTypesCreateForm","useState","setValue","setLabel","setApplicationStrategy","ConfirmationDialog","message","onConfirm","onAbort","custom","open","setOpen","Dialog","onClose","DialogTitle","DialogContent","flexDirection","idx","DialogActions","FeeTypesTable","deleteFeeType","FeeTypes","textDecoration","path","RolesCreateForm","setName","RolesEditForm","role","editRole","RolesTable","rolesCollection","Roles","UsersTable","usersCollection","join","Users","Settings","NoCurrentGame","GroupedPenalties","editable","groupedPenalties","sum","margin","PlayerCard","player","openAddPenalty","showStats","setShowStats","Card","borderRadius","maxWidth","CardHeader","avatar","subheader","CardContent","borderTop","borderBottom","gridTemplateColumns","marginBottom","marginTop","textAlign","fontWeight","textTransform","letterSpacing","fontSize","borderRight","AddPenaltyDialog","penaltyModalOpen","setPenaltyModalOpen","penaltyModalPlayer","positive","quantity","targets","inputProps","ExistingCurrentGame","notParticipating","players","autoFeeTypes","setPenaltyModalPlayer","withAutoPenalties","userPenalties","pen","autoPenalties","autoFee","up","borderColor","columnGap","CurrentGameForm","activeGame","ClosedGameForm","maxBy","countBy","entry","last","ClosedGamesList","closedGames","flexWrap","Games","UserForm","tid","matches","newUserId","split","s","pathname","getAbbreviation","OutlinedInput","endAdornment","multiple","selected","Chip","onDelete","sr","MenuProps","PaperProps","maxHeight","rId","SidebarLinks","SidebarUserLogo","userRoles","Sidebar","minimized","setMinimized","Main","first","exact","strict","isLocalhost","window","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","ReactDOM","render","StrictMode","document","getElementById","URL","process","href","origin","addEventListener","fetch","headers","response","contentType","get","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.2326f2ee.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"ZSKU Logo\");\n\nvar SvgLogo = function SvgLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 250,\n    height: 250,\n    viewBox: \"0 0 66.146 66.146\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0 -230.85)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(2.5493 0 0 2.5493 -32.372 -379.35)\",\n    style: {\n      strokeWidth: 0.79375\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m17.907 240.94h15.502v15.502h-15.502z\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 0.79375,\n      stroke: \"#000\"\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m17.907 256.44 15.502-15.502\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 0.79375,\n      stroke: \"#000\"\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m33.409 256.44-7.7508-7.7508v-7.7508\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 0.79375,\n      stroke: \"#000\"\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m25.658 248.69v7.7508\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 0.79375,\n      stroke: \"#000\"\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m25.658 248.69c-2.1403 0-3.8754-1.7351-3.8754-3.8754 3e-6 -2.1403 1.7351-3.8754 3.8754-3.8754s3.8754 1.7351 3.8754 3.8754\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 0.79375,\n      stroke: \"#000\"\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m25.632 248.68c2.1403 0 3.8754 1.7351 3.8754 3.8754 2e-6 2.1403-1.7351 3.8754-3.8754 3.8754s-3.8754-1.7351-3.8754-3.8754\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 0.79375,\n      stroke: \"#000\"\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m33.409 256.46c3e-6 4.2807-3.4702 7.7508-7.7508 7.7508s-7.7508-3.4702-7.7508-7.7508\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 0.79375,\n      stroke: \"#000\"\n    }\n  }))));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/logo.f52357e3.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\r\nimport { ReactComponent as Logo } from \"../../assets/logo.svg\";\r\nimport { User } from \"../../entities/entities\";\r\n\r\nexport const Landing = (props: { user: User }) => {\r\n\treturn (\r\n\t\t<div className=\"landingMain\">\r\n\t\t\t<div>\r\n\t\t\t\t<Logo />\r\n\t\t\t\t<h1>ZSKU Wegholzen</h1>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tWillkommen im ZSKU Management Portal, <br />\r\n\t\t\t\t\t{props.user?.fullName}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import Dexie from \"dexie\";\r\nimport { FeeType, Game, Penalty, Role, Transaction, User } from \"../entities/entities\";\r\n\r\nclass Database extends Dexie {\r\n\tfeeTypes: Dexie.Table<FeeType, string>;\r\n\tpenalties: Dexie.Table<Penalty, string>;\r\n\troles: Dexie.Table<Role, string>;\r\n\tusers: Dexie.Table<User, string>;\r\n\ttransactions: Dexie.Table<Transaction, string>;\r\n\tgames: Dexie.Table<Game, string>;\r\n\tconstructor() {\r\n\t\tsuper(\"zsku-db\");\r\n\t\tthis.version(4).stores({\r\n\t\t\tfeeTypes: \"id,createdOn,label,value,applicationStrategy,deleted\",\r\n\t\t\tpenalties: \"id,createdOn,gameId,userId,feeTypeId,value\",\r\n\t\t\troles: \"id,createdOn,name\",\r\n\t\t\tusers: \"id,createdOn,abbreviation,fullName,color,deleted\",\r\n\t\t\ttransactions: \"id,createdOn,name,description,userId,value,affectsGlobalLedger,affectsGlobalUser\",\r\n\t\t\tgames: \"id,createdOn,name,status,users\",\r\n\t\t});\r\n\t\tthis.feeTypes = this.table(\"feeTypes\");\r\n\t\tthis.penalties = this.table(\"penalties\");\r\n\t\tthis.roles = this.table(\"roles\");\r\n\t\tthis.users = this.table(\"users\");\r\n\t\tthis.transactions = this.table(\"transactions\");\r\n\t\tthis.games = this.table(\"games\");\r\n\t}\r\n}\r\nexport const db = new Database();\r\n","import { createEntityAdapter, createSlice, PayloadAction, Update } from \"@reduxjs/toolkit\";\r\nimport _ from \"lodash\";\r\nimport { Transaction } from \"../../entities/entities\";\r\nimport { db } from \"../Database\";\r\nconst transactionsAdapter = createEntityAdapter<Transaction>();\r\nconst transactionsSlice = createSlice({\r\n\tinitialState: transactionsAdapter.getInitialState(),\r\n\tname: \"transactions\",\r\n\treducers: {\r\n\t\tcreate(state, action: PayloadAction<Transaction>) {\r\n\t\t\tstate.ids.push(action.payload.id);\r\n\t\t\tstate.entities[action.payload.id] = action.payload;\r\n\t\t\tdb.transactions.put(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tdelete(state, action: PayloadAction<string>) {\r\n\t\t\tstate.ids = state.ids.filter((id) => id !== action.payload);\r\n\t\t\tdelete state.entities[action.payload];\r\n\t\t\tdb.transactions.delete(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tset(state, action: PayloadAction<Transaction[]>) {\r\n\t\t\tstate.ids = action.payload.map((ft) => ft.id);\r\n\t\t\tstate.entities = {};\r\n\t\t\tfor (const ft of action.payload) {\r\n\t\t\t\tstate.entities[ft.id] = ft;\r\n\t\t\t}\r\n\t\t\tdb.transactions.clear().then(() => {\r\n\t\t\t\tdb.transactions.bulkPut(action.payload);\r\n\t\t\t});\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tupdate(state, action: PayloadAction<Update<Transaction>>) {\r\n\t\t\tstate.entities[action.payload.id] = _.merge(state.entities[action.payload.id], action.payload.changes);\r\n\t\t\tdb.transactions.update(action.payload.id as string, action.payload.changes);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport { transactionsAdapter, transactionsSlice };\r\n","export const blue = \"#2589BD\";\r\nexport const orange = \"#FF751F\";\r\nexport const yellow = \"#F9C846\";\r\nexport const purple = \"#5b4e77\";\r\nexport const green = \"#339989\";\r\n\r\nexport const colors = [blue, orange, yellow, purple, green];","import { createEntityAdapter, createSlice, PayloadAction, Update } from \"@reduxjs/toolkit\";\r\nimport ldsh from \"lodash\";\r\nimport { User } from \"../../entities/entities\";\r\nimport { colors } from \"../../main/common/colors\";\r\nimport { db } from \"../Database\";\r\n\r\n\r\nconst usersAdapter = createEntityAdapter<User>();\r\nconst usersSlice = createSlice({\r\n\tinitialState: usersAdapter.getInitialState(),\r\n\tname: \"users\",\r\n\treducers: {\r\n\t\tcreate(state, action: PayloadAction<User>) {\r\n\t\t\tif (action.payload.color == null) {\r\n\t\t\t\taction.payload.color = ldsh.sample(colors) ?? \"#aaa\"\r\n\t\t\t}\r\n\t\t\tstate.ids.push(action.payload.id);\r\n\t\t\tstate.entities[action.payload.id] = action.payload;\r\n\t\t\tdb.users.put(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tdelete(state, action: PayloadAction<string>) {\r\n\t\t\tconst user = state.entities[action.payload];\r\n\t\t\tif (user == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tuser.deleted = true;\r\n\t\t\tdb.feeTypes.update(action.payload, { deleted: true });\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tset(state, action: PayloadAction<User[]>) {\r\n\t\t\tstate.ids = action.payload.map((ft) => ft.id);\r\n\t\t\tstate.entities = {};\r\n\t\t\tfor (const ft of action.payload) {\r\n\t\t\t\tstate.entities[ft.id] = ft;\r\n\t\t\t}\r\n\t\t\tdb.users.clear().then(() => {\r\n\t\t\t\tdb.users.bulkPut(action.payload);\r\n\t\t\t});\r\n\t\t},\r\n\t\tupdate(state, action: PayloadAction<Update<User>>) {\r\n\t\t\tstate.entities[action.payload.id] = ldsh.merge(state.entities[action.payload.id], action.payload.changes);\r\n\t\t\tdb.users.update(action.payload.id as string, action.payload.changes);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport { usersAdapter, usersSlice };\r\n","import React, { ComponentProps } from \"react\";\r\nimport { BsTriangleFill } from \"react-icons/bs\";\r\n\r\ninterface CurrencyProps extends ComponentProps<\"p\"> {\r\n\tval: number;\r\n}\r\n\r\nfunction formatCurrency(val: number) {\r\n\treturn `${(val ?? 0).toFixed(2)} `;\r\n}\r\n\r\nconst Currency = (props: CurrencyProps) => {\r\n\treturn <p style={props.style}>{formatCurrency(props.val)}</p>;\r\n};\r\n\r\nconst Balance = (props: { val: number; inverted?: boolean }) => {\r\n\tconst val = (props.inverted ? -1 : 1) * props.val;\r\n\treturn (\r\n\t\t<div className=\"balance\" style={{ display: \"flex\", alignItems: \"center\", gap: \".25em\", float: \"right\" }}>\r\n\t\t\t{(() => {\r\n\t\t\t\tif (val > 0) {\r\n\t\t\t\t\treturn <BsTriangleFill size=\"0.5em\" color=\"green\"></BsTriangleFill>;\r\n\t\t\t\t} else if (val < 0) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<BsTriangleFill\r\n\t\t\t\t\t\t\tsize=\"0.5em\"\r\n\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\tstyle={{ transform: \"rotate(0.5turn)\" }}></BsTriangleFill>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t})()}\r\n\t\t\t<Currency val={val}></Currency>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n\r\nexport { Balance, Currency, formatCurrency };\r\n\r\n","export interface Entity {\r\n\tid: string;\r\n\tcreatedOn: number;\r\n}\r\n\r\nexport interface SoftDeleteEntity extends Entity {\r\n\tdeleted?: boolean;\r\n}\r\n\r\nexport interface User extends SoftDeleteEntity {\r\n\tabbreviation: string;\r\n\tfullName: string;\r\n\tcolor: string;\r\n\troles: string[];\r\n}\r\n\r\nexport interface Role extends Entity {\r\n\tname: string;\r\n}\r\n\r\nexport interface FeeType extends SoftDeleteEntity {\r\n\tvalue?: number;\r\n\tlabel: string;\r\n\tapplicationStrategy: FeeTypeApplicationStrategy;\r\n}\r\n\r\nexport enum FeeTypeApplicationStrategy {\r\n\tTarget,\r\n\tAllButTarget,\r\n\tAutoAll,\r\n}\r\n\r\nexport interface Game extends Entity {\r\n\tstatus: \"open\" | \"closed\";\r\n\tusers: string[];\r\n\tname: string;\r\n}\r\n\r\nexport interface Penalty extends Entity {\r\n\tgameId: string;\r\n\tuserId: string;\r\n\tfeeTypeId: string;\r\n\tvalue: number;\r\n}\r\n\r\nexport interface Transaction extends Entity {\r\n\tname: string;\r\n\tdescription: string;\r\n\tuserId: string;\r\n\tvalue: number;\r\n\taffectsGlobalLedger: boolean;\r\n\taffectsUserLedger: boolean;\r\n\tpenalties: string[];\r\n}","import { Checkbox, IconButton, TableFooter, TableSortLabel } from \"@material-ui/core\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport React, { Component } from \"react\";\r\nimport { IconType } from \"react-icons\";\r\nimport { v4 } from \"uuid\";\r\nimport \"../../entities/dataservice\";\r\n\r\nexport type GenericColumn<T> = {\r\n\tid: string;\r\n\tname: string;\r\n\tdata: ((row: T) => string | React.ReactElement) | keyof T;\r\n\talign?: \"left\" | \"right\";\r\n\torderable?: boolean;\r\n\tsort?: (a: T, b: T) => number\r\n};\r\n\r\nexport type GenericTableState = {\r\n\tcurrentPage: number;\r\n\torder: { [colId: string]: { priority: number; direction: \"asc\" | \"desc\" } };\r\n};\r\n\r\nexport interface GenericTableProperties<T> {\r\n\tcolumns: GenericColumn<T>[];\r\n\tentriesPerPage: number;\r\n\trows: T[];\r\n\tactions?: { icon: IconType; handle: (row: T) => any }[];\r\n\tselectable?: boolean;\r\n\taddSelected?: (row: T) => void;\r\n\tremoveSelected?: (row: T) => void;\r\n}\r\n\r\nexport class GenericTable<T> extends Component<GenericTableProperties<T>, GenericTableState> {\r\n\tconstructor(props: GenericTableProperties<T>) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcurrentPage: 0,\r\n\t\t\torder: {},\r\n\t\t};\r\n\t\tthis.pageBounds = this.pageBounds.bind(this);\r\n\t}\r\n\r\n\tprivate pageBounds(pageNumber: number, rowCount: number): [number, number] {\r\n\t\tconst lowerBound = pageNumber * this.props.entriesPerPage;\r\n\t\tconst upperBound = (pageNumber + 1) * this.props.entriesPerPage;\r\n\t\treturn [lowerBound, Math.min(upperBound, rowCount)];\r\n\t}\r\n\r\n\tprivate sortByOrderObject(\r\n\t\trows: T[],\r\n\t\tcolumns: GenericColumn<T>[],\r\n\t\torder: { [colId: string]: { priority: number; direction: \"asc\" | \"desc\" } }\r\n\t) {\r\n\t\tlet sortedRows = rows;\r\n\t\tObject.entries(order)\r\n\t\t\t.sort((a, b) => b[1].priority - a[1].priority)\r\n\t\t\t.forEach(([key, order]) => {\r\n\t\t\t\tsortedRows.sort((a, b) => {\r\n\t\t\t\t\tconst column = columns.find((c) => c.id === key);\r\n\t\t\t\t\tif (!column) throw Error(\"col not found\");\r\n\t\t\t\t\tif (typeof column.sort === \"function\") return order.direction === \"asc\" ? column.sort(a,b) : column.sort(b,a);\r\n\t\t\t\t\tconst valA = typeof column.data === \"function\" ? column.data(a) : a[column.data];\r\n\t\t\t\t\tconst valB = typeof column.data === \"function\" ? column.data(b) : b[column.data];\r\n\t\t\t\t\tlet comparisonResult = 0;\r\n\t\t\t\t\tif (valA > valB) comparisonResult = 1;\r\n\t\t\t\t\telse if (valB > valA) comparisonResult = -1;\r\n\t\t\t\t\telse return 0;\r\n\t\t\t\t\tif (order.direction === \"asc\") return comparisonResult;\r\n\t\t\t\t\treturn comparisonResult * -1;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\treturn sortedRows;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst [lowerBound, upperBound] = this.pageBounds(this.state.currentPage, this.props.rows.length);\r\n\t\tconst cols: GenericColumn<T>[] = [];\r\n\t\tif (\r\n\t\t\tthis.props.selectable === true &&\r\n\t\t\ttypeof this.props.addSelected === \"function\" &&\r\n\t\t\ttypeof this.props.removeSelected === \"function\"\r\n\t\t) {\r\n\t\t\tcols.push({\r\n\t\t\t\tdata: (row) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\tonChange={(evt) => {\r\n\t\t\t\t\t\t\t\tif (this.props.addSelected == null || this.props.removeSelected == null) return;\r\n\t\t\t\t\t\t\t\tif (evt.target.checked) this.props.addSelected(row);\r\n\t\t\t\t\t\t\t\telse this.props.removeSelected(row);\r\n\t\t\t\t\t\t\t}}></Checkbox>\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tid: \"col_check\",\r\n\t\t\t\tname: \"\",\r\n\t\t\t\torderable: false,\r\n\t\t\t\talign: \"left\",\r\n\t\t\t\tsort: () => 0\r\n\t\t\t});\r\n\t\t}\r\n\t\tcols.push(...this.props.columns);\r\n\t\tconst headerCells = cols.map((col, _, arr) => {\r\n\t\t\treturn !col.orderable ? (\r\n\t\t\t\t<TableCell align={col.align ?? \"left\"} key={v4()}>\r\n\t\t\t\t\t{col.name}\r\n\t\t\t\t</TableCell>\r\n\t\t\t) : (\r\n\t\t\t\t<TableCell\r\n\t\t\t\t\talign={col.align ?? \"left\"}\r\n\t\t\t\t\tkey={v4()}\r\n\t\t\t\t\tsortDirection={\r\n\t\t\t\t\t\tcol.orderable && this.state.order[col.id] != null\r\n\t\t\t\t\t\t\t? this.state.order[col.id].direction\r\n\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t<TableSortLabel\r\n\t\t\t\t\t\t\tkey={v4()}\r\n\t\t\t\t\t\t\tactive={col.orderable && col.id in this.state.order}\r\n\t\t\t\t\t\t\tdirection={\r\n\t\t\t\t\t\t\t\tcol.orderable && this.state.order[col.id] != null\r\n\t\t\t\t\t\t\t\t\t? this.state.order[col.id].direction\r\n\t\t\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonClick={(evt) => {\r\n\t\t\t\t\t\t\t\tif (!col.orderable) return;\r\n\t\t\t\t\t\t\t\tconst order = this.state.order;\r\n\t\t\t\t\t\t\t\tif (!evt.shiftKey)\r\n\t\t\t\t\t\t\t\t\tarr.forEach((c) => {\r\n\t\t\t\t\t\t\t\t\t\tif (c.id !== col.id) delete order[c.id];\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif (col.id in order) {\r\n\t\t\t\t\t\t\t\t\tswitch (order[col.id].direction) {\r\n\t\t\t\t\t\t\t\t\t\tcase \"asc\":\r\n\t\t\t\t\t\t\t\t\t\t\torder[col.id].direction = \"desc\";\r\n\t\t\t\t\t\t\t\t\t\t\torder[col.id].priority = Date.now();\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\tcase \"desc\":\r\n\t\t\t\t\t\t\t\t\t\t\tdelete order[col.id];\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\torder[col.id] = { direction: \"asc\", priority: Date.now() };\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.setState({ order: this.state.order });\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{col.name}\r\n\t\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t\t}\r\n\t\t\t\t</TableCell>\r\n\t\t\t);\r\n\t\t});\r\n\t\tconst tableRows = this.sortByOrderObject(this.props.rows, cols, this.state.order)\r\n\t\t\t.slice(lowerBound, upperBound)\r\n\t\t\t.map((row) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<TableRow key={v4()}>\r\n\t\t\t\t\t\t{(() => {\r\n\t\t\t\t\t\t\tconst cells = cols.map((col) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<TableCell key={v4()} align={col.align ?? \"left\"}>\r\n\t\t\t\t\t\t\t\t\t\t{(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (typeof col.data === \"function\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn col.data(row);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn row[col.data];\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t})()}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (this.props.actions != null) {\r\n\t\t\t\t\t\t\t\tcells.push(\r\n\t\t\t\t\t\t\t\t\t<TableCell key={v4()} align=\"right\" style={{ padding: \"4px\" }}>\r\n\t\t\t\t\t\t\t\t\t\t{this.props.actions.map((action) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={v4()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.handle(row);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{<action.icon size=\".75em\"></action.icon>}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn cells;\r\n\t\t\t\t\t\t})()}\r\n\t\t\t\t\t</TableRow>\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\tif (this.props.actions != null) {\r\n\t\t\theaderCells.push(\r\n\t\t\t\t<TableCell key=\"col_actions\" align=\"right\">\r\n\t\t\t\t\tAktionen\r\n\t\t\t\t</TableCell>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<TableContainer\r\n\t\t\t\tcomponent={Paper}\r\n\t\t\t\televation={0}\r\n\t\t\t\tstyle={{ display: this.props.rows.length > 0 ? \"block\" : \"none\" }}>\r\n\t\t\t\t<Table>\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>{headerCells}</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>{tableRows}</TableBody>\r\n\t\t\t\t\t{this.props.rows.length > this.props.entriesPerPage ? (\r\n\t\t\t\t\t\t<TableFooter>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TablePagination\r\n\t\t\t\t\t\t\t\t\tcount={this.props.rows.length}\r\n\t\t\t\t\t\t\t\t\trowsPerPage={this.props.entriesPerPage}\r\n\t\t\t\t\t\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\t\t\t\t\t\tpage={this.state.currentPage}\r\n\t\t\t\t\t\t\t\t\tonChangePage={(_, pageNumber) => {\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({ currentPage: pageNumber });\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableFooter>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t);\r\n\t}\r\n}\r\n","import { Dictionary } from \"@reduxjs/toolkit\";\r\nimport React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Transaction, User } from \"../../entities/entities\";\r\nimport { usersAdapter } from \"../../redux/reducers/users\";\r\nimport { AppState } from \"../../redux/store\";\r\nimport { GenericTable } from \"../common/genericTable\";\r\nimport { Balance } from \"../common/currency\";\r\nexport type TransactionTableProps = {\r\n\ttransactions: Transaction[];\r\n};\r\nexport const TransactionTable = (props: TransactionTableProps) => {\r\n\tconst users = useSelector<AppState>((state) =>\r\n\t\tusersAdapter.getSelectors<AppState>((state) => state.users).selectEntities(state)\r\n\t) as Dictionary<User>;\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<GenericTable<Transaction>\r\n\t\t\t\tcolumns={[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata: (r) => <Link to={\"/zsku-mgmt/transactions/\" + r.id}>{r.name}</Link>,\r\n\t\t\t\t\t\tid: \"col_name\",\r\n\t\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\tsort: (a,b) => a.name.localeCompare(b.name)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata: (r) => <div title={r.description}>{r.description.substr(0, 50)}</div>,\r\n\t\t\t\t\t\tid: \"col_description\",\r\n\t\t\t\t\t\tname: \"Beschreibung\",\r\n\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\torderable: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata: (r) => {\r\n\t\t\t\t\t\t\tconst user = users[r.userId];\r\n\t\t\t\t\t\t\tif (user == null) return <p>N/A</p>;\r\n\t\t\t\t\t\t\treturn <Link to={\"/zsku-mgmt/users/\" + user.id}>{user.fullName}</Link>;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tid: \"col_user\",\r\n\t\t\t\t\t\tname: \"Mitglied\",\r\n\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\tsort: (a,b) => {\r\n\t\t\t\t\t\t\tconst userA = users[a.userId];\r\n\t\t\t\t\t\t\tconst userB = users[b.userId];\r\n\t\t\t\t\t\t\tif (userA == null || userB == null) return 0;\r\n\t\t\t\t\t\t\treturn userA.fullName.localeCompare(userB.fullName)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata: (r) => <Balance val={r.value}></Balance>,\r\n\t\t\t\t\t\tid: \"col_value\",\r\n\t\t\t\t\t\tname: \"Betrag\",\r\n\t\t\t\t\t\talign: \"right\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\tsort: (a,b) => a.value - b.value\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata: (r) => new Date(r.createdOn).toLocaleDateString(\"de-DE\"),\r\n\t\t\t\t\t\tid: \"col_timestamp\",\r\n\t\t\t\t\t\tname: \"Erstellt am\",\r\n\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\tsort: (a,b) => a.createdOn - b.createdOn\r\n\t\t\t\t\t},\r\n\t\t\t\t]}\r\n\t\t\t\tentriesPerPage={8}\r\n\t\t\t\trows={props.transactions}></GenericTable>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { Avatar, Button, Paper } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { v4 } from \"uuid\";\r\nimport { Transaction, User } from \"../../entities/entities\";\r\nimport { transactionsAdapter, transactionsSlice } from \"../../redux/reducers/transactions\";\r\nimport { usersAdapter } from \"../../redux/reducers/users\";\r\nimport { AppDispatch, AppState } from \"../../redux/store\";\r\nimport { Balance } from \"../common/currency\";\r\nimport { TransactionTable } from \"./transactionsTable\";\r\n\r\nconst Ledgers = withRouter((history) => {\r\n\tconst transactions = useSelector<AppState>((state) =>\r\n\t\ttransactionsAdapter.getSelectors().selectAll(state.transactions)\r\n\t) as Transaction[];\r\n\tconst usersArray = useSelector<AppState>((state) =>\r\n\t\tusersAdapter\r\n\t\t\t.getSelectors()\r\n\t\t\t.selectAll(state.users)\r\n\t\t\t.filter((u) => u.deleted !== true)\r\n\t) as User[];\r\n\tconst dispatch = useDispatch<AppDispatch>();\r\n\treturn (\r\n\t\t<div className=\"ledgerContainer\">\r\n\t\t\t<div className=\"zsku-panel\">\r\n\t\t\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t\t<h1>Kassenstand</h1>\r\n\t\t\t\t\t\t<Balance\r\n\t\t\t\t\t\t\tval={transactions\r\n\t\t\t\t\t\t\t\t.filter((t) => t.affectsGlobalLedger)\r\n\t\t\t\t\t\t\t\t.reduce((agg, next) => agg + next.value, 0)}></Balance>\r\n\t\t\t\t\t\t<Link to=\"/zsku-mgmt/transactions/new\">\r\n\t\t\t\t\t\t\t<Button>Auerplanmige Transaktion hinzufgen</Button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<TransactionTable\r\n\t\t\t\t\t\ttransactions={transactions.filter((t) => t.affectsGlobalLedger)}></TransactionTable>\r\n\t\t\t\t</Paper>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"cardGrid\">\r\n\t\t\t\t{usersArray.map((user) => {\r\n\t\t\t\t\tconst balance = transactions.reduce(\r\n\t\t\t\t\t\t(agg, next) => agg + (next.userId === user.id ? next.value : 0),\r\n\t\t\t\t\t\t0\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{ cursor: \"pointer\" }}\r\n\t\t\t\t\t\t\tkey={\"userLedger_\" + user.id}\r\n\t\t\t\t\t\t\tclassName=\"card zsku-panel\"\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\thistory.history.push(\"/zsku-mgmt/users/\" + user.id);\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<Paper elevation={3} style={{ padding: \"2em\", position: \"relative\" }}>\r\n\t\t\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: user.color,\r\n\t\t\t\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\t\t\t\ttop: \"1em\",\r\n\t\t\t\t\t\t\t\t\t\tright: \"1em\",\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{user.abbreviation}\r\n\t\t\t\t\t\t\t\t</Avatar>\r\n\t\t\t\t\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t\t\t\t\t<h1 style={{ marginLeft: \"0\" }}>{user.fullName}</h1>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div style={{ display: \"flex\", alignItems: \"center\", width: \"100%\" }}>\r\n\t\t\t\t\t\t\t\t\t<p style={{ marginRight: \"1em\" }}>Kontostand</p>\r\n\t\t\t\t\t\t\t\t\t<Balance val={balance}></Balance>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{balance < 0 && (\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ float: \"right\", bottom: \"1em\" }}\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\tconst tId = v4();\r\n\t\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\t\ttransactionsSlice.actions.create({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid: tId,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcreatedOn: Date.now(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taffectsGlobalLedger: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taffectsUserLedger: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"TRANS-\" + transactions.length.toString().padStart(4, \"0\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpenalties: [],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuserId: user.id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: balance * -1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdescription: \"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\thistory.history.push(\"/zsku-mgmt/transactions/\" + tId);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tBegleichen\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\nexport default Ledgers;\r\n","import { createEntityAdapter, createSlice, PayloadAction, Update } from \"@reduxjs/toolkit\";\r\nimport { FeeType } from \"../../entities/entities\";\r\nimport { db } from \"../Database\";\r\nimport _ from \"lodash\";\r\n// const defaultState: FeeType[] = [\r\n// \t\t{ label: \"Brechen auf der Bahn\", value: 25, createdOn: new Date().valueOf(), id: \"1\" },\r\n// \t\t{ label: \"Diskutieren\", value: 0.01, createdOn: new Date().valueOf(), id: \"2\" },\r\n// \t\t{ label: \"Fluchen\", value: 0.01, createdOn: new Date().valueOf(), id: \"3\" },\r\n// \t\t{ label: \"Alle Neune\", value: 0.2, createdOn: new Date().valueOf(), id: \"4\" },\r\n// \t\t{ label: \"Gosse\", value: 0.3, createdOn: new Date().valueOf(), id: \"5\" },\r\n// \t];\r\n\r\nconst feeTypesAdapter = createEntityAdapter<FeeType>();\r\nconst feeTypesSlice = createSlice({\r\n\tinitialState: feeTypesAdapter.getInitialState(),\r\n\tname: \"feeTypes\",\r\n\treducers: {\r\n\t\t// create: feeTypesAdapter.addOne,\r\n\t\tcreate(state, action: PayloadAction<FeeType>) {\r\n\t\t\tstate.ids.push(action.payload.id);\r\n\t\t\tstate.entities[action.payload.id] = action.payload;\r\n\t\t\tdb.feeTypes.put(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tdelete(state, action: PayloadAction<string>) {\r\n\t\t\tconst ft = state.entities[action.payload];\r\n\t\t\tif (ft == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tft.deleted = true;\r\n\t\t\tdb.feeTypes.update(action.payload, { deleted: true });\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tset(state, action: PayloadAction<FeeType[]>) {\r\n\t\t\tstate.ids = action.payload.map((ft) => ft.id);\r\n\t\t\tstate.entities = {};\r\n\t\t\tfor (const ft of action.payload) {\r\n\t\t\t\tstate.entities[ft.id] = ft;\r\n\t\t\t}\r\n\t\t\tdb.feeTypes.clear().then(() => {\r\n\t\t\t\tdb.feeTypes.bulkPut(action.payload);\r\n\t\t\t});\r\n\t\t},\r\n\t\tupdate(state, action: PayloadAction<Update<FeeType>>) {\r\n\t\t\tstate.entities[action.payload.id] = _.merge(state.entities[action.payload.id], action.payload.changes);\r\n\t\t\tdb.feeTypes.update(action.payload.id as string, action.payload.changes);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport { feeTypesSlice, feeTypesAdapter };\r\n","import TextField from \"@material-ui/core/TextField/TextField\";\r\nimport { TextFieldProps } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport NumberFormat from \"react-number-format\";\r\ninterface NumberFormatCustomProps {\r\n\tinputRef: (instance: NumberFormat | null) => void;\r\n\tonChange: (event: { target: { name: string; value: string } }) => void;\r\n\tname: string;\r\n}\r\n\r\nconst NumberFormatCustom = (props: NumberFormatCustomProps) => {\r\n\tconst { inputRef, onChange, ...other } = props;\r\n\r\n\treturn (\r\n\t\t<NumberFormat\r\n\t\t\t{...other}\r\n\t\t\tgetInputRef={inputRef}\r\n\t\t\tonValueChange={(values) => {\r\n\t\t\t\tonChange({\r\n\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\tname: props.name,\r\n\t\t\t\t\t\tvalue: values.value,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}}\r\n\t\t\tthousandSeparator=\".\"\r\n\t\t\tdecimalSeparator=\",\"\r\n\t\t\tisNumericString\r\n\t\t\tfixedDecimalScale\r\n\t\t\tdecimalScale={2}\r\n\t\t\tallowedDecimalSeparators={[\",\", \".\"]}\r\n\t\t\tallowNegative\r\n\t\t\tallowLeadingZeros\r\n\t\t\tprefix=\"\"\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport const CurrencyField = ({ value, onChange, ...other }: Partial<TextFieldProps>) => {\r\n\treturn (\r\n\t\t<TextField\r\n            variant=\"outlined\"\r\n            InputProps={{\r\n\t\t\t\tstartAdornment: \"\",\r\n                inputComponent: NumberFormatCustom as any,\r\n\t\t\t}}\r\n\t\t\tvalue={value}\r\n            onChange={onChange}\r\n            {...other}\r\n\t\t/>\r\n\t);\r\n};\r\n","import { Button, FormControl, MenuItem, Paper, Select, Switch, TextField } from \"@material-ui/core\";\r\nimport { Dictionary, EntityState } from \"@reduxjs/toolkit\";\r\nimport { useFormik } from \"formik\";\r\nimport React from \"react\";\r\nimport { FaExchangeAlt } from \"react-icons/fa\";\r\nimport { ImFloppyDisk } from \"react-icons/im\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, RouteComponentProps, useHistory, withRouter } from \"react-router-dom\";\r\nimport { v4 } from \"uuid\";\r\nimport * as yup from \"yup\";\r\nimport { FeeType, Penalty, Transaction, User } from \"../../entities/entities\";\r\nimport { feeTypesAdapter } from \"../../redux/reducers/feeTypes\";\r\nimport { transactionsAdapter, transactionsSlice } from \"../../redux/reducers/transactions\";\r\nimport { AppDispatch, AppState } from \"../../redux/store\";\r\nimport { Currency } from \"../common/currency\";\r\nimport { CurrencyField } from \"../common/currencyField\";\r\nimport { GenericTable } from \"../common/genericTable\";\r\ninterface RouterParams {\r\n\ttransactionId: string;\r\n\tuserId?: string;\r\n}\r\n\r\ntype FeeTypeAggregate = { id: string; feeType: string; value: number; count: number };\r\n\r\ntype TransactionFormValues = {\r\n\tvalue: number;\r\n\tuser: string;\r\n\tdescription: string;\r\n\taffectsGlobalLedger: boolean;\r\n};\r\nconst TransactionForm = withRouter((router: RouteComponentProps<RouterParams>) => {\r\n\tconst dispatch = useDispatch<AppDispatch>();\r\n\tconst history = useHistory();\r\n\tconst validationSchema = yup.object({\r\n\t\tvalue: yup.number().required().notOneOf([0]),\r\n\t});\r\n\r\n\tconst users = useSelector<AppState>((state) => state.users) as EntityState<User>;\r\n\tconst feeTypes = useSelector<AppState>((state) =>\r\n\t\tfeeTypesAdapter.getSelectors<AppState>((state) => state.feeTypes).selectEntities(state)\r\n\t) as Dictionary<FeeType>;\r\n\r\n\tconst transaction = useSelector<AppState>((state) =>\r\n\t\ttransactionsAdapter\r\n\t\t\t.getSelectors<AppState>((state) => state.transactions)\r\n\t\t\t.selectById(state, router.match.params.transactionId)\r\n\t) as Transaction;\r\n\tconst transactionCount = useSelector<AppState>((state) =>\r\n\t\ttransactionsAdapter.getSelectors().selectTotal(state.transactions)\r\n\t) as number;\r\n\tconst transactionPenalties = useSelector<AppState>((state) =>\r\n\t\t(transaction?.penalties ?? []).map((p) => state.penalties.entities[p])\r\n\t) as Penalty[];\r\n\tlet countedPenalties = Object.values(\r\n\t\ttransactionPenalties.reduce<{ [id: string]: FeeTypeAggregate }>((agg, penalty) => {\r\n\t\t\tconst feeType = penalty && feeTypes[penalty.feeTypeId];\r\n\t\t\tif (agg[penalty.id] == null) {\r\n\t\t\t\tagg[penalty.id] = {\r\n\t\t\t\t\tcount: 0,\r\n\t\t\t\t\tfeeType: feeType?.label ?? \"Custom\",\r\n\t\t\t\t\tid: feeType?.id ?? penalty.id,\r\n\t\t\t\t\tvalue: 0,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tagg[penalty.id].count++;\r\n\t\t\tagg[penalty.id].value += penalty?.value ?? 0;\r\n\t\t\treturn agg;\r\n\t\t}, {})\r\n\t);\r\n\r\n\tconst formik = useFormik<TransactionFormValues>({\r\n\t\tinitialValues: {\r\n\t\t\tdescription: transaction?.description ?? \"\",\r\n\t\t\tuser: transaction?.userId ?? router.match.params.userId,\r\n\t\t\tvalue: transaction?.value ?? 0,\r\n\t\t\taffectsGlobalLedger: true,\r\n\t\t},\r\n\t\tvalidationSchema,\r\n\r\n\t\tonSubmit: (values, { setSubmitting, resetForm }) => {\r\n\t\t\tconst isNewTransaction = router.match.params.transactionId === \"new\";\r\n\t\t\tif (isNewTransaction) {\r\n\t\t\t\tconst newTransactionId = v4();\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\ttransactionsSlice.actions.create({\r\n\t\t\t\t\t\taffectsGlobalLedger: values.affectsGlobalLedger,\r\n\t\t\t\t\t\taffectsUserLedger: !!router.match.params.userId,\r\n\t\t\t\t\t\tcreatedOn: Date.now(),\r\n\t\t\t\t\t\tdescription: values.description,\r\n\t\t\t\t\t\tid: newTransactionId,\r\n\t\t\t\t\t\tname: \"TRANS-\" + (transactionCount + 1).toString().padStart(4, \"0\"),\r\n\t\t\t\t\t\tuserId: values.user,\r\n\t\t\t\t\t\tvalue: parseFloat(values.value.toString()),\r\n\t\t\t\t\t\tpenalties: [],\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\tsetSubmitting(false);\r\n\t\t\t\thistory.push(\"/zsku-mgmt/transactions/\" + newTransactionId);\r\n\t\t\t} else {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\ttransactionsSlice.actions.update({\r\n\t\t\t\t\t\tid: transaction.id,\r\n\t\t\t\t\t\tchanges: {\r\n\t\t\t\t\t\t\tdescription: values.description,\r\n\t\t\t\t\t\t\tvalue: parseFloat(values.value.toString()),\r\n\t\t\t\t\t\t\tuserId: values.user,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\tsetSubmitting(false);\r\n\t\t\t\tresetForm({\r\n\t\t\t\t\tvalues: values,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t});\r\n\treturn (\r\n\t\t<div className=\"zsku-panel\">\r\n\t\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t<h1>{transaction?.name ?? \"Neue Transaktion\"}</h1>\r\n\t\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t\t<FaExchangeAlt size=\"4em\" style={{ backgroundColor: \"#7DCE82\" }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<form onSubmit={formik.handleSubmit}>\r\n\t\t\t\t\t<div className=\"zsku-keyValueGrid\">\r\n\t\t\t\t\t\t{(router.match.params.userId != null ||\r\n\t\t\t\t\t\t\t(transaction?.userId != null && transactionPenalties.length === 0)) && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<h4>Betrifft Kasse</h4>\r\n\t\t\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t\t\t<Switch\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\tchecked={formik.values.affectsGlobalLedger}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\tformik.setFieldValue(\"affectsGlobalLedger\", e.target.checked)\r\n\t\t\t\t\t\t\t\t\t\t}></Switch>\r\n\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t<h4>Betrag</h4>\r\n\t\t\t\t\t\t<CurrencyField\r\n\t\t\t\t\t\t\tdisabled={transaction?.penalties.length > 0}\r\n\t\t\t\t\t\t\terror={formik.touched.value && Boolean(formik.errors.value)}\r\n\t\t\t\t\t\t\thelperText={formik.touched.value && formik.errors.value}\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvalue={formik.values.value}\r\n\t\t\t\t\t\t\tname=\"Value\"\r\n\t\t\t\t\t\t\tid=\"value\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tonChange={(e) => formik.setFieldValue(\"value\", (e.target as any).value)}></CurrencyField>\r\n\r\n\t\t\t\t\t\t{(router.match.params.userId != null || transaction?.affectsUserLedger === true) && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<h4>Mitglied</h4>\r\n\t\t\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\terror={formik.touched.user && Boolean(formik.errors.user)}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t\t\t\ttransaction?.affectsGlobalLedger === false ||\r\n\t\t\t\t\t\t\t\t\t\t\trouter.match.params.transactionId !== \"new\" ||\r\n\t\t\t\t\t\t\t\t\t\t\trouter.match.params.userId != null\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={formik.values.user}\r\n\t\t\t\t\t\t\t\t\t\titemType=\"string\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\tformik.setFieldValue(\"user\", (e.target.value as number).toString());\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\trenderValue={(userId) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn userId == null ? null : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tto={\"/zsku-mgmt/users/\" + userId}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonMouseDown={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{users.entities[userId as string]?.fullName}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t{users.ids.map((userId) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={\"user_\" + userId} value={userId}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{users.entities[userId]?.fullName}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t<h4>Beschreibung</h4>\r\n\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\terror={formik.touched.description && Boolean(formik.errors.description)}\r\n\t\t\t\t\t\t\t\thelperText={formik.touched.description && formik.errors.description}\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\t\t\t\tid=\"description\"\r\n\t\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\t\tvalue={formik.values.description}\r\n\t\t\t\t\t\t\t\tonChange={formik.handleChange}></TextField>\r\n\t\t\t\t\t\t</FormControl>\r\n\r\n\t\t\t\t\t\t{transaction != null && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<h4>Erstellt am</h4>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tname=\"createdOn\"\r\n\t\t\t\t\t\t\t\t\tid=\"createdOn\"\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\tvalue={new Date(transaction.createdOn).toLocaleDateString(\"de-DE\")}></TextField>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<div className=\"gridSpacer\"></div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<FormControl style={{ float: \"right\" }}>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tid=\"formSubmit\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tstartIcon={<ImFloppyDisk size=\".75em\" />}>\r\n\t\t\t\t\t\t\t\t\tSpeichern\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\r\n\t\t\t\t{countedPenalties.length > 0 ? (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<GenericTable<FeeTypeAggregate>\r\n\t\t\t\t\t\t\tcolumns={[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tid: \"col_feeType\",\r\n\t\t\t\t\t\t\t\t\tname: \"Strafe\",\r\n\t\t\t\t\t\t\t\t\tdata: (r) => r.feeType,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tid: \"col_value\",\r\n\t\t\t\t\t\t\t\t\tname: \"Gesamtbetrag\",\r\n\t\t\t\t\t\t\t\t\tdata: (r) => <Currency val={r.value}></Currency>,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tid: \"col_count\",\r\n\t\t\t\t\t\t\t\t\tname: \"Anzahl\",\r\n\t\t\t\t\t\t\t\t\tdata: \"count\",\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\tentriesPerPage={10}\r\n\t\t\t\t\t\t\trows={countedPenalties}></GenericTable>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : null}\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default TransactionForm;\r\n","import { Button, MenuItem, Select, TextField } from \"@material-ui/core\";\r\nimport { bindActionCreators } from \"@reduxjs/toolkit\";\r\nimport React, { Component } from \"react\";\r\nimport { ImFloppyDisk } from \"react-icons/im\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport { FeeType, FeeTypeApplicationStrategy } from \"../../../entities/entities\";\r\nimport { feeTypesAdapter, feeTypesSlice } from \"../../../redux/reducers/feeTypes\";\r\nimport { AppDispatch, AppState } from \"../../../redux/store\";\r\nimport { CurrencyField } from \"../../common/currencyField\";\r\n\r\ntype FeeTypesFormState = {\r\n\tvalue: string;\r\n\tapplicationStrategy: FeeTypeApplicationStrategy;\r\n\tname: string;\r\n\tid: string;\r\n};\r\n\r\nconst update = feeTypesSlice.actions.update;\r\ntype LinkDispatchProps = {\r\n\teditFeeType: typeof update;\r\n};\r\n\r\ntype LinkStateProps = {\r\n\tfeeType?: FeeType;\r\n};\r\n\r\ntype RouteInfo = {\r\n\tid: string;\r\n};\r\n\r\ninterface FeeTypesFormProps extends RouteComponentProps<RouteInfo> {}\r\n\r\nclass FeeTypesEditForm extends Component<LinkDispatchProps & LinkStateProps & FeeTypesFormProps, FeeTypesFormState> {\r\n\tconstructor(props: LinkDispatchProps & LinkStateProps & FeeTypesFormProps) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tvalue: this.props.feeType?.value?.toString() ?? \"\",\r\n\t\t\tname: this.props.feeType?.label ?? \"\",\r\n\t\t\tid: this.props.feeType?.id ?? \"ERR\",\r\n\t\t\tapplicationStrategy: this.props.feeType?.applicationStrategy ?? FeeTypeApplicationStrategy.Target,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tif (this.state.id !== this.props.match.params.id) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tid: this.props.feeType?.id ?? \"ERR\",\r\n\t\t\t\tname: this.props.feeType?.label ?? \"ERR\",\r\n\t\t\t\tvalue: this.props.feeType?.value?.toString() ?? \"\",\r\n\t\t\t\tapplicationStrategy: this.props.feeType?.applicationStrategy ?? FeeTypeApplicationStrategy.Target,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div style={{ display: \"flex\", gap: \"10px\", alignItems: \"center\" }}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tvalue={this.state.name}\r\n\t\t\t\t\tlabel=\"Name\"\r\n\t\t\t\t\tname=\"Name\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tonChange={(evt) => {\r\n\t\t\t\t\t\tthis.setState({ name: evt.target.value });\r\n\t\t\t\t\t}}></TextField>\r\n\t\t\t\t<CurrencyField\r\n\t\t\t\t\tvalue={this.state.value}\r\n\t\t\t\t\tlabel=\"Value\"\r\n\t\t\t\t\tname=\"Wert\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\tthis.setState({value: e.target.value});\r\n\t\t\t\t\t}}></CurrencyField>\r\n\t\t\t\t<Select\r\n\t\t\t\t\tlabel=\"Betrifft\"\r\n\t\t\t\t\tname=\"ApplicationStrategy\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tvalue={this.state.applicationStrategy}\r\n\t\t\t\t\tonChange={(evt) => {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tapplicationStrategy: parseInt(evt.target.value as string) as FeeTypeApplicationStrategy,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<MenuItem value={FeeTypeApplicationStrategy.Target}>Ziel</MenuItem>\r\n\t\t\t\t\t<MenuItem value={FeeTypeApplicationStrategy.AllButTarget}>Alle auer Ziel</MenuItem>\r\n\t\t\t\t\t<MenuItem value={FeeTypeApplicationStrategy.AutoAll}>Alle</MenuItem>\r\n\t\t\t\t</Select>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tstartIcon={<ImFloppyDisk size=\".75em\" />}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tthis.props.editFeeType({\r\n\t\t\t\t\t\t\tchanges: {\r\n\t\t\t\t\t\t\t\tlabel: this.state.name,\r\n\t\t\t\t\t\t\t\tvalue: parseFloat(this.state.value),\r\n\t\t\t\t\t\t\t\tapplicationStrategy: this.state.applicationStrategy,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tid: this.state.id,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.props.history.push(\"/zsku-mgmt/settings\");\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\tSpeichern\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: FeeTypesFormProps): LinkStateProps => ({\r\n\tfeeType: feeTypesAdapter.getSelectors().selectById(state.feeTypes, ownProps.match.params.id),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: AppDispatch): LinkDispatchProps => ({\r\n\teditFeeType: bindActionCreators(feeTypesSlice.actions.update, dispatch),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(FeeTypesEditForm));\r\n","import { createEntityAdapter, createSlice, PayloadAction, Update } from \"@reduxjs/toolkit\";\r\nimport _ from \"lodash\";\r\nimport { Penalty } from \"../../entities/entities\";\r\nimport { db } from \"../Database\";\r\n\r\nconst penaltiesAdapter = createEntityAdapter<Penalty>();\r\nconst penaltiesSlice = createSlice({\r\n\tinitialState: penaltiesAdapter.getInitialState(),\r\n\tname: \"penalties\",\r\n\treducers: {\r\n\t\tcreate(state, action: PayloadAction<Penalty>) {\r\n\t\t\tstate.ids.push(action.payload.id);\r\n\t\t\tstate.entities[action.payload.id] = action.payload;\r\n\t\t\tdb.penalties.put(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tcreateMultiple(state, action: PayloadAction<Penalty[]>) {\r\n\t\t\tstate.ids.push(...action.payload.map((p) => p.id));\r\n\t\t\tfor (const penalty of action.payload) {\r\n\t\t\t\tstate.entities[penalty.id] = penalty;\r\n\t\t\t}\r\n\t\t\tdb.penalties.bulkPut(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tdelete(state, action: PayloadAction<string>) {\r\n\t\t\tstate.ids = state.ids.filter((id) => id !== action.payload);\r\n\t\t\tdelete state.entities[action.payload];\r\n\t\t\tdb.penalties.delete(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tdeleteMultiple(state, action: PayloadAction<string[]>) {\r\n\t\t\tstate.ids = state.ids.filter((id) => action.payload.findIndex((del) => id !== del));\r\n\t\t\tfor (const del of action.payload) {\r\n\t\t\t\tdelete state.entities[del];\r\n\t\t\t}\r\n\t\t\tdb.penalties.bulkDelete(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tset(state, action: PayloadAction<Penalty[]>) {\r\n\t\t\tstate.ids = action.payload.map((ft) => ft.id);\r\n\t\t\tstate.entities = {};\r\n\t\t\tfor (const ft of action.payload) {\r\n\t\t\t\tstate.entities[ft.id] = ft;\r\n\t\t\t}\r\n\t\t\tdb.penalties.clear().then(() => {\r\n\t\t\t\tdb.penalties.bulkPut(action.payload);\r\n\t\t\t});\r\n\t\t},\r\n\t\tupdate(state, action: PayloadAction<Update<Penalty>>) {\r\n\t\t\tstate.entities[action.payload.id] = _.merge(state.entities[action.payload.id], action.payload.changes);\r\n\t\t\tdb.penalties.update(action.payload.id as string, action.payload.changes);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t},\r\n});\r\nexport { penaltiesAdapter, penaltiesSlice };\r\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { v4 } from \"uuid\";\r\nimport { Game, User } from \"../../entities/entities\";\r\nimport { db } from \"../Database\";\r\nimport { AppState } from \"../store\";\r\nimport { penaltiesAdapter } from \"./penalties\";\r\nconst gameSelectors = {\r\n\topenGame: (state: AppState) => state.games.entities[state.games.openGame],\r\n\tgameById: (state: AppState, id: string) => state.games.entities[id],\r\n\tclosedGames: (state: AppState) =>\r\n\t\tstate.games.ids.filter((id) => id !== state.games.openGame).map((id) => state.games.entities[id]),\r\n\tallGames: (state: AppState) => state.games.ids.map((id) => state.games.entities[id]),\r\n\tplayers: (gameId: string) => (state: AppState) =>\r\n\t\tstate.games.entities[gameId]?.users\r\n\t\t\t.map((usr) => state.users.entities[usr])\r\n\t\t\t.sort((a, b) => (a as User).fullName.localeCompare((b as User).fullName)),\r\n\tplayerPenalties: (gameId: string, playerId: string) => (state: AppState) =>\r\n\t\tpenaltiesAdapter\r\n\t\t\t.getSelectors()\r\n\t\t\t.selectAll(state.penalties)\r\n\t\t\t.filter((p) => p.userId === playerId && p.gameId === gameId),\r\n\tpenalties: (gameId: string) => (state: AppState) =>\r\n\t\tpenaltiesAdapter\r\n\t\t\t.getSelectors()\r\n\t\t\t.selectAll(state.penalties)\r\n\t\t\t.filter((p) => p.gameId === gameId),\r\n};\r\nconst gamesSlice = createSlice({\r\n\tinitialState: { ids: [], entities: {}, openGame: \"\" } as {\r\n\t\tids: string[];\r\n\t\tentities: { [id: string]: Game };\r\n\t\topenGame: string;\r\n\t},\r\n\tname: \"games\",\r\n\treducers: {\r\n\t\tcreateGame(state) {\r\n\t\t\tconst newGame: Game = {\r\n\t\t\t\tid: v4(),\r\n\t\t\t\tcreatedOn: Date.now(),\r\n\t\t\t\tstatus: \"open\",\r\n\t\t\t\tname: `SPIEL-${(state.ids.length + 1).toString().padStart(4, \"0\")}`,\r\n\t\t\t\tusers: [],\r\n\t\t\t};\r\n\t\t\tstate.ids.push(newGame.id);\r\n\t\t\tstate.entities[newGame.id] = newGame;\r\n\t\t\tstate.openGame = newGame.id;\r\n\t\t\tdb.games.put(newGame);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tfinishGame(state) {\r\n\t\t\tconst openGame = state.openGame;\r\n\t\t\tif (!openGame) return state;\r\n\t\t\tconst game = state.entities[state.openGame];\r\n\t\t\tif (game.users.length === 0) return state;\r\n\t\t\tgame.status = \"closed\";\r\n\t\t\tstate.openGame = \"\";\r\n\t\t\tdb.games.update(openGame, { status: \"closed\" });\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tabortGame(state) {\r\n\t\t\tconst openGame = state.openGame;\r\n\t\t\tif (!openGame) return state;\r\n\t\t\tstate.ids = state.ids.filter((g) => g !== openGame);\r\n\t\t\tdelete state.entities[openGame];\r\n\t\t\tdb.games.delete(openGame);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tsetGames(state, action: PayloadAction<Game[]>) {\r\n\t\t\tstate.ids = action.payload.map((g) => g.id);\r\n\t\t\tstate.entities = action.payload.reduce((agg, next) => {\r\n\t\t\t\tagg[next.id] = next;\r\n\t\t\t\tif (next.status === \"open\") state.openGame = next.id;\r\n\t\t\t\treturn agg;\r\n\t\t\t}, {} as { [id: string]: Game });\r\n\t\t\tdb.games.clear().then(() => {\r\n\t\t\t\tdb.games.bulkPut(action.payload);\r\n\t\t\t});\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\taddPlayerToOpenGame(state, action: PayloadAction<{ userId: string }>) {\r\n\t\t\tconst openGame = state.entities[state.openGame];\r\n\t\t\tif (openGame == null) return;\r\n\t\t\topenGame.users.push(action.payload.userId);\r\n\t\t\tdb.games.update(state.openGame, { \"users\": [...openGame.users] });\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tremovePlayerFromGame(state, action: PayloadAction<{ userId: string }>) {\r\n\t\t\tconst openGame = state.entities[state.openGame];\r\n\t\t\tif (openGame == null) return;\r\n\t\t\topenGame.users = openGame.users.filter((u) => u !== action.payload.userId);\r\n\t\t\tdb.games.update(state.openGame, { users: [...openGame.users] });\r\n\t\t\treturn state;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport { gamesSlice, gameSelectors };\r\n\r\n","import { createEntityAdapter, createSlice, PayloadAction, Update } from \"@reduxjs/toolkit\";\r\nimport _ from \"lodash\";\r\nimport { Role } from \"../../entities/entities\";\r\nimport { db } from \"../Database\";\r\n\r\nconst rolesAdapter = createEntityAdapter<Role>();\r\nconst rolesSlice = createSlice({\r\n\tinitialState: rolesAdapter.getInitialState(),\r\n\tname: \"roles\",\r\n\treducers: {\r\n\t\tcreate(state, action: PayloadAction<Role>) {\r\n\t\t\tstate.ids.push(action.payload.id);\r\n\t\t\tstate.entities[action.payload.id] = action.payload;\r\n\t\t\tdb.roles.put(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tdelete(state, action: PayloadAction<string>) {\r\n\t\t\tstate.ids = state.ids.filter((id) => id !== action.payload);\r\n\t\t\tdelete state.entities[action.payload];\r\n\t\t\tdb.roles.delete(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tset(state, action: PayloadAction<Role[]>) {\r\n\t\t\tstate.ids = action.payload.map((ft) => ft.id);\r\n\t\t\tstate.entities = {};\r\n\t\t\tfor (const ft of action.payload) {\r\n\t\t\t\tstate.entities[ft.id] = ft;\r\n\t\t\t}\r\n\t\t\tdb.roles.clear().then(() => db.roles.bulkPut(action.payload));\r\n\t\t},\r\n\t\tupdate(state, action: PayloadAction<Update<Role>>) {\r\n\t\t\tstate.entities[action.payload.id] = _.merge(state.entities[action.payload.id], action.payload.changes);\r\n\t\t\tdb.roles.update(action.payload.id as string, action.payload.changes);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport { rolesSlice, rolesAdapter };\r\n","import { configureStore, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport _ from \"lodash\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { FeeType, FeeTypeApplicationStrategy, Role, User } from \"../entities/entities\";\r\nimport { colors } from \"../main/common/colors\";\r\nimport { db } from \"./Database\";\r\nimport { feeTypesSlice } from \"./reducers/feeTypes\";\r\nimport { gamesSlice } from \"./reducers/games\";\r\nimport { penaltiesSlice } from \"./reducers/penalties\";\r\nimport { rolesSlice } from \"./reducers/roles\";\r\nimport { transactionsSlice } from \"./reducers/transactions\";\r\nimport { usersSlice } from \"./reducers/users\";\r\nconst feeTypes: FeeType[] = [\r\n\t{\r\n\t\tlabel: \"Diskutieren\",\r\n\t\tvalue: 0.01,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"2\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Fluchen\",\r\n\t\tvalue: 0.01,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"3\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Alle Neune\",\r\n\t\tvalue: 0.2,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.AllButTarget,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"4\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Gosse\",\r\n\t\tvalue: 0.3,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"5\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Kugel abfangen misslingt\",\r\n\t\tvalue: 0.5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"6\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Kugel abgefangen\",\r\n\t\tvalue: 0.5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"7\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Wurf verpennt\",\r\n\t\tvalue: 0.5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"8\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Nicht aufgeschrieben\",\r\n\t\tvalue: 0.5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"9\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"2. Verlierer\",\r\n\t\tvalue: 0.5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"10\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Kugel fallen lassen\",\r\n\t\tvalue: 1,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"11\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Nicht aufgegessen\",\r\n\t\tvalue: 1,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"12\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Nichts gegessen\",\r\n\t\tvalue: 1,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"13\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Versptung (5m)\",\r\n\t\tvalue: 1,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"14\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Klingel\",\r\n\t\tvalue: 2,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"15\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Kugel auerhalb\",\r\n\t\tvalue: 2,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"16\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Verlierer\",\r\n\t\tvalue: 1.5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"17\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Versptung (15m)\",\r\n\t\tvalue: 2.5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"18\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Interieur beschdigt\",\r\n\t\tvalue: 3,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"19\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Beitrag\",\r\n\t\tvalue: 5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.AutoAll,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"20\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Kegelshirt nicht an\",\r\n\t\tvalue: 5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"21\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Versptung (30m)\",\r\n\t\tvalue: 5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"22\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Eingeschlafen\",\r\n\t\tvalue: 10,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"23\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Brechen auf der Bahn\",\r\n\t\tvalue: 25,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"24\",\r\n\t},\r\n];\r\n\r\nconst roles: Role[] = [\r\n\t{\r\n\t\tname: \"Kassenwart\",\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"1\",\r\n\t},\r\n];\r\n\r\nconst users: User[] = [\r\n\t{\r\n\t\tabbreviation: \"DW\",\r\n\t\tcolor: _.sample(colors) ?? \"#0088cc\",\r\n\t\tcreatedOn: Date.now(),\r\n\t\tfullName: \"David Weischer\",\r\n\t\tid: \"2\",\r\n\t\troles: [\"1\"],\r\n\t},\r\n];\r\n\r\nexport const loadingSlice = createSlice({\r\n\tinitialState: true,\r\n\tname: \"loading\",\r\n\treducers: {\r\n\t\tset(state, action: PayloadAction<boolean>) {\r\n\t\t\tstate = action.payload;\r\n\t\t\treturn false;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const store = configureStore({\r\n\treducer: {\r\n\t\tfeeTypes: feeTypesSlice.reducer,\r\n\t\troles: rolesSlice.reducer,\r\n\t\tusers: usersSlice.reducer,\r\n\t\ttransactions: transactionsSlice.reducer,\r\n\t\tpenalties: penaltiesSlice.reducer,\r\n\t\tgames: gamesSlice.reducer,\r\n\t\tloading: loadingSlice.reducer,\r\n\t},\r\n});\r\n\r\n(async () => {\r\n\tlet dbFeeTypes = await db.feeTypes.toArray();\r\n\tif (dbFeeTypes?.length === 0) dbFeeTypes = feeTypes;\r\n\tlet dbRoles = await db.roles.toArray();\r\n\tif (dbRoles?.length === 0) dbRoles = roles;\r\n\tlet dbUsers = await db.users.toArray();\r\n\tif (dbUsers?.length === 0) dbUsers = users;\r\n\r\n\tstore.dispatch(feeTypesSlice.actions.set(dbFeeTypes));\r\n\tstore.dispatch(penaltiesSlice.actions.set(await db.penalties.toArray()));\r\n\tstore.dispatch(rolesSlice.actions.set(dbRoles));\r\n\tstore.dispatch(usersSlice.actions.set(dbUsers));\r\n\tstore.dispatch(transactionsSlice.actions.set(await db.transactions.toArray()));\r\n\tstore.dispatch(loadingSlice.actions.set(false));\r\n\tstore.dispatch(gamesSlice.actions.setGames(await db.games.toArray()));\r\n})();\r\n\r\nexport type AppDispatch = typeof store.dispatch;\r\nexport const useStoreDispatch = () => useDispatch<typeof store.dispatch>();\r\nexport type AppState = ReturnType<typeof store.getState>;\r\n","import { Button, MenuItem, Select, TextField } from \"@material-ui/core\";\r\nimport React, { useState } from \"react\";\r\nimport { ImFloppyDisk } from \"react-icons/im\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { v4 } from \"uuid\";\r\nimport { FeeTypeApplicationStrategy } from \"../../../entities/entities\";\r\nimport { feeTypesSlice } from \"../../../redux/reducers/feeTypes\";\r\nimport { useStoreDispatch } from \"../../../redux/store\";\r\nimport { CurrencyField } from \"../../common/currencyField\";\r\n\r\nconst FeeTypesCreateForm = withRouter(({ history }) => {\r\n\tconst [val, setValue] = useState(\"\");\r\n\tconst [label, setLabel] = useState(\"\");\r\n\tconst [applicationStrategy, setApplicationStrategy] = useState(FeeTypeApplicationStrategy.Target);\r\n\tconst dispatch = useStoreDispatch();\r\n\treturn (\r\n\t\t<div style={{ display: \"flex\", gap: \"10px\", alignItems: \"center\" }}>\r\n\t\t\t<TextField\r\n\t\t\t\tvalue={label}\r\n\t\t\t\tlabel=\"Name\"\r\n\t\t\t\tname=\"Name\"\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tonChange={(evt) => {\r\n\t\t\t\t\tsetLabel(evt.target.value);\r\n\t\t\t\t}}></TextField>\r\n\t\t\t<CurrencyField\r\n\t\t\t\tvalue={val}\r\n\t\t\t\tlabel=\"Wert\"\r\n\t\t\t\tname=\"Value\"\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\tsetValue(e.target.value);\r\n\t\t\t\t}}></CurrencyField>\r\n\t\t\t<Select\r\n\t\t\t\tlabel=\"Betrifft\"\r\n\t\t\t\tname=\"ApplicationStrategy\"\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tvalue={applicationStrategy}\r\n\t\t\t\tonChange={(evt) => {\r\n\t\t\t\t\tsetApplicationStrategy(parseInt(evt.target.value as string) as FeeTypeApplicationStrategy);\r\n\t\t\t\t}}>\r\n\t\t\t\t<MenuItem value={FeeTypeApplicationStrategy.Target}>Ziel</MenuItem>\r\n\t\t\t\t<MenuItem value={FeeTypeApplicationStrategy.AllButTarget}>Alle auer Ziel</MenuItem>\r\n\t\t\t\t<MenuItem value={FeeTypeApplicationStrategy.AutoAll}>Alle</MenuItem>\r\n\t\t\t</Select>\r\n\t\t\t<Button\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tstartIcon={<ImFloppyDisk size=\".75em\" />}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\tfeeTypesSlice.actions.create({\r\n\t\t\t\t\t\t\tvalue: parseFloat(val),\r\n\t\t\t\t\t\t\tlabel,\r\n\t\t\t\t\t\t\tapplicationStrategy,\r\n\t\t\t\t\t\t\tid: v4(),\r\n\t\t\t\t\t\t\tcreatedOn: Date.now(),\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t\thistory.push(\"/zsku-mgmt/settings\");\r\n\t\t\t\t}}>\r\n\t\t\t\tSpeichern\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default connect()(FeeTypesCreateForm);\r\n","import { Button, Dialog, DialogActions, DialogContent, DialogTitle } from \"@material-ui/core\";\r\nimport React, { ReactElement, useState } from \"react\";\r\n\r\ninterface ConfirmationDialogAction {\r\n\tlabel: string;\r\n\thandle?: () => any;\r\n}\r\ninterface ConfirmationDialogProps {\r\n\ttitle: string;\r\n\tmessage: string;\r\n\r\n\tonConfirm?: () => any;\r\n\tonAbort?: () => any;\r\n\tcustom?: ConfirmationDialogAction[];\r\n\tcomponent: ReactElement;\r\n}\r\nconst ConfirmationDialog = ({ title, message, onConfirm, onAbort, custom, component }: ConfirmationDialogProps) => {\r\n\tconst [open, setOpen] = useState(false);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tsetOpen(true);\r\n\t\t\t\t}}>\r\n\t\t\t\t{component}\r\n\t\t\t</div>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open}\r\n\t\t\t\tonClose={() => {\r\n\t\t\t\t\tsetOpen(false);\r\n\t\t\t\t\tif (typeof onAbort === \"function\") onAbort();\r\n\t\t\t\t}}>\r\n\t\t\t\t<DialogTitle>{title}</DialogTitle>\r\n\t\t\t\t<DialogContent>{message}</DialogContent>\r\n\r\n\t\t\t\t{custom != null && custom.length > 0 ? (\r\n\t\t\t\t\t<div style={{display: \"flex\", flexDirection: \"column\"}}>\r\n\t\t\t\t\t\t{custom.map((action, idx) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tkey={`conf_act_${idx}`}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetOpen(false);\r\n\t\t\t\t\t\t\t\t\t\ttypeof action.handle === \"function\" && action.handle();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{action.label}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsetOpen(false);\r\n\t\t\t\t\t\t\t\tif (typeof onAbort === \"function\") onAbort();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\tAbbrechen\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsetOpen(false);\r\n\t\t\t\t\t\t\t\tif (typeof onConfirm === \"function\") onConfirm();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\tBesttigen\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t)}\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\t);\r\n};\r\nexport { ConfirmationDialog };\r\n","import { bindActionCreators } from \"@reduxjs/toolkit\";\r\nimport React, { Component } from \"react\";\r\nimport { BsPencilSquare, BsTrash } from \"react-icons/bs\";\r\nimport { connect } from \"react-redux\";\r\nimport \"../../../css/settings.scss\";\r\nimport \"../../../entities/dataservice\";\r\nimport { FeeType, FeeTypeApplicationStrategy } from \"../../../entities/entities\";\r\nimport { AppDispatch, AppState } from \"../../../redux/store\";\r\nimport { GenericTable } from \"../../common/genericTable\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport { feeTypesAdapter, feeTypesSlice } from \"../../../redux/reducers/feeTypes\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { ConfirmationDialog } from \"../../common/confirmationDialog\";\r\n\r\ntype FeeTableState = {};\r\ninterface FeeTableProps extends RouteComponentProps {}\r\ntype LinkStateProps = { feeTypes: FeeType[] };\r\ntype LinkDispatchProps = { deleteFeeType: (id: string) => void };\r\n\r\nexport class FeeTypesTable extends Component<FeeTableProps & LinkStateProps & LinkDispatchProps, FeeTableState> {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<GenericTable<FeeType>\r\n\t\t\t\tcolumns={[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: \"col_name\",\r\n\t\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\t\tdata: \"label\",\r\n\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: \"col_value\",\r\n\t\t\t\t\t\tname: \"Wert\",\r\n\t\t\t\t\t\tdata: (r) => (r.value != null ? r.value.toFixed(2) + \" \" : \"CUSTOM\"),\r\n\t\t\t\t\t\talign: \"right\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\tsort: (a,b) => {return (a.value ?? 0) - (b.value ?? 0)}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: \"col_strategy\",\r\n\t\t\t\t\t\tname: \"Betrifft\",\r\n\t\t\t\t\t\tdata: (r) => {\r\n\t\t\t\t\t\t\tswitch (r.applicationStrategy) {\r\n\t\t\t\t\t\t\t\tcase FeeTypeApplicationStrategy.Target:\r\n\t\t\t\t\t\t\t\t\treturn \"Ziel\";\r\n\t\t\t\t\t\t\t\tcase FeeTypeApplicationStrategy.AllButTarget:\r\n\t\t\t\t\t\t\t\t\treturn \"Alle auer Ziel\";\r\n\t\t\t\t\t\t\t\tcase FeeTypeApplicationStrategy.AutoAll:\r\n\t\t\t\t\t\t\t\t\treturn \"Alle\";\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\treturn \"Niemanden\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\torderable: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: \"col_timestamp\",\r\n\t\t\t\t\t\tname: \"Erstellt am\",\r\n\t\t\t\t\t\tdata: (r) => new Date(r.createdOn ?? Date.now()).toLocaleDateString(\"de-DE\"),\r\n\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\tsort: (a,b) => a.createdOn - b.createdOn\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: \"col_actions\",\r\n\t\t\t\t\t\tname: \"Aktionen\",\r\n\t\t\t\t\t\talign: \"right\",\r\n\t\t\t\t\t\tdata: (r) => (\r\n\t\t\t\t\t\t\t<div style={{ float: \"right\", display: \"flex\" }}>\r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tthis.props.history.push(\"/zsku-mgmt/settings/feeTypes/edit/\" + r.id);\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<BsPencilSquare size=\".75em\"></BsPencilSquare>\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t<ConfirmationDialog\r\n\t\t\t\t\t\t\t\t\ttitle=\"Strafe lschen\"\r\n\t\t\t\t\t\t\t\t\tmessage={`Soll die Strafe ${r.label} wirklich gelscht werden?`}\r\n\t\t\t\t\t\t\t\t\tonConfirm={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (r.id != null) this.props.deleteFeeType(r.id);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tcomponent={\r\n\t\t\t\t\t\t\t\t\t\t<IconButton color=\"primary\">\r\n\t\t\t\t\t\t\t\t\t\t\t<BsTrash size=\".75em\"></BsTrash>\r\n\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t}></ConfirmationDialog>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t},\r\n\t\t\t\t]}\r\n\t\t\t\trows={this.props.feeTypes.filter((ft) => ft.deleted !== true)}\r\n\t\t\t\tentriesPerPage={5}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: AppState): LinkStateProps => ({\r\n\tfeeTypes: feeTypesAdapter.getSelectors().selectAll(state.feeTypes),\r\n});\r\nconst mapDispatchToProps = (dispatch: AppDispatch): LinkDispatchProps => ({\r\n\tdeleteFeeType: bindActionCreators(feeTypesSlice.actions.delete, dispatch),\r\n});\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(FeeTypesTable));\r\n","import { Button, Paper } from \"@material-ui/core\";\r\nimport React, { Component } from \"react\";\r\nimport { FaMoneyBillWave } from \"react-icons/fa\";\r\nimport { Link, Route } from \"react-router-dom\";\r\nimport \"../../../css/settings.scss\";\r\nimport \"../../../entities/dataservice\";\r\nimport FeeTypesEditForm from \"./feeTypesEditForm\";\r\nimport FeeTypesCreateForm from \"./feeTypesCreateForm\";\r\nimport FeeTypesTable from \"./feeTypesTable\";\r\n\r\ntype FeeTypesState = {};\r\n\r\nexport class FeeTypes extends Component<{}, FeeTypesState> {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t\t<div className=\"feeTypesMain settingszsku-panel\">\r\n\t\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t\t<h1>Strafen</h1>\r\n\t\t\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t\t\t<FaMoneyBillWave size=\"4em\" style={{ backgroundColor: \"#EDB458\" }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<Link to=\"/zsku-mgmt/settings/feeTypes/addNew\" style={{ textDecoration: \"none\" }}>\r\n\t\t\t\t\t\t\t<Button variant=\"text\" color=\"primary\">\r\n\t\t\t\t\t\t\t\tHinzufgen\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"settingsContainer\">\r\n\t\t\t\t\t\t<Route path=\"/zsku-mgmt/settings/feeTypes/addNew\" component={FeeTypesCreateForm}></Route>\r\n\t\t\t\t\t\t<Route path=\"/zsku-mgmt/settings/feeTypes/edit/:id\" component={FeeTypesEditForm}></Route>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Route path=\"/zsku-mgmt/settings\" component={FeeTypesTable}></Route>\r\n\t\t\t\t</div>\r\n\t\t\t</Paper>\r\n\t\t);\r\n\t}\r\n}\r\n","import { Button, TextField } from \"@material-ui/core\";\r\nimport React, { useState } from \"react\";\r\nimport { ImFloppyDisk } from \"react-icons/im\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { v4 } from \"uuid\";\r\nimport { rolesSlice } from \"../../../redux/reducers/roles\";\r\nimport { useStoreDispatch } from \"../../../redux/store\";\r\n\r\nconst RolesCreateForm = withRouter(({ history }) => {\r\n\tconst [name, setName] = useState(\"\");\r\n\tconst dispatch = useStoreDispatch();\r\n\treturn (\r\n\t\t<div style={{ display: \"flex\", gap: \"10px\", alignItems: \"center\" }}>\r\n\t\t\t<TextField\r\n\t\t\t\tvalue={name}\r\n\t\t\t\tlabel=\"Name\"\r\n\t\t\t\tname=\"Name\"\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tonChange={(evt) => {\r\n\t\t\t\t\tsetName(evt.target.value);\r\n\t\t\t\t}}></TextField>\r\n\t\t\t<Button\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tstartIcon={<ImFloppyDisk size=\".75em\" />}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tdispatch(rolesSlice.actions.create({ name, id: v4(), createdOn: Date.now() }));\r\n\t\t\t\t\thistory.push(\"/zsku-mgmt/settings\");\r\n\t\t\t\t}}>\r\n\t\t\t\tSpeichern\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default connect()(RolesCreateForm);\r\n","import { Button, TextField } from \"@material-ui/core\";\r\nimport { bindActionCreators } from \"@reduxjs/toolkit\";\r\nimport React, { Component } from \"react\";\r\nimport { ImFloppyDisk } from \"react-icons/im\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport { Role } from \"../../../entities/entities\";\r\nimport { rolesAdapter, rolesSlice } from \"../../../redux/reducers/roles\";\r\nimport { AppDispatch, AppState } from \"../../../redux/store\";\r\n\r\ntype RolesFormState = {\r\n\tname: string;\r\n\tid: string;\r\n};\r\n\r\nconst update = rolesSlice.actions.update;\r\ntype LinkDispatchProps = {\r\n\teditRole: typeof update;\r\n};\r\n\r\ntype LinkStateProps = {\r\n\trole?: Role;\r\n};\r\n\r\ntype RouteInfo = {\r\n\tid: string;\r\n};\r\n\r\ninterface RolesFormProps extends RouteComponentProps<RouteInfo> {}\r\n\r\nclass RolesEditForm extends Component<LinkDispatchProps & LinkStateProps & RolesFormProps, RolesFormState> {\r\n\tconstructor(props: LinkDispatchProps & LinkStateProps & RolesFormProps) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tname: this.props.role?.name ?? \"\",\r\n\t\t\tid: this.props.role?.id ?? \"ERR\",\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tif (this.state.id !== this.props.match.params.id) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tid: this.props.role?.id ?? \"ERR\",\r\n\t\t\t\tname: this.props.role?.name ?? \"ERR\",\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div style={{ display: \"flex\", gap: \"10px\", alignItems: \"center\" }}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tvalue={this.state.name}\r\n\t\t\t\t\tlabel=\"Name\"\r\n\t\t\t\t\tname=\"Name\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tonChange={(evt) => {\r\n\t\t\t\t\t\tthis.setState({ name: evt.target.value });\r\n\t\t\t\t\t}}></TextField>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tstartIcon={<ImFloppyDisk size=\".75em\" />}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tthis.props.editRole({\r\n\t\t\t\t\t\t\tchanges: { name: this.state.name },\r\n\t\t\t\t\t\t\tid: this.state.id,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.props.history.push(\"/zsku-mgmt/settings\");\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\tSpeichern\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: RolesFormProps): LinkStateProps => ({\r\n\trole: rolesAdapter.getSelectors().selectById(state.roles, ownProps.match.params.id),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: AppDispatch): LinkDispatchProps => ({\r\n\teditRole: bindActionCreators(rolesSlice.actions.update, dispatch),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(RolesEditForm));\r\n","import React from \"react\";\r\nimport { BsPencilSquare, BsTrash } from \"react-icons/bs\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { Role } from \"../../../entities/entities\";\r\nimport { AppState, useStoreDispatch } from \"../../../redux/store\";\r\nimport { GenericTable } from \"../../common/genericTable\";\r\nimport { rolesAdapter, rolesSlice } from \"../../../redux/reducers/roles\";\r\nimport { connect, useSelector } from \"react-redux\";\r\nimport { EntityState } from \"@reduxjs/toolkit\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { ConfirmationDialog } from \"../../common/confirmationDialog\";\r\n\r\nconst RolesTable = withRouter(({ history }) => {\r\n\tconst dispatch = useStoreDispatch();\r\n\tconst rolesCollection = useSelector<AppState>((state) => state.roles) as EntityState<Role>;\r\n\tconst roles = rolesAdapter.getSelectors().selectAll(rolesCollection);\r\n\treturn (\r\n\t\t<GenericTable<Role>\r\n\t\t\tcolumns={[\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"col_name\",\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\tdata: \"name\",\r\n\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\torderable: true,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"col_timestamp\",\r\n\t\t\t\t\tname: \"Erstellt am\",\r\n\t\t\t\t\tdata: (r) => new Date(r.createdOn ?? Date.now()).toLocaleDateString(\"de-DE\"),\r\n\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\torderable: true,\r\n\t\t\t\t\tsort: (a, b) => a.createdOn - b.createdOn,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"col_actions\",\r\n\t\t\t\t\tname: \"Aktionen\",\r\n\t\t\t\t\talign: \"right\",\r\n\t\t\t\t\tdata: (r) => (\r\n\t\t\t\t\t\t<div style={{ float: \"right\", display: \"flex\" }}>\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/zsku-mgmt/settings/roles/edit/\" + r.id);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<BsPencilSquare size=\".75em\"></BsPencilSquare>\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t<ConfirmationDialog\r\n\t\t\t\t\t\t\t\ttitle=\"Posten lschen\"\r\n\t\t\t\t\t\t\t\tmessage={`Soll der Posten ${r.name} wirklich gelscht werden?`}\r\n\t\t\t\t\t\t\t\tonConfirm={() => {\r\n\t\t\t\t\t\t\t\t\tif (r.id != null) dispatch(rolesSlice.actions.delete(r.id));\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tcomponent={\r\n\t\t\t\t\t\t\t\t\t<IconButton color=\"primary\">\r\n\t\t\t\t\t\t\t\t\t\t<BsTrash size=\".75em\"></BsTrash>\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t}></ConfirmationDialog>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t),\r\n\t\t\t\t},\r\n\t\t\t]}\r\n\t\t\trows={roles}\r\n\t\t\tentriesPerPage={5}></GenericTable>\r\n\t);\r\n});\r\n\r\nexport default connect()(RolesTable);\r\n","import Button from \"@material-ui/core/Button/Button\";\r\nimport Paper from \"@material-ui/core/Paper/Paper\";\r\nimport React from \"react\";\r\nimport { FaUserTag } from \"react-icons/fa\";\r\nimport { Link, Route } from \"react-router-dom\";\r\nimport RolesCreateForm from \"./rolesCreateForm\";\r\nimport RolesEditForm from \"./rolesEditForm\";\r\nimport RolesTable from \"./rolesTable\";\r\n\r\nconst Roles = () => {\r\n\treturn (\r\n\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t<div className=\"rolesMain settingszsku-panel\">\r\n\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t<h1>Posten</h1>\r\n\t\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t\t<FaUserTag size=\"4em\" style={{ backgroundColor: \"#7DCE82\" }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Link to=\"/zsku-mgmt/settings/roles/addNew\" style={{ textDecoration: \"none\" }}>\r\n\t\t\t\t\t\t<Button variant=\"text\" color=\"primary\">\r\n\t\t\t\t\t\t\tHinzufgen\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"settingsContainer\">\r\n\t\t\t\t\t<Route path=\"/zsku-mgmt/settings/roles/addNew\" component={RolesCreateForm}></Route>\r\n\t\t\t\t\t<Route path=\"/zsku-mgmt/settings/roles/edit/:id\" component={RolesEditForm}></Route>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Route path=\"/zsku-mgmt/settings\" component={RolesTable}></Route>\r\n\t\t\t</div>\r\n\t\t</Paper>\r\n\t);\r\n};\r\n\r\nexport default Roles;\r\n","import { IconButton } from \"@material-ui/core\";\r\nimport { EntityState } from \"@reduxjs/toolkit\";\r\nimport React from \"react\";\r\nimport { BsPencilSquare, BsTrash } from \"react-icons/bs\";\r\nimport { connect, useSelector } from \"react-redux\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { Role, User } from \"../../../entities/entities\";\r\nimport { rolesAdapter } from \"../../../redux/reducers/roles\";\r\nimport { usersAdapter, usersSlice } from \"../../../redux/reducers/users\";\r\nimport { AppState, useStoreDispatch } from \"../../../redux/store\";\r\nimport { ConfirmationDialog } from \"../../common/confirmationDialog\";\r\nimport { GenericTable } from \"../../common/genericTable\";\r\n\r\nconst UsersTable = withRouter(({ history }) => {\r\n\tconst dispatch = useStoreDispatch();\r\n\tconst usersCollection = useSelector<AppState>((state) => state.users) as EntityState<User>;\r\n\tconst rolesCollection = useSelector<AppState>((state) => state.roles) as EntityState<Role>;\r\n\tconst users = usersAdapter\r\n\t\t.getSelectors()\r\n\t\t.selectAll(usersCollection)\r\n\t\t.filter((u) => u.deleted !== true);\r\n\tconst roles = rolesAdapter.getSelectors().selectEntities(rolesCollection);\r\n\r\n\treturn (\r\n\t\t<GenericTable<User>\r\n\t\t\tcolumns={[\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"col_name\",\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\tdata: (row) => <Link to={\"/zsku-mgmt/users/\" + row.id}>{row.fullName}</Link>,\r\n\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\torderable: true,\r\n\t\t\t\t\tsort: (a, b) => a.fullName.localeCompare(b.fullName),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"col_abbreviation\",\r\n\t\t\t\t\tname: \"Abkrzung\",\r\n\t\t\t\t\tdata: \"abbreviation\",\r\n\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\torderable: true,\r\n\t\t\t\t\tsort: (a, b) => a.fullName.localeCompare(b.fullName),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"col_roles\",\r\n\t\t\t\t\tname: \"Posten\",\r\n\t\t\t\t\tdata: (row) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\trow.roles\r\n\t\t\t\t\t\t\t\t.slice(0, 3)\r\n\t\t\t\t\t\t\t\t.map((r) => roles[r]?.name)\r\n\t\t\t\t\t\t\t\t.join(\", \") + (row.roles.length > 3 ? \", ...\" : \"\")\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\talign: \"left\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"col_timestamp\",\r\n\t\t\t\t\tname: \"Erstellt am\",\r\n\t\t\t\t\tdata: (r) => new Date(r.createdOn ?? Date.now()).toLocaleDateString(\"de-DE\"),\r\n\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\torderable: true,\r\n\t\t\t\t\tsort: (a, b) => a.createdOn - b.createdOn,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"col_actions\",\r\n\t\t\t\t\tname: \"Aktionen\",\r\n\t\t\t\t\talign: \"right\",\r\n\t\t\t\t\tdata: (r) => (\r\n\t\t\t\t\t\t<div style={{ float: \"right\", display: \"flex\" }}>\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/zsku-mgmt/users/\" + r.id);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<BsPencilSquare size=\".75em\"></BsPencilSquare>\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t<ConfirmationDialog\r\n\t\t\t\t\t\t\t\ttitle=\"Mitglied lschen\"\r\n\t\t\t\t\t\t\t\tmessage={`Soll das Mitglied ${r.fullName} wirklich gelscht werden?`}\r\n\t\t\t\t\t\t\t\tonConfirm={() => {\r\n\t\t\t\t\t\t\t\t\tif (r.id != null) dispatch(usersSlice.actions.delete(r.id));\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tcomponent={\r\n\t\t\t\t\t\t\t\t\t<IconButton color=\"primary\">\r\n\t\t\t\t\t\t\t\t\t\t<BsTrash size=\".75em\"></BsTrash>\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t}></ConfirmationDialog>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t),\r\n\t\t\t\t},\r\n\t\t\t]}\r\n\t\t\trows={users}\r\n\t\t\tentriesPerPage={5}></GenericTable>\r\n\t);\r\n});\r\n\r\nexport default connect()(UsersTable);\r\n","import Button from \"@material-ui/core/Button/Button\";\r\nimport Paper from \"@material-ui/core/Paper/Paper\";\r\nimport React from \"react\";\r\nimport { FaUserFriends } from \"react-icons/fa\";\r\nimport { Link, Route } from \"react-router-dom\";\r\nimport UsersTable from \"./usersTable\";\r\n\r\nconst Users = () => {\r\n\treturn (\r\n\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t<div className=\"usersMain settingszsku-panel\">\r\n\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t<h1>Mitglieder</h1>\r\n\t\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t\t<FaUserFriends size=\"4em\" style={{ backgroundColor: \"#6184D8\" }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Link to=\"/zsku-mgmt/users/new\" style={{ textDecoration: \"none\" }}>\r\n\t\t\t\t\t\t<Button variant=\"text\" color=\"primary\">\r\n\t\t\t\t\t\t\tHinzufgen\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Route path=\"/zsku-mgmt/settings\" component={UsersTable}></Route>\r\n\t\t\t</div>\r\n\t\t</Paper>\r\n\t);\r\n};\r\n\r\nexport default Users;\r\n","import React from \"react\";\r\nimport { FeeTypes } from \"./FeeTypes/feeTypes\";\r\nimport Roles from \"./Roles/roles\";\r\nimport Users from \"./Users/users\";\r\n\r\nconst Settings = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"zsku-panel\">\r\n\t\t\t\t<Users />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"zsku-panel\">\r\n\t\t\t\t<Roles />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"zsku-panel\">\r\n\t\t\t\t<FeeTypes />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default Settings;\r\n","import {\r\n\tAvatar,\r\n\tButton,\r\n\tCard,\r\n\tCardContent,\r\n\tCardHeader,\r\n\tDialog,\r\n\tDialogActions,\r\n\tDialogContent,\r\n\tDialogTitle,\r\n\tFormControl,\r\n\tIconButton,\r\n\tMenuItem,\r\n\tPaper,\r\n\tSelect,\r\n\tTextField\r\n} from \"@material-ui/core\";\r\nimport { Dictionary } from \"@reduxjs/toolkit\";\r\nimport { useFormik } from \"formik\";\r\nimport { countBy, entries, last, maxBy } from \"lodash\";\r\nimport React, { ComponentProps, useState } from \"react\";\r\nimport { BsFillCaretLeftFill, BsFillCaretRightFill, BsFillTrashFill } from \"react-icons/bs\";\r\nimport { FaChartPie } from \"react-icons/fa\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport { v4 } from \"uuid\";\r\nimport * as yup from \"yup\";\r\nimport { FeeType, FeeTypeApplicationStrategy, Game, Penalty, Role, User } from \"../../entities/entities\";\r\nimport { feeTypesAdapter } from \"../../redux/reducers/feeTypes\";\r\nimport { gameSelectors, gamesSlice } from \"../../redux/reducers/games\";\r\nimport { penaltiesAdapter, penaltiesSlice } from \"../../redux/reducers/penalties\";\r\nimport { transactionsAdapter, transactionsSlice } from \"../../redux/reducers/transactions\";\r\nimport { usersAdapter } from \"../../redux/reducers/users\";\r\nimport { AppDispatch, AppState } from \"../../redux/store\";\r\nimport { ConfirmationDialog } from \"../common/confirmationDialog\";\r\nimport { Currency, formatCurrency } from \"../common/currency\";\r\nimport { CurrencyField } from \"../common/currencyField\";\r\nimport { GenericTable } from \"../common/genericTable\";\r\nconst NoCurrentGame = () => {\r\n\tconst dispatch = useDispatch<AppDispatch>();\r\n\treturn (\r\n\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t<h1>Kein aktuelles Spiel</h1>\r\n\t\t\t<Button\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tdispatch(gamesSlice.actions.createGame());\r\n\t\t\t\t}}>\r\n\t\t\t\tNeues Spiel\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\ninterface GroupedPenaltyProps extends ComponentProps<\"div\"> {\r\n\tpenalties: Penalty[];\r\n\teditable?: boolean;\r\n\tuser?: string;\r\n}\r\nconst GroupedPenalties = ({ penalties, editable, user, ...other }: GroupedPenaltyProps) => {\r\n\ttype GroupedPenalty = [string, { count: number; sum: number; penalties: Penalty[] }];\r\n\tconst dispatch = useDispatch();\r\n\tconst feeTypes = useSelector<AppState>((state) =>\r\n\t\tfeeTypesAdapter.getSelectors().selectEntities(state.feeTypes)\r\n\t) as Dictionary<FeeType>;\r\n\tconst openGame = useSelector<AppState>(gameSelectors.openGame) as Game;\r\n\tconst groupedPenalties: GroupedPenalty[] = entries(\r\n\t\tpenalties.reduce<{\r\n\t\t\t[feeTypeId: string]: { count: number; sum: number; penalties: Penalty[] };\r\n\t\t}>((agg, next) => {\r\n\t\t\tif (agg[next.feeTypeId] == null) {\r\n\t\t\t\tagg[next.feeTypeId] = { count: 0, sum: 0, penalties: [] };\r\n\t\t\t}\r\n\t\t\tagg[next.feeTypeId].count++;\r\n\t\t\tagg[next.feeTypeId].sum += next.value;\r\n\t\t\tagg[next.feeTypeId].penalties.push(next);\r\n\t\t\treturn agg;\r\n\t\t}, {})\r\n\t);\r\n\treturn (\r\n\t\t<div {...other}>\r\n\t\t\t<GenericTable<GroupedPenalty>\r\n\t\t\t\tcolumns={[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: \"col_feetypename\",\r\n\t\t\t\t\t\tdata: (r) => feeTypes[r[0]]?.label ?? \"N/A\",\r\n\t\t\t\t\t\tname: \"Strafe\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: \"col_count\",\r\n\t\t\t\t\t\tdata: (r) =>\r\n\t\t\t\t\t\t\teditable && user ? (\r\n\t\t\t\t\t\t\t\t<div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst penalty = penalties.find((p) => p.feeTypeId === r[0]);\r\n\t\t\t\t\t\t\t\t\t\t\tif (penalty == null) return;\r\n\t\t\t\t\t\t\t\t\t\t\tdispatch(penaltiesSlice.actions.delete(penalty.id));\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<BsFillCaretLeftFill />\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t<span>{r[1].count.toString()}</span>\r\n\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\t\tpenaltiesSlice.actions.create({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcreatedOn: Date.now(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfeeTypeId: r[0],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgameId: openGame.id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid: v4(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuserId: user,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: feeTypes[r[0]]?.value ?? 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<BsFillCaretRightFill />\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\tr[1].count.toString()\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\tname: \"Anzahl\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\tsort: (a, b) => a[1].count - b[1].count,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: \"col_sum\",\r\n\t\t\t\t\t\tdata: (r) => <Currency val={r[1].sum} style={{ margin: 0 }}></Currency>,\r\n\t\t\t\t\t\tname: \"Summe\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\tsort: (a, b) => a[1].sum - b[1].sum,\r\n\t\t\t\t\t},\r\n\t\t\t\t]}\r\n\t\t\t\trows={groupedPenalties}\r\n\t\t\t\tentriesPerPage={10}></GenericTable>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst PlayerCard = ({\r\n\tplayer,\r\n\tgame,\r\n\topenAddPenalty,\r\n}: {\r\n\tplayer: User;\r\n\tgame: Game;\r\n\topenAddPenalty: (player: User) => any;\r\n}) => {\r\n\tconst dispatch = useDispatch<AppDispatch>();\r\n\tconst penalties = useSelector<AppState>(gameSelectors.playerPenalties(game.id, player.id)) as Penalty[];\r\n\tconst [showStats, setShowStats] = useState(false);\r\n\tconst role = useSelector<AppState>((state) => state.roles.entities[player.roles.find(Boolean) ?? \"\"]) as Role;\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Card\r\n\t\t\t\tonClick={() => openAddPenalty(player)}\r\n\t\t\t\televation={2}\r\n\t\t\t\tstyle={{ borderRadius: \"1em\", maxWidth: \"750px\", cursor: \"pointer\" }}>\r\n\t\t\t\t<CardHeader\r\n\t\t\t\t\tavatar={<Avatar style={{ backgroundColor: player.color }}>{player.abbreviation}</Avatar>}\r\n\t\t\t\t\taction={\r\n\t\t\t\t\t\t<div onClick={(e) => e.stopPropagation()}>\r\n\t\t\t\t\t\t\t{penalties.length > 0 ? (\r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\ttitle=\"Details anzeigen\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetShowStats(!showStats);\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<FaChartPie size=\".85em\" />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t\t\t<ConfirmationDialog\r\n\t\t\t\t\t\t\t\ttitle=\"Spieler entfernen\"\r\n\t\t\t\t\t\t\t\tmessage={`Soll ${player.fullName} aus dem Spiel entfernt werden? Alle Strafen fr diesen Spieler werden zurckgesetzt.`}\r\n\t\t\t\t\t\t\t\tonConfirm={() => {\r\n\t\t\t\t\t\t\t\t\tdispatch(penaltiesSlice.actions.deleteMultiple(penalties.map((p) => p.id)));\r\n\t\t\t\t\t\t\t\t\tdispatch(gamesSlice.actions.removePlayerFromGame({ userId: player.id }));\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tcomponent={\r\n\t\t\t\t\t\t\t\t\t<IconButton title=\"Spieler entfernen\">\r\n\t\t\t\t\t\t\t\t\t\t<BsFillTrashFill color=\"red\" size=\".85em\" />\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsubheader={role?.name ?? \"Kein Posten\"}\r\n\t\t\t\t\ttitle={player.fullName}>\r\n\t\t\t\t\t<h4>{player.fullName}</h4>\r\n\t\t\t\t</CardHeader>\r\n\t\t\t\t{showStats && penalties.length > 0 ? (\r\n\t\t\t\t\t<CardContent>\r\n\t\t\t\t\t\t<GroupedPenalties\r\n\t\t\t\t\t\t\tpenalties={penalties}\r\n\t\t\t\t\t\t\tuser={player.id}\r\n\t\t\t\t\t\t\teditable={true}\r\n\t\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</CardContent>\r\n\t\t\t\t) : null}\r\n\t\t\t\t<CardContent>\r\n\t\t\t\t\t<hr style={{ borderTop: \"1px solid #ddd\", borderBottom: \"0\" }}></hr>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tdisplay: \"grid\",\r\n\t\t\t\t\t\t\tgridTemplateColumns: \"auto 1px auto\",\r\n\t\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\t\tmarginBottom: 0,\r\n\t\t\t\t\t\t\tmarginTop: \".75em\",\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<div style={{ width: \"100%\", textAlign: \"center\" }}>\r\n\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tmargin: \".5em\",\r\n\t\t\t\t\t\t\t\t\tfontWeight: \"bold\",\r\n\t\t\t\t\t\t\t\t\tcolor: \"#888\",\r\n\t\t\t\t\t\t\t\t\ttextTransform: \"uppercase\",\r\n\t\t\t\t\t\t\t\t\tletterSpacing: \".1em\",\r\n\t\t\t\t\t\t\t\t\tfontSize: \"small\",\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tStrafen\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<p style={{ margin: \".25em\", fontWeight: \"bold\", fontSize: \"large\" }}>{penalties.length}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style={{ borderRight: \"1px solid #ddd\", height: \"3em\", margin: \"0\" }}></div>\r\n\t\t\t\t\t\t<div style={{ width: \"100%\", textAlign: \"center\" }}>\r\n\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tmargin: \".25em\",\r\n\t\t\t\t\t\t\t\t\tfontWeight: \"bold\",\r\n\t\t\t\t\t\t\t\t\tcolor: \"#888\",\r\n\t\t\t\t\t\t\t\t\ttextTransform: \"uppercase\",\r\n\t\t\t\t\t\t\t\t\tletterSpacing: \".1em\",\r\n\t\t\t\t\t\t\t\t\tfontSize: \"small\",\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tBetrag\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<Currency\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tmargin: \".25em\",\r\n\t\t\t\t\t\t\t\t\tfontWeight: \"bold\",\r\n\t\t\t\t\t\t\t\t\tfontSize: \"large\",\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tval={penalties.reduce((agg, next) => agg + next.value, 0)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</CardContent>\r\n\t\t\t</Card>\r\n\t\t</div>\r\n\t);\r\n};\r\ntype PenaltyDialogType = {\r\n\tpenaltyModalOpen: boolean;\r\n\tsetPenaltyModalOpen: (open: boolean) => any;\r\n\tpenaltyModalPlayer: User;\r\n\tgame: Game;\r\n};\r\ntype AddPenaltyDialogFormValues = {\r\n\tfeeType: string;\r\n\tvalue: number | undefined;\r\n\tquantity: number;\r\n};\r\n\r\nconst AddPenaltyDialog = ({ penaltyModalOpen, setPenaltyModalOpen, penaltyModalPlayer, game }: PenaltyDialogType) => {\r\n\tconst dispatch = useDispatch<AppDispatch>();\r\n\tconst validationSchema = yup.object({\r\n\t\tfeeType: yup.string().required(),\r\n\t\tvalue: yup.number().positive().required(),\r\n\t\tquantity: yup.number().min(0).required(),\r\n\t});\r\n\tconst formik = useFormik<AddPenaltyDialogFormValues>({\r\n\t\tinitialValues: {\r\n\t\t\tfeeType: \"\",\r\n\t\t\tvalue: undefined,\r\n\t\t\tquantity: 1,\r\n\t\t},\r\n\t\tvalidationSchema,\r\n\t\tonSubmit: (values) => {\r\n\t\t\tconst feeType = feeTypes.find((ft) => ft.id === values.feeType);\r\n\t\t\tif (feeType == null) return;\r\n\t\t\tconst penalties: Penalty[] = [];\r\n\t\t\tfor (let i = 0; i < values.quantity; i++) {\r\n\t\t\t\tconst targets: string[] = [];\r\n\t\t\t\tif (feeType.applicationStrategy === FeeTypeApplicationStrategy.AutoAll) targets.push(...game.users);\r\n\t\t\t\telse if (feeType.applicationStrategy === FeeTypeApplicationStrategy.AllButTarget)\r\n\t\t\t\t\ttargets.push(...game.users.filter((u) => u !== penaltyModalPlayer.id));\r\n\t\t\t\telse if (feeType.applicationStrategy === FeeTypeApplicationStrategy.Target)\r\n\t\t\t\t\ttargets.push(penaltyModalPlayer.id);\r\n\t\t\t\tpenalties.push(\r\n\t\t\t\t\t...targets.map((target) => ({\r\n\t\t\t\t\t\tid: v4(),\r\n\t\t\t\t\t\tcreatedOn: Date.now(),\r\n\t\t\t\t\t\tfeeTypeId: feeType.id,\r\n\t\t\t\t\t\tgameId: game.id,\r\n\t\t\t\t\t\tuserId: target,\r\n\t\t\t\t\t\tvalue: parseFloat(values.value?.toString() ?? \"0\"),\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tdispatch(penaltiesSlice.actions.createMultiple(penalties));\r\n\t\t\tformik.resetForm({\r\n\t\t\t\tvalues: { feeType: \"\", quantity: 1, value: undefined },\r\n\t\t\t\ttouched: { feeType: false, quantity: false, value: false },\r\n\t\t\t\terrors: { feeType: undefined, quantity: undefined, value: undefined },\r\n\t\t\t});\r\n\t\t\tsetPenaltyModalOpen(false);\r\n\t\t},\r\n\t});\r\n\tconst feeTypes = useSelector<AppState>((state) =>\r\n\t\tfeeTypesAdapter.getSelectors().selectAll(state.feeTypes)\r\n\t) as FeeType[];\r\n\treturn (\r\n\t\t<Dialog open={penaltyModalOpen} onClose={() => setPenaltyModalOpen(false)} maxWidth=\"sm\" fullWidth={true}>\r\n\t\t\t<DialogTitle>Strafe fr {penaltyModalPlayer?.fullName ?? \"?\"}</DialogTitle>\r\n\t\t\t<DialogContent>\r\n\t\t\t\t<form onSubmit={formik.handleSubmit}>\r\n\t\t\t\t\t<div className=\"zsku-keyValueGrid\">\r\n\t\t\t\t\t\t<h4>Strafe</h4>\r\n\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tid=\"feeType\"\r\n\t\t\t\t\t\t\t\tname=\"feeType\"\r\n\t\t\t\t\t\t\t\terror={formik.touched.feeType && Boolean(formik.errors.feeType)}\r\n\t\t\t\t\t\t\t\tvalue={formik.values.feeType}\r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tformik.setFieldValue(\"feeType\", e.target.value);\r\n\t\t\t\t\t\t\t\t\tconst feeType = feeTypes.find((ft) => ft.id === e.target.value);\r\n\t\t\t\t\t\t\t\t\tformik.setFieldValue(\"value\", feeType?.value ?? 0);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\trenderValue={() => {\r\n\t\t\t\t\t\t\t\t\treturn <p>{feeTypes.find((ft) => ft.id === formik.values.feeType)?.label}</p>;\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{feeTypes\r\n\t\t\t\t\t\t\t\t\t.filter(\r\n\t\t\t\t\t\t\t\t\t\t(ft) =>\r\n\t\t\t\t\t\t\t\t\t\t\tft.applicationStrategy !== FeeTypeApplicationStrategy.AutoAll &&\r\n\t\t\t\t\t\t\t\t\t\t\tft.deleted !== true\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t.sort((a, b) => a.label.localeCompare(b.label))\r\n\t\t\t\t\t\t\t\t\t.map((ft) => (\r\n\t\t\t\t\t\t\t\t\t\t<MenuItem key={ft.id} value={ft.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t{ft.label}\r\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t<h4>Betrag</h4>\r\n\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t<CurrencyField\r\n\t\t\t\t\t\t\t\tdisabled={(() => {\r\n\t\t\t\t\t\t\t\t\tconst feeType = feeTypes.find((ft) => ft.id === formik.values.feeType);\r\n\t\t\t\t\t\t\t\t\treturn feeType == null || feeType.value != null;\r\n\t\t\t\t\t\t\t\t})()}\r\n\t\t\t\t\t\t\t\terror={formik.touched.value && Boolean(formik.errors.value)}\r\n\t\t\t\t\t\t\t\thelperText={formik.touched.value && formik.errors.value}\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tvalue={formik.values.value}\r\n\t\t\t\t\t\t\t\tname=\"Value\"\r\n\t\t\t\t\t\t\t\tid=\"value\"\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tformik.setFieldValue(\"value\", (e.target as any).value)\r\n\t\t\t\t\t\t\t\t}></CurrencyField>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t<h4>Anzahl</h4>\r\n\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tid=\"quantity\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tdisabled={feeTypes.find((ft) => ft.id === formik.values.feeType)?.value == null}\r\n\t\t\t\t\t\t\t\tonChange={formik.handleChange}\r\n\t\t\t\t\t\t\t\tvalue={formik.values.quantity}\r\n\t\t\t\t\t\t\t\tInputProps={{ inputProps: { min: 1 } }}></TextField>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button onClick={() => setPenaltyModalOpen(false)}>Abort</Button>\r\n\t\t\t\t\t\t<Button color=\"primary\" type=\"submit\">\r\n\t\t\t\t\t\t\tBesttigen\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t</form>\r\n\t\t\t</DialogContent>\r\n\t\t</Dialog>\r\n\t);\r\n};\r\n\r\nconst ExistingCurrentGame = ({ game }: { game: Game }) => {\r\n\tconst notParticipating = useSelector<AppState>((state) =>\r\n\t\tstate.users.ids\r\n\t\t\t.filter((u) => game.users.findIndex((p) => p === u) < 0)\r\n\t\t\t.map((u) => state.users.entities[u])\r\n\t\t\t.filter((u) => u != null && u.deleted !== true)\r\n\t) as User[];\r\n\tconst players = useSelector<AppState>(gameSelectors.players(game.id)) as User[];\r\n\tconst penalties = useSelector<AppState>(gameSelectors.penalties(game.id)) as Penalty[];\r\n\tconst autoFeeTypes = useSelector<AppState>((state) =>\r\n\t\tfeeTypesAdapter\r\n\t\t\t.getSelectors()\r\n\t\t\t.selectAll(state.feeTypes)\r\n\t\t\t.filter((ft) => ft.applicationStrategy === FeeTypeApplicationStrategy.AutoAll)\r\n\t) as FeeType[];\r\n\tconst transactionCount = useSelector<AppState>((state) =>\r\n\t\ttransactionsAdapter.getSelectors().selectTotal(state.transactions)\r\n\t) as number;\r\n\r\n\tconst [penaltyModalOpen, setPenaltyModalOpen] = useState(false);\r\n\tconst [penaltyModalPlayer, setPenaltyModalPlayer] = useState((null as unknown) as User);\r\n\r\n\tconst openAddPenalty = (player: User) => {\r\n\t\tsetPenaltyModalPlayer(player);\r\n\t\tsetPenaltyModalOpen(true);\r\n\t};\r\n\tconst dispatch = useDispatch<AppDispatch>();\r\n\tconst finishGame = (withAutoPenalties: boolean) => {\r\n\t\tif (penalties.length === 0 && autoFeeTypes.length === 0) {\r\n\t\t\tdispatch(gamesSlice.actions.abortGame());\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdispatch(gamesSlice.actions.finishGame());\r\n\t\tfor (const player of players) {\r\n\t\t\tconst userPenalties = [...penalties.filter((pen) => pen.userId === player.id)];\r\n\t\t\tif (withAutoPenalties) {\r\n\t\t\t\tconst autoPenalties = autoFeeTypes.map((autoFee) => ({\r\n\t\t\t\t\tid: v4(),\r\n\t\t\t\t\tcreatedOn: Date.now(),\r\n\t\t\t\t\tfeeTypeId: autoFee.id,\r\n\t\t\t\t\tgameId: game.id,\r\n\t\t\t\t\tuserId: player.id,\r\n\t\t\t\t\tvalue: autoFee.value ?? 0,\r\n\t\t\t\t}));\r\n\t\t\t\tdispatch(penaltiesSlice.actions.createMultiple(autoPenalties));\r\n\t\t\t\tuserPenalties.push(...autoPenalties);\r\n\t\t\t}\r\n\t\t\tconst value = userPenalties.reduce((agg, next) => agg + next.value, 0);\r\n\t\t\tif (userPenalties.length === 0 || value === 0) continue;\r\n\t\t\tconst transactionId = v4();\r\n\t\t\tdispatch(\r\n\t\t\t\ttransactionsSlice.actions.create({\r\n\t\t\t\t\taffectsGlobalLedger: false,\r\n\t\t\t\t\taffectsUserLedger: true,\r\n\t\t\t\t\tcreatedOn: Date.now(),\r\n\t\t\t\t\tdescription: \"Penalties from \" + game.name,\r\n\t\t\t\t\tid: transactionId,\r\n\t\t\t\t\tname: \"TRANS-\" + (transactionCount + 1).toString().padStart(4, \"0\"),\r\n\t\t\t\t\tuserId: player.id,\r\n\t\t\t\t\tvalue: -value,\r\n\t\t\t\t\tpenalties: userPenalties.map((up) => up.id),\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t<h1>{game.name}</h1>\r\n\t\t\t\t<ConfirmationDialog\r\n\t\t\t\t\ttitle=\"Spiel abbrechen\"\r\n\t\t\t\t\tmessage=\"Spiel wirklich abbrechen? Alle bisher verteilten Strafen werden gelscht.\"\r\n\t\t\t\t\tonConfirm={() => {\r\n\t\t\t\t\t\tdispatch(gamesSlice.actions.abortGame());\r\n\t\t\t\t\t\tdispatch(penaltiesSlice.actions.deleteMultiple(penalties.map((p) => p.id)));\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tcomponent={<Button variant=\"text\">Abbrechen</Button>}></ConfirmationDialog>\r\n\t\t\t\t<ConfirmationDialog\r\n\t\t\t\t\ttitle=\"Spiel Abschlieen\"\r\n\t\t\t\t\tmessage=\"Spiel wirklich abschlieen? Alle bisher verteilten Strafen werden den Kontostnden der Spieler angerechnet.\"\r\n\t\t\t\t\tcustom={[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"Abbrechen\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"Abschlieen (keine Standard-Strafen)\",\r\n\t\t\t\t\t\t\thandle: () => {\r\n\t\t\t\t\t\t\t\tfinishGame(false);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"Abschlieen (Standard-Strafen)\",\r\n\t\t\t\t\t\t\thandle: () => {\r\n\t\t\t\t\t\t\t\tfinishGame(true);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]}\r\n\t\t\t\t\tcomponent={\r\n\t\t\t\t\t\t<Button variant=\"outlined\" style={{ color: \"red\", borderColor: \"red\" }}>\r\n\t\t\t\t\t\t\tSpiel Speichern\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t}></ConfirmationDialog>\r\n\t\t\t</div>\r\n\t\t\t<div style={{ margin: \"0em 1em 1em\", alignItems: \"center\" }}>\r\n\t\t\t\t{notParticipating.length > 0 ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<h4 style={{ marginBottom: \".5em\" }}>Spieler hinzufgen</h4>\r\n\t\t\t\t\t\t<div style={{ display: \"flex\", columnGap: \"1em\" }}>\r\n\t\t\t\t\t\t\t{notParticipating.map((u) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\t\t\t\tkey={u.id}\r\n\t\t\t\t\t\t\t\t\t\ttitle={u.fullName}\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: u.color }}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tdispatch(gamesSlice.actions.addPlayerToOpenGame({ userId: u.id }));\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t{u.abbreviation}\r\n\t\t\t\t\t\t\t\t\t</Avatar>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : null}\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tdisplay: \"grid\",\r\n\t\t\t\t\t\tgridTemplateColumns: \"repeat(auto-fit, minmax(300px, 1fr))\",\r\n\t\t\t\t\t\tgap: \"2em\",\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{players.map((p) => (\r\n\t\t\t\t\t\t<PlayerCard game={game} player={p} key={p.id} openAddPenalty={openAddPenalty} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<AddPenaltyDialog\r\n\t\t\t\tpenaltyModalOpen={penaltyModalOpen}\r\n\t\t\t\tpenaltyModalPlayer={penaltyModalPlayer}\r\n\t\t\t\tsetPenaltyModalOpen={setPenaltyModalOpen}\r\n\t\t\t\tgame={game}></AddPenaltyDialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst CurrentGameForm = () => {\r\n\tconst activeGame = useSelector<AppState>(gameSelectors.openGame) as Game;\r\n\treturn (\r\n\t\t<div className=\"zsku-panel\">\r\n\t\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t\t{activeGame == null ? <NoCurrentGame /> : <ExistingCurrentGame game={activeGame} />}\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\ntype ClosedGameRouterParams = {\r\n\tgameId: string;\r\n};\r\nconst ClosedGameForm = withRouter((router: RouteComponentProps<ClosedGameRouterParams>) => {\r\n\tconst game = useSelector<AppState>((state) => gameSelectors.gameById(state, router.match.params.gameId)) as Game;\r\n\tconst penalties = useSelector<AppState>(gameSelectors.penalties(game?.id)) as Penalty[];\r\n\tconst feeTypes = useSelector<AppState>((state) =>\r\n\t\tfeeTypesAdapter.getSelectors().selectEntities(state.feeTypes)\r\n\t) as Dictionary<FeeType>;\r\n\tconst players = useSelector<AppState>((state) => game?.users.map((id) => state.users.entities[id])) as User[];\r\n\treturn (\r\n\t\t<div className=\"zsku-panel\">\r\n\t\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t<h1>{game?.name ?? \"Spiel nicht gefunden\"}</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"zsku-keyValueGrid\">\r\n\t\t\t\t\t<h4>Gespielt am</h4>\r\n\t\t\t\t\t<p>{new Date(game?.createdOn).toLocaleDateString(\"de-DE\")}</p>\r\n\r\n\t\t\t\t\t<h4>Strafen</h4>\r\n\t\t\t\t\t<p>{penalties.length}</p>\r\n\r\n\t\t\t\t\t<h4>Gesamtbetrag</h4>\r\n\t\t\t\t\t<Currency\r\n\t\t\t\t\t\tval={penalties.reduce((agg, next) => agg + next.value, 0)}\r\n\t\t\t\t\t\tstyle={{ margin: 0 }}></Currency>\r\n\t\t\t\t\t<h4>Durchschnitt</h4>\r\n\t\t\t\t\t<Currency\r\n\t\t\t\t\t\tval={penalties.reduce((agg, next) => agg + next.value, 0) / players.length}\r\n\t\t\t\t\t\tstyle={{ margin: 0 }}></Currency>\r\n\t\t\t\t</div>\r\n\t\t\t\t{players?.length > 0 ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<h3>Mitspieler</h3>\r\n\t\t\t\t\t\t<GenericTable<User>\r\n\t\t\t\t\t\t\tcolumns={[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tid: \"col_name\",\r\n\t\t\t\t\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\t\t\t\t\tdata: (row) => <Link to={\"/zsku-mgmt/users/\" + row.id}>{row.fullName}</Link>,\r\n\t\t\t\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\t\t\t\tsort: (a, b) => a.fullName.localeCompare(b.fullName),\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tid: \"col_penaltycount\",\r\n\t\t\t\t\t\t\t\t\tname: \"Strafen\",\r\n\t\t\t\t\t\t\t\t\tdata: (r) => (\r\n\t\t\t\t\t\t\t\t\t\t<p style={{ margin: 0 }}>{penalties.filter((p) => p.userId === r.id).length}</p>\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\t\t\t\tsort: (a, b) => {\r\n\t\t\t\t\t\t\t\t\t\tconst aCount = penalties.filter((p) => p.userId === a.id).length;\r\n\t\t\t\t\t\t\t\t\t\tconst bCount = penalties.filter((p) => p.userId === b.id).length;\r\n\t\t\t\t\t\t\t\t\t\treturn aCount - bCount;\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tid: \"col_penaltysum\",\r\n\t\t\t\t\t\t\t\t\tname: \"Gesamtbetrag\",\r\n\t\t\t\t\t\t\t\t\tdata: (r) => (\r\n\t\t\t\t\t\t\t\t\t\t<Currency\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ margin: 0 }}\r\n\t\t\t\t\t\t\t\t\t\t\tval={penalties\r\n\t\t\t\t\t\t\t\t\t\t\t\t.filter((p) => p.userId === r.id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.reduce((agg, next) => agg + next.value, 0)}></Currency>\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\t\t\t\tsort: (a, b) => {\r\n\t\t\t\t\t\t\t\t\t\tconst aSum = penalties\r\n\t\t\t\t\t\t\t\t\t\t\t.filter((p) => p.userId === a.id)\r\n\t\t\t\t\t\t\t\t\t\t\t.reduce((agg, next) => agg + next.value, 0);\r\n\t\t\t\t\t\t\t\t\t\tconst bSum = penalties\r\n\t\t\t\t\t\t\t\t\t\t\t.filter((p) => p.userId === b.id)\r\n\t\t\t\t\t\t\t\t\t\t\t.reduce((agg, next) => agg + next.value, 0);\r\n\t\t\t\t\t\t\t\t\t\treturn aSum - bSum;\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tid: \"col_penaltyfav\",\r\n\t\t\t\t\t\t\t\t\tname: \"Am hufigsten\",\r\n\t\t\t\t\t\t\t\t\tdata: (r) => (\r\n\t\t\t\t\t\t\t\t\t\t<p style={{ margin: 0 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst userPenalties = penalties.filter((p) => p.userId === r.id);\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (userPenalties.length === 0) return \"Keine Strafe\";\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst [feeTypeId] =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaxBy(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tentries(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcountBy(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpenalties.filter((p) => p.userId === r.id),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(p) => p.feeTypeId\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(entry) => last(entry)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) ?? [];\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (feeTypeId == null) return \"N/A\";\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst feeType = feeTypes[feeTypeId];\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (feeType == null) return \"N/A\";\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfeeType.label +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t` (${formatCurrency(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserPenalties\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.filter((p) => p.feeTypeId === feeType.id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.reduce((agg, next) => agg + next.value, 0)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)})`\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})()}\r\n\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\t\t\t\torderable: false,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\trows={players ?? []}\r\n\t\t\t\t\t\t\tentriesPerPage={players?.length ?? 0}></GenericTable>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : null}\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nconst ClosedGamesList = () => {\r\n\tconst closedGames = (useSelector<AppState>(gameSelectors.closedGames) as Game[]).sort(\r\n\t\t(a, b) => b.createdOn - a.createdOn\r\n\t);\r\n\tconst penalties = useSelector<AppState>((state) =>\r\n\t\tpenaltiesAdapter.getSelectors().selectAll(state.penalties)\r\n\t) as Penalty[];\r\n\tconst users = useSelector<AppState>((state) =>\r\n\t\tusersAdapter.getSelectors().selectEntities(state.users)\r\n\t) as Dictionary<User>;\r\n\treturn (\r\n\t\t<div className=\"zsku-panel\">\r\n\t\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t<h1>Beendete Spiele</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<GenericTable<Game>\r\n\t\t\t\t\t\tcolumns={[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: \"col_name\",\r\n\t\t\t\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\t\t\t\tdata: (r) => <Link to={\"/zsku-mgmt/games/\" + r.id}>{r.name}</Link>,\r\n\t\t\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\t\t\tsort: (a, b) => a.name.localeCompare(b.name),\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: \"col_users\",\r\n\t\t\t\t\t\t\t\tname: \"Mitspieler\",\r\n\t\t\t\t\t\t\t\tdata: (r) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<div style={{ display: \"flex\", flexWrap: \"wrap\", gap: \"10px\" }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{(r.users.map((u) => users[u]).filter(Boolean) as User[])\r\n\t\t\t\t\t\t\t\t\t\t\t\t.sort((a, b) => a.abbreviation.localeCompare(b.abbreviation, \"de-DE\"))\r\n\t\t\t\t\t\t\t\t\t\t\t\t.map((u) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link to={\"users/\" + (u?.id ?? \"0\")} key={v4()}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={v4()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontWeight: \"normal\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: u.color,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{u.abbreviation}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Avatar>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: \"col_totalpenalties\",\r\n\t\t\t\t\t\t\t\tname: \"Strafen (Anzahl)\",\r\n\t\t\t\t\t\t\t\tdata: (r) => penalties.filter((p) => p.gameId === r.id).length.toString(),\r\n\t\t\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\t\t\tsort: (a, b) => {\r\n\t\t\t\t\t\t\t\t\tconst aCount = penalties.filter((p) => p.gameId === a.id).length;\r\n\t\t\t\t\t\t\t\t\tconst bCount = penalties.filter((p) => p.gameId === b.id).length;\r\n\t\t\t\t\t\t\t\t\treturn aCount - bCount;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: \"col_sumpenalties\",\r\n\t\t\t\t\t\t\t\tname: \"Strafen (Summe)\",\r\n\t\t\t\t\t\t\t\tdata: (r) =>\r\n\t\t\t\t\t\t\t\t\tformatCurrency(\r\n\t\t\t\t\t\t\t\t\t\tpenalties.filter((p) => p.gameId === r.id).reduce((agg, p) => agg + p.value, 0)\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\t\t\tsort: (a, b) => {\r\n\t\t\t\t\t\t\t\t\tconst aSum = penalties\r\n\t\t\t\t\t\t\t\t\t\t.filter((p) => p.gameId === a.id)\r\n\t\t\t\t\t\t\t\t\t\t.reduce((agg, p) => agg + p.value, 0);\r\n\t\t\t\t\t\t\t\t\tconst bSum = penalties\r\n\t\t\t\t\t\t\t\t\t\t.filter((p) => p.gameId === b.id)\r\n\t\t\t\t\t\t\t\t\t\t.reduce((agg, p) => agg + p.value, 0);\r\n\t\t\t\t\t\t\t\t\treturn aSum - bSum;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: \"col_date\",\r\n\t\t\t\t\t\t\t\tname: \"Gespielt am\",\r\n\t\t\t\t\t\t\t\tdata: (r) => new Date(r.createdOn).toLocaleDateString(\"de-DE\"),\r\n\t\t\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\t\t\tsort: (a, b) => a.createdOn - b.createdOn,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\trows={closedGames}\r\n\t\t\t\t\t\tentriesPerPage={10}></GenericTable>\r\n\t\t\t\t</div>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst Games = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<CurrentGameForm />\r\n\t\t\t<ClosedGamesList />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport { ClosedGameForm, GroupedPenalties };\r\nexport default Games;\r\n","import {\r\n\tAvatar,\r\n\tButton,\r\n\tChip,\r\n\tFormControl,\r\n\tMenuItem,\r\n\tOutlinedInput,\r\n\tPaper,\r\n\tSelect,\r\n\tTextField\r\n} from \"@material-ui/core\";\r\nimport { EntityState } from \"@reduxjs/toolkit\";\r\nimport { useFormik } from \"formik\";\r\nimport React from \"react\";\r\nimport { FaMoneyBillWave, FaUser } from \"react-icons/fa\";\r\nimport { ImFloppyDisk } from \"react-icons/im\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, RouteComponentProps, useHistory, withRouter } from \"react-router-dom\";\r\nimport { v4 } from \"uuid\";\r\nimport * as yup from \"yup\";\r\nimport { Penalty, Role, Transaction, User } from \"../../entities/entities\";\r\nimport { penaltiesAdapter } from \"../../redux/reducers/penalties\";\r\nimport { usersAdapter, usersSlice } from \"../../redux/reducers/users\";\r\nimport { AppDispatch, AppState } from \"../../redux/store\";\r\nimport { Balance, Currency } from \"../common/currency\";\r\nimport { GroupedPenalties } from \"../games/games\";\r\nimport { TransactionTable } from \"../ledgers/transactionsTable\";\r\ninterface RouterProps {\r\n\tuserId: string;\r\n}\r\n\r\ninterface UserFormValues {\r\n\tfullName: string;\r\n\tcolor: string;\r\n\troles: string[];\r\n}\r\n\r\nconst UserForm = withRouter((router: RouteComponentProps<RouterProps>) => {\r\n\tconst user = useSelector<AppState>((state) =>\r\n\t\tusersAdapter.getSelectors<AppState>((state) => state.users).selectById(state, router.match.params.userId)\r\n\t) as User;\r\n\tconst roles = useSelector<AppState>((state) => state.roles) as EntityState<Role>;\r\n\tconst transactions = useSelector<AppState>((state) =>\r\n\t\tstate.transactions.ids\r\n\t\t\t.map((tid) => state.transactions.entities[tid])\r\n\t\t\t.filter((t) => user != null && t?.userId === user.id)\r\n\t) as Transaction[];\r\n\tconst userPenalties = useSelector<AppState>(\r\n\t\t(state) =>\r\n\t\t\tuser != null &&\r\n\t\t\tpenaltiesAdapter\r\n\t\t\t\t.getSelectors()\r\n\t\t\t\t.selectAll(state.penalties)\r\n\t\t\t\t.filter((p) => p.userId === user.id)\r\n\t) as Penalty[];\r\n\tconst dispatch = useDispatch<AppDispatch>();\r\n\tconst history = useHistory();\r\n\tconst validationSchema = yup.object({\r\n\t\tfullName: yup.string().required(\"Der Nutzername ist erforderlich\"),\r\n\t\tcolor: yup\r\n\t\t\t.string()\r\n\t\t\t.matches(\r\n\t\t\t\t/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,\r\n\t\t\t\t\"Bitte die Farbe als gltigen Hexcode eingeben\"\r\n\t\t\t),\r\n\t});\r\n\tconst formik = useFormik<UserFormValues>({\r\n\t\tinitialValues: {\r\n\t\t\tfullName: user?.fullName ?? \"\",\r\n\t\t\tcolor: user?.color ?? \"\",\r\n\t\t\troles: user?.roles ?? [],\r\n\t\t},\r\n\t\tvalidationSchema,\r\n\t\tonSubmit: (values) => {\r\n\t\t\tconst isCreate = router.match.params.userId === \"new\";\r\n\t\t\tif (isCreate) {\r\n\t\t\t\tconst newUserId = v4();\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tusersSlice.actions.create({\r\n\t\t\t\t\t\tfullName: values.fullName,\r\n\t\t\t\t\t\tcolor: values.color,\r\n\t\t\t\t\t\tabbreviation:\r\n\t\t\t\t\t\t\tvalues.fullName == null || values.fullName === \"\"\r\n\t\t\t\t\t\t\t\t? \"\"\r\n\t\t\t\t\t\t\t\t: values.fullName\r\n\t\t\t\t\t\t\t\t\t\t.split(\" \")\r\n\t\t\t\t\t\t\t\t\t\t.filter((s) => s.length > 0)\r\n\t\t\t\t\t\t\t\t\t\t.map((s) => s[0])\r\n\t\t\t\t\t\t\t\t\t\t.join(\"\"),\r\n\t\t\t\t\t\tid: newUserId,\r\n\t\t\t\t\t\tcreatedOn: Date.now(),\r\n\t\t\t\t\t\troles: values.roles\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\thistory.push({ pathname: \"/zsku-mgmt/users/\" + newUserId });\r\n\t\t\t} else {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tusersSlice.actions.update({\r\n\t\t\t\t\t\tid: router.match.params.userId,\r\n\t\t\t\t\t\tchanges: {\r\n\t\t\t\t\t\t\tfullName: values.fullName,\r\n\t\t\t\t\t\t\tcolor: values.color,\r\n\t\t\t\t\t\t\tabbreviation:\r\n\t\t\t\t\t\t\t\tvalues.fullName == null || values.fullName === \"\"\r\n\t\t\t\t\t\t\t\t\t? \"\"\r\n\t\t\t\t\t\t\t\t\t: values.fullName\r\n\t\t\t\t\t\t\t\t\t\t\t.split(\" \")\r\n\t\t\t\t\t\t\t\t\t\t\t.filter((s) => s.length > 0)\r\n\t\t\t\t\t\t\t\t\t\t\t.map((s) => s[0])\r\n\t\t\t\t\t\t\t\t\t\t\t.join(\"\"),\r\n\t\t\t\t\t\t\troles: values.roles ?? []\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t});\r\n\tconst getAbbreviation = (name: string) => {\r\n\t\treturn name\r\n\t\t\t.split(\" \")\r\n\t\t\t.filter((s) => s.length > 0)\r\n\t\t\t.map((s) => s[0])\r\n\t\t\t.join(\"\");\r\n\t};\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"zsku-panel\">\r\n\t\t\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t\t<h1>{user?.fullName ?? \"Neues Mitglied\"}</h1>\r\n\t\t\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t\t\t<FaUser size=\"4em\" style={{ backgroundColor: \"#7DCE82\" }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<form onSubmit={formik.handleSubmit}>\r\n\t\t\t\t\t\t<div className=\"zsku-keyValueGrid\">\r\n\t\t\t\t\t\t\t<h4>Name</h4>\r\n\t\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\terror={formik.touched.fullName && Boolean(formik.errors.fullName)}\r\n\t\t\t\t\t\t\t\t\thelperText={formik.touched.fullName && formik.errors.fullName}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tname=\"fullName\"\r\n\t\t\t\t\t\t\t\t\tid=\"fullName\"\r\n\t\t\t\t\t\t\t\t\tvalue={formik.values.fullName}\r\n\t\t\t\t\t\t\t\t\tonChange={formik.handleChange}></TextField>\r\n\t\t\t\t\t\t\t</FormControl>\r\n\r\n\t\t\t\t\t\t\t{user != null ? (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<h4>Abkrzung</h4>\r\n\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"abbreviation\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"abbreviation\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\t\t\t\tformik.values.fullName == null || formik.values.fullName === \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: getAbbreviation(formik.values.fullName)\r\n\t\t\t\t\t\t\t\t\t\t}></TextField>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t<h4>Farbe</h4>\r\n\t\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t\t<OutlinedInput\r\n\t\t\t\t\t\t\t\t\terror={formik.touched.color && Boolean(formik.errors.color)}\r\n\t\t\t\t\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t\t\t\t\t<Avatar style={{ backgroundColor: formik.values.color }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{getAbbreviation(formik.values.fullName)}\r\n\t\t\t\t\t\t\t\t\t\t</Avatar>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t// helperText={formik.touched.color && formik.errors.color}\r\n\t\t\t\t\t\t\t\t\tname=\"color\"\r\n\t\t\t\t\t\t\t\t\tid=\"color\"\r\n\t\t\t\t\t\t\t\t\tvalue={formik.values.color}\r\n\t\t\t\t\t\t\t\t\tonChange={formik.handleChange}></OutlinedInput>\r\n\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t{user != null ? (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<h4>Erstellt am</h4>\r\n\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"createdOn\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"createdOn\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\tvalue={new Date(user.createdOn).toLocaleDateString(\"de-DE\")}></TextField>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t\t\t<h4>Posten</h4>\r\n\t\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\t\t\tvalue={formik.values.roles}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => formik.setFieldValue(\"roles\", e.target.value)}\r\n\t\t\t\t\t\t\t\t\t// input={<Input id=\"select-multiple-chip\" />}\r\n\t\t\t\t\t\t\t\t\trenderValue={(selected) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{(selected as string[]).map((value) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Chip\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonMouseDown={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={value}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={roles.entities[value]?.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ margin: \"5px 10px 0 0\" }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonDelete={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformik.setFieldValue(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"roles\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformik.values.roles.filter((sr) => sr !== value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tMenuProps={{\r\n\t\t\t\t\t\t\t\t\t\tPaperProps: {\r\n\t\t\t\t\t\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\t\t\t\t\t\tmaxHeight: \"30vh\",\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{roles.ids.map((rId) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={rId} value={rId}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{roles.entities[rId]?.name ?? \"Unknown\"}\r\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t<div className=\"gridSpacer\"></div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<FormControl style={{ float: \"right\" }}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"formSubmit\"\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\tstartIcon={<ImFloppyDisk size=\".75em\" />}>\r\n\t\t\t\t\t\t\t\t\t\tSpeichern\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</Paper>\r\n\t\t\t</div>\r\n\t\t\t{router.match.params.userId === \"new\" ? null : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className=\"zsku-panel\">\r\n\t\t\t\t\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t\t\t\t<h1>Strafen</h1>\r\n\t\t\t\t\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t\t\t\t\t<FaMoneyBillWave size=\"4em\" style={{ backgroundColor: \"#7DCe82\" }} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"zsku-keyValueGrid\">\r\n\t\t\t\t\t\t\t\t<h4>Gesamt</h4>\r\n\t\t\t\t\t\t\t\t<Currency\r\n\t\t\t\t\t\t\t\t\tval={(userPenalties ?? []).reduce((agg, next) => {\r\n\t\t\t\t\t\t\t\t\t\treturn agg + (next.value ?? 0);\r\n\t\t\t\t\t\t\t\t\t}, 0)}></Currency>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<GroupedPenalties penalties={userPenalties ?? []}></GroupedPenalties>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"zsku-panel\">\r\n\t\t\t\t\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t\t\t\t<h1>Transaktionen</h1>\r\n\t\t\t\t\t\t\t\t<Link to={\"/zsku-mgmt/transactions/new/\" + router.match.params.userId}>\r\n\t\t\t\t\t\t\t\t\t<Button variant=\"text\" color=\"primary\">\r\n\t\t\t\t\t\t\t\t\t\tHinzufgen\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t\t\t\t\t<FaMoneyBillWave size=\"4em\" style={{ backgroundColor: \"#7DCe82\" }} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"zsku-keyValueGrid\">\r\n\t\t\t\t\t\t\t\t<h4>Kassenbestand</h4>\r\n\t\t\t\t\t\t\t\t<Balance\r\n\t\t\t\t\t\t\t\t\tval={transactions.reduce((agg, next) => {\r\n\t\t\t\t\t\t\t\t\t\treturn agg + (next.value ?? 0);\r\n\t\t\t\t\t\t\t\t\t}, 0)}></Balance>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<TransactionTable transactions={transactions}></TransactionTable>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default UserForm;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { GiBowlingStrike, GiMoneyStack, GiCog } from \"react-icons/gi\";\r\nexport type SidebarLinkParameters = {\r\n\troute: string;\r\n\tlabel: string;\r\n};\r\nexport function SidebarLinks() {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<ul>\r\n\t\t\t\t<Link to={\"/zsku-mgmt/games\"}>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<GiBowlingStrike size=\"1.75em\" />\r\n\t\t\t\t\t\t<h4>Spiele</h4>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Link to={\"/zsku-mgmt/ledgers\"}>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<GiMoneyStack size=\"1.75em\" />\r\n\t\t\t\t\t\t<h4>Kasse</h4>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Link to={\"/zsku-mgmt/settings\"}>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<GiCog size=\"1.75em\" />\r\n\t\t\t\t\t\t<h4>Einstellungen</h4>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</Link>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { Avatar } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { connect, useSelector } from \"react-redux\";\r\nimport { Role, User } from \"../entities/entities\";\r\nimport { AppState } from \"../redux/store\";\r\nfunction SidebarUserLogo({ abbreviation, color }: { abbreviation: string; color: string }) {\r\n\treturn (\r\n\t\t<Avatar style={{ backgroundColor: color }}>{abbreviation}</Avatar>\r\n\t);\r\n}\r\n\r\nconst SidebarUser = ({ user }: { user: User }) => {\r\n\tconst userRoles = useSelector<AppState>((state) =>\r\n\t\tuser?.roles.map(r => state.roles.entities[r])\r\n\t) as Role[] ?? [];\r\n\tif (user == null)\r\n\t\treturn (\r\n\t\t\t<div className=\"sidebarUser\">\r\n\t\t\t\t<p>Loading ...</p>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\treturn (\r\n\t\t<div className=\"sidebarUser\">\r\n\t\t\t<SidebarUserLogo color={user?.color} abbreviation={user?.abbreviation} />\r\n\t\t\t<div className=\"sidebarUserInfo\">\r\n\t\t\t\t<h1>{user?.fullName}</h1>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t{userRoles\r\n\t\t\t\t\t\t.slice(0, 3)\r\n\t\t\t\t\t\t.map((r) => r.name)\r\n\t\t\t\t\t\t.join(\", \")}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default connect()(SidebarUser);\r\n","import { IconButton } from \"@material-ui/core\";\r\nimport React, { useState } from \"react\";\r\nimport { BsChevronDoubleLeft, BsChevronDoubleRight } from \"react-icons/bs\";\r\nimport { User } from \"../entities/entities\";\r\nimport { SidebarLinks } from \"./links\";\r\nimport SidebarUser from \"./user\";\r\n\r\nexport const Sidebar = ({ user }: { user: User }) => {\r\n\tconst [minimized, setMinimized] = useState(false);\r\n\treturn (\r\n\t\t<aside className={\"sidebar\" + (minimized ? \" minimized\" : \"\")}>\r\n\t\t\t<SidebarUser user={user}></SidebarUser>\r\n\t\t\t<SidebarLinks />\r\n\t\t\t<IconButton\r\n\t\t\t\tclassName=\"minimize\"\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tsetMinimized(!minimized);\r\n\t\t\t\t}}>\r\n\t\t\t\t{minimized ? (\r\n\t\t\t\t\t<BsChevronDoubleRight></BsChevronDoubleRight>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<BsChevronDoubleLeft></BsChevronDoubleLeft>\r\n\t\t\t\t)}\r\n\t\t\t</IconButton>\r\n\t\t</aside>\r\n\t);\r\n};\r\n","import React from \"react\";\r\nimport { connect, useSelector } from \"react-redux\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport \"./css/App.scss\";\r\nimport { User } from \"./entities/entities\";\r\nimport { Landing } from \"./main/landing/landing\";\r\nimport Ledgers from \"./main/ledgers/ledgers\";\r\nimport TransactionForm from \"./main/ledgers/transactionForm\";\r\nimport Settings from \"./main/settings/settings\";\r\nimport Games, { ClosedGameForm } from \"./main/games/games\";\r\nimport UserForm from \"./main/users/userForm\";\r\nimport { usersAdapter } from \"./redux/reducers/users\";\r\nimport { AppState } from \"./redux/store\";\r\nimport { Sidebar } from \"./sidebar/sidebar\";\r\nimport _ from \"lodash\";\r\n\r\nconst Main = () => {\r\n\tconst user = useSelector<AppState>((state) => _.first(usersAdapter.getSelectors().selectAll(state.users))) as User;\r\n\treturn (\r\n\t\t<Router>\r\n\t\t\t<div className=\"mainContainer\">\r\n\t\t\t\t<div className=\"sidebarContainer\">\r\n\t\t\t\t\t<Sidebar user={user} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"contentContainer\">\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route path=\"/zsku-mgmt/users/:userId\" component={UserForm}></Route>\r\n\t\t\t\t\t\t<Route path=\"/zsku-mgmt/transactions/:transactionId/:userId?\" component={TransactionForm}></Route>\r\n\t\t\t\t\t\t<Route path=\"/zsku-mgmt/ledgers\" component={Ledgers}></Route>\r\n\t\t\t\t\t\t<Route path=\"/zsku-mgmt/settings\" component={Settings} />\r\n\t\t\t\t\t\t<Route path=\"/zsku-mgmt/games/:gameId\" exact={true} component={ClosedGameForm} />\r\n\t\t\t\t\t\t<Route path=\"/zsku-mgmt/games\" exact={true} component={Games} />\r\n\t\t\t\t\t\t<Route path=\"/zsku-mgmt\" strict={true}>\r\n\t\t\t\t\t\t\t<Landing user={user} />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Router>\r\n\t);\r\n};\r\n\r\nfunction App() {\r\n\tconst loading = useSelector<AppState>((state) => state.loading) as boolean;\r\n\treturn <div className=\"App\">{loading ? <div></div> : <Main></Main>}</div>;\r\n}\r\n\r\nexport default connect()(App);\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./css/index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { Provider } from \"react-redux\";\nimport { store } from \"./redux/store\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<Provider store={store}>\n\t\t\t<App />\n\t\t</Provider>\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}