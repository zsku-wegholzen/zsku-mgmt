{"version":3,"sources":["assets/logo.svg","main/landing/landing.tsx","redux/Database.ts","redux/reducers/transactions.ts","main/common/colors.ts","redux/reducers/users.ts","main/common/currency.tsx","entities/entities.ts","main/common/genericTable.tsx","main/ledgers/transactionsTable.tsx","main/ledgers/ledgers.tsx","redux/reducers/feeTypes.ts","main/common/currencyField.tsx","main/ledgers/transactionForm.tsx","main/settings/FeeTypes/feeTypesEditForm.tsx","redux/reducers/penalties.ts","redux/reducers/games.ts","redux/reducers/roles.ts","redux/store.ts","main/settings/FeeTypes/feeTypesCreateForm.tsx","main/common/confirmationDialog.tsx","main/settings/FeeTypes/feeTypesTable.tsx","main/settings/FeeTypes/feeTypes.tsx","main/settings/Roles/rolesCreateForm.tsx","main/settings/Roles/rolesEditForm.tsx","main/settings/Roles/rolesTable.tsx","main/settings/Roles/roles.tsx","main/settings/Users/usersTable.tsx","main/settings/Users/users.tsx","main/settings/settings.tsx","main/games/games.tsx","main/users/userForm.tsx","sidebar/links.tsx","sidebar/user.tsx","sidebar/sidebar.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","_ref","svgRef","title","props","width","height","viewBox","ref","undefined","transform","style","strokeWidth","d","fill","stroke","ForwardRef","forwardRef","Landing","className","user","fullName","db","feeTypes","penalties","roles","users","transactions","games","version","stores","table","Dexie","transactionsAdapter","createEntityAdapter","transactionsSlice","createSlice","initialState","getInitialState","name","reducers","create","state","action","ids","push","payload","id","entities","put","delete","filter","set","map","ft","clear","then","bulkPut","update","_","merge","changes","colors","usersAdapter","usersSlice","color","ldsh","sample","deleted","formatCurrency","val","toFixed","FeeTypeApplicationStrategy","Currency","Balance","inverted","display","alignItems","gap","float","size","GenericTable","currentPage","order","pageBounds","bind","pageNumber","rowCount","lowerBound","entriesPerPage","upperBound","Math","min","rows","columns","sortedRows","entries","sort","a","b","priority","forEach","column","find","c","Error","direction","valA","data","valB","comparisonResult","cols","selectable","addSelected","removeSelected","row","Checkbox","onChange","evt","checked","orderable","align","headerCells","col","arr","TableCell","v4","sortDirection","TableSortLabel","active","onClick","shiftKey","Date","now","setState","tableRows","sortByOrderObject","slice","TableRow","cells","actions","padding","IconButton","handle","icon","TableContainer","component","Paper","elevation","Table","TableHead","TableBody","TableFooter","TablePagination","count","rowsPerPage","rowsPerPageOptions","page","onChangePage","Component","TransactionTable","useSelector","getSelectors","selectEntities","dispatch","useDispatch","r","to","localeCompare","description","substr","userId","userA","userB","value","createdOn","toLocaleDateString","BsTrashFill","Ledgers","withRouter","history","selectAll","usersArray","u","t","affectsGlobalLedger","reduce","agg","next","Button","balance","cursor","position","Avatar","backgroundColor","top","right","abbreviation","marginLeft","marginRight","bottom","e","stopPropagation","tId","affectsUserLedger","toString","padStart","feeTypesAdapter","feeTypesSlice","NumberFormatCustom","inputRef","other","getInputRef","onValueChange","values","thousandSeparator","decimalSeparator","isNumericString","fixedDecimalScale","decimalScale","allowedDecimalSeparators","allowNegative","allowLeadingZeros","prefix","CurrencyField","variant","InputProps","startAdornment","inputComponent","TransactionForm","router","useHistory","validationSchema","yup","required","notOneOf","transaction","selectById","match","params","transactionId","transactionCount","selectTotal","transactionPenalties","p","countedPenalties","penalty","feeType","feeTypeId","label","formik","useFormik","initialValues","onSubmit","setSubmitting","resetForm","newTransactionId","parseFloat","handleSubmit","FormControl","Switch","setFieldValue","disabled","error","touched","Boolean","errors","helperText","Select","itemType","renderValue","onMouseDown","MenuItem","TextField","multiline","handleChange","fullWidth","type","startIcon","FeeTypesEditForm","applicationStrategy","Target","parseInt","AllButTarget","AutoAll","editFeeType","connect","ownProps","bindActionCreators","penaltiesAdapter","penaltiesSlice","createMultiple","deleteMultiple","findIndex","del","bulkDelete","gameSelectors","openGame","gameId","usr","playerId","gamesSlice","createGame","newGame","status","finishGame","game","abortGame","g","setGames","addPlayerToOpenGame","removePlayerFromGame","rolesAdapter","rolesSlice","loadingSlice","store","configureStore","reducer","loading","toArray","dbFeeTypes","dbRoles","dbUsers","useStoreDispatch","FeeTypesCreateForm","useState","setValue","setLabel","setApplicationStrategy","ConfirmationDialog","message","onConfirm","onAbort","custom","open","setOpen","Dialog","onClose","DialogTitle","DialogContent","flexDirection","idx","DialogActions","FeeTypesTable","deleteFeeType","FeeTypes","textDecoration","path","RolesCreateForm","setName","RolesEditForm","role","editRole","RolesTable","rolesCollection","Roles","UsersTable","usersCollection","join","Users","Settings","NoCurrentGame","GroupedPenalties","editable","groupedPenalties","sum","margin","PlayerCard","player","openAddPenalty","showStats","setShowStats","Card","borderRadius","maxWidth","CardHeader","avatar","subheader","CardContent","borderTop","borderBottom","gridTemplateColumns","marginBottom","marginTop","textAlign","fontWeight","textTransform","letterSpacing","fontSize","borderRight","AddPenaltyDialog","penaltyModalOpen","setPenaltyModalOpen","penaltyModalPlayer","positive","quantity","targets","inputProps","ExistingCurrentGame","notParticipating","players","autoFeeTypes","setPenaltyModalPlayer","withAutoPenalties","userPenalties","pen","autoPenalties","autoFee","up","borderColor","columnGap","CurrentGameForm","activeGame","ClosedGameForm","maxBy","countBy","entry","last","ClosedGamesList","closedGames","flexWrap","Games","UserForm","tid","matches","newUserId","split","s","pathname","getAbbreviation","OutlinedInput","endAdornment","multiple","selected","Chip","onDelete","sr","MenuProps","PaperProps","maxHeight","rId","SidebarLinks","SidebarUserLogo","userRoles","Sidebar","minimized","setMinimized","Main","first","exact","strict","isLocalhost","window","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","ReactDOM","render","StrictMode","document","getElementById","URL","process","href","origin","addEventListener","fetch","headers","response","contentType","get","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.2d60a6cf.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"title\", null, \"ZSKU Logo\");\n\nvar SvgLogo = function SvgLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 250,\n    height: 250,\n    viewBox: \"0 0 66.146 66.146\",\n    ref: svgRef\n  }, props), title === undefined ? _ref2 : title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0 -230.85)\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"matrix(2.5493 0 0 2.5493 -32.372 -379.35)\",\n    style: {\n      strokeWidth: 0.79375\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m17.907 240.94h15.502v15.502h-15.502z\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 0.79375,\n      stroke: \"#000\"\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m17.907 256.44 15.502-15.502\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 0.79375,\n      stroke: \"#000\"\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m33.409 256.44-7.7508-7.7508v-7.7508\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 0.79375,\n      stroke: \"#000\"\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m25.658 248.69v7.7508\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 0.79375,\n      stroke: \"#000\"\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m25.658 248.69c-2.1403 0-3.8754-1.7351-3.8754-3.8754 3e-6 -2.1403 1.7351-3.8754 3.8754-3.8754s3.8754 1.7351 3.8754 3.8754\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 0.79375,\n      stroke: \"#000\"\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m25.632 248.68c2.1403 0 3.8754 1.7351 3.8754 3.8754 2e-6 2.1403-1.7351 3.8754-3.8754 3.8754s-3.8754-1.7351-3.8754-3.8754\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 0.79375,\n      stroke: \"#000\"\n    }\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m33.409 256.46c3e-6 4.2807-3.4702 7.7508-7.7508 7.7508s-7.7508-3.4702-7.7508-7.7508\",\n    style: {\n      fill: \"none\",\n      strokeWidth: 0.79375,\n      stroke: \"#000\"\n    }\n  }))));\n};\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/logo.f52357e3.svg\";\nexport { ForwardRef as ReactComponent };","import React from \"react\";\r\nimport { ReactComponent as Logo } from \"../../assets/logo.svg\";\r\nimport { User } from \"../../entities/entities\";\r\n\r\nexport const Landing = (props: { user: User }) => {\r\n\treturn (\r\n\t\t<div className=\"landingMain\">\r\n\t\t\t<div>\r\n\t\t\t\t<Logo />\r\n\t\t\t\t<h1>ZSKU Wegholzen</h1>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tWillkommen im ZSKU Management Portal, <br />\r\n\t\t\t\t\t{props.user?.fullName}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import Dexie from \"dexie\";\r\nimport { FeeType, Game, Penalty, Role, Transaction, User } from \"../entities/entities\";\r\n\r\nclass Database extends Dexie {\r\n\tfeeTypes: Dexie.Table<FeeType, string>;\r\n\tpenalties: Dexie.Table<Penalty, string>;\r\n\troles: Dexie.Table<Role, string>;\r\n\tusers: Dexie.Table<User, string>;\r\n\ttransactions: Dexie.Table<Transaction, string>;\r\n\tgames: Dexie.Table<Game, string>;\r\n\tconstructor() {\r\n\t\tsuper(\"zsku-db\");\r\n\t\tthis.version(4).stores({\r\n\t\t\tfeeTypes: \"id,createdOn,label,value,applicationStrategy,deleted\",\r\n\t\t\tpenalties: \"id,createdOn,gameId,userId,feeTypeId,value\",\r\n\t\t\troles: \"id,createdOn,name\",\r\n\t\t\tusers: \"id,createdOn,abbreviation,fullName,color,deleted\",\r\n\t\t\ttransactions: \"id,createdOn,name,description,userId,value,affectsGlobalLedger,affectsGlobalUser\",\r\n\t\t\tgames: \"id,createdOn,name,status,users\",\r\n\t\t});\r\n\t\tthis.feeTypes = this.table(\"feeTypes\");\r\n\t\tthis.penalties = this.table(\"penalties\");\r\n\t\tthis.roles = this.table(\"roles\");\r\n\t\tthis.users = this.table(\"users\");\r\n\t\tthis.transactions = this.table(\"transactions\");\r\n\t\tthis.games = this.table(\"games\");\r\n\t}\r\n}\r\nexport const db = new Database();\r\n","import { createEntityAdapter, createSlice, PayloadAction, Update } from \"@reduxjs/toolkit\";\r\nimport _ from \"lodash\";\r\nimport { Transaction } from \"../../entities/entities\";\r\nimport { db } from \"../Database\";\r\nconst transactionsAdapter = createEntityAdapter<Transaction>();\r\nconst transactionsSlice = createSlice({\r\n\tinitialState: transactionsAdapter.getInitialState(),\r\n\tname: \"transactions\",\r\n\treducers: {\r\n\t\tcreate(state, action: PayloadAction<Transaction>) {\r\n\t\t\tstate.ids.push(action.payload.id);\r\n\t\t\tstate.entities[action.payload.id] = action.payload;\r\n\t\t\tdb.transactions.put(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tdelete(state, action: PayloadAction<string>) {\r\n\t\t\tstate.ids = state.ids.filter((id) => id !== action.payload);\r\n\t\t\tdelete state.entities[action.payload];\r\n\t\t\tdb.transactions.delete(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tset(state, action: PayloadAction<Transaction[]>) {\r\n\t\t\tstate.ids = action.payload.map((ft) => ft.id);\r\n\t\t\tstate.entities = {};\r\n\t\t\tfor (const ft of action.payload) {\r\n\t\t\t\tstate.entities[ft.id] = ft;\r\n\t\t\t}\r\n\t\t\tdb.transactions.clear().then(() => {\r\n\t\t\t\tdb.transactions.bulkPut(action.payload);\r\n\t\t\t});\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tupdate(state, action: PayloadAction<Update<Transaction>>) {\r\n\t\t\tstate.entities[action.payload.id] = _.merge(state.entities[action.payload.id], action.payload.changes);\r\n\t\t\tdb.transactions.update(action.payload.id as string, action.payload.changes);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport { transactionsAdapter, transactionsSlice };\r\n","export const blue = \"#2589BD\";\r\nexport const orange = \"#FF751F\";\r\nexport const yellow = \"#F9C846\";\r\nexport const purple = \"#5b4e77\";\r\nexport const green = \"#339989\";\r\n\r\nexport const colors = [blue, orange, yellow, purple, green];","import { createEntityAdapter, createSlice, PayloadAction, Update } from \"@reduxjs/toolkit\";\r\nimport ldsh from \"lodash\";\r\nimport { User } from \"../../entities/entities\";\r\nimport { colors } from \"../../main/common/colors\";\r\nimport { db } from \"../Database\";\r\n\r\n\r\nconst usersAdapter = createEntityAdapter<User>();\r\nconst usersSlice = createSlice({\r\n\tinitialState: usersAdapter.getInitialState(),\r\n\tname: \"users\",\r\n\treducers: {\r\n\t\tcreate(state, action: PayloadAction<User>) {\r\n\t\t\tif (action.payload.color == null) {\r\n\t\t\t\taction.payload.color = ldsh.sample(colors) ?? \"#aaa\"\r\n\t\t\t}\r\n\t\t\tstate.ids.push(action.payload.id);\r\n\t\t\tstate.entities[action.payload.id] = action.payload;\r\n\t\t\tdb.users.put(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tdelete(state, action: PayloadAction<string>) {\r\n\t\t\tconst user = state.entities[action.payload];\r\n\t\t\tif (user == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tuser.deleted = true;\r\n\t\t\tdb.feeTypes.update(action.payload, { deleted: true });\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tset(state, action: PayloadAction<User[]>) {\r\n\t\t\tstate.ids = action.payload.map((ft) => ft.id);\r\n\t\t\tstate.entities = {};\r\n\t\t\tfor (const ft of action.payload) {\r\n\t\t\t\tstate.entities[ft.id] = ft;\r\n\t\t\t}\r\n\t\t\tdb.users.clear().then(() => {\r\n\t\t\t\tdb.users.bulkPut(action.payload);\r\n\t\t\t});\r\n\t\t},\r\n\t\tupdate(state, action: PayloadAction<Update<User>>) {\r\n\t\t\tstate.entities[action.payload.id] = ldsh.merge(state.entities[action.payload.id], action.payload.changes);\r\n\t\t\tdb.users.update(action.payload.id as string, action.payload.changes);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport { usersAdapter, usersSlice };\r\n","import React, { ComponentProps } from \"react\";\r\nimport { BsTriangleFill } from \"react-icons/bs\";\r\n\r\ninterface CurrencyProps extends ComponentProps<\"p\"> {\r\n\tval: number;\r\n}\r\n\r\nfunction formatCurrency(val: number) {\r\n\treturn `${(val ?? 0).toFixed(2)} `;\r\n}\r\n\r\nconst Currency = (props: CurrencyProps) => {\r\n\treturn <p style={props.style}>{formatCurrency(props.val)}</p>;\r\n};\r\n\r\nconst Balance = (props: { val: number; inverted?: boolean }) => {\r\n\tconst val = (props.inverted ? -1 : 1) * props.val;\r\n\treturn (\r\n\t\t<div className=\"balance\" style={{ display: \"flex\", alignItems: \"center\", gap: \".25em\", float: \"right\" }}>\r\n\t\t\t{(() => {\r\n\t\t\t\tif (val > 0) {\r\n\t\t\t\t\treturn <BsTriangleFill size=\"0.5em\" color=\"green\"></BsTriangleFill>;\r\n\t\t\t\t} else if (val < 0) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<BsTriangleFill\r\n\t\t\t\t\t\t\tsize=\"0.5em\"\r\n\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\tstyle={{ transform: \"rotate(0.5turn)\" }}></BsTriangleFill>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t})()}\r\n\t\t\t<Currency val={val}></Currency>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n\r\nexport { Balance, Currency, formatCurrency };\r\n\r\n","export interface Entity {\r\n\tid: string;\r\n\tcreatedOn: number;\r\n}\r\n\r\nexport interface SoftDeleteEntity extends Entity {\r\n\tdeleted?: boolean;\r\n}\r\n\r\nexport interface User extends SoftDeleteEntity {\r\n\tabbreviation: string;\r\n\tfullName: string;\r\n\tcolor: string;\r\n\troles: string[];\r\n}\r\n\r\nexport interface Role extends Entity {\r\n\tname: string;\r\n}\r\n\r\nexport interface FeeType extends SoftDeleteEntity {\r\n\tvalue?: number;\r\n\tlabel: string;\r\n\tapplicationStrategy: FeeTypeApplicationStrategy;\r\n}\r\n\r\nexport enum FeeTypeApplicationStrategy {\r\n\tTarget,\r\n\tAllButTarget,\r\n\tAutoAll,\r\n}\r\n\r\nexport interface Game extends Entity {\r\n\tstatus: \"open\" | \"closed\";\r\n\tusers: string[];\r\n\tname: string;\r\n}\r\n\r\nexport interface Penalty extends Entity {\r\n\tgameId: string;\r\n\tuserId: string;\r\n\tfeeTypeId: string;\r\n\tvalue: number;\r\n}\r\n\r\nexport interface Transaction extends Entity {\r\n\tname: string;\r\n\tdescription: string;\r\n\tuserId: string;\r\n\tvalue: number;\r\n\taffectsGlobalLedger: boolean;\r\n\taffectsUserLedger: boolean;\r\n\tpenalties: string[];\r\n}","import { Checkbox, IconButton, TableFooter, TableSortLabel } from \"@material-ui/core\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Table from \"@material-ui/core/Table\";\r\nimport TableBody from \"@material-ui/core/TableBody\";\r\nimport TableCell from \"@material-ui/core/TableCell\";\r\nimport TableContainer from \"@material-ui/core/TableContainer\";\r\nimport TableHead from \"@material-ui/core/TableHead\";\r\nimport TablePagination from \"@material-ui/core/TablePagination\";\r\nimport TableRow from \"@material-ui/core/TableRow\";\r\nimport React, { Component } from \"react\";\r\nimport { IconType } from \"react-icons\";\r\nimport { v4 } from \"uuid\";\r\nimport \"../../entities/dataservice\";\r\n\r\nexport type GenericColumn<T> = {\r\n\tid: string;\r\n\tname: string;\r\n\tdata: ((row: T) => string | React.ReactElement) | keyof T;\r\n\talign?: \"left\" | \"right\";\r\n\torderable?: boolean;\r\n\tsort?: (a: T, b: T) => number\r\n};\r\n\r\nexport type GenericTableState = {\r\n\tcurrentPage: number;\r\n\torder: { [colId: string]: { priority: number; direction: \"asc\" | \"desc\" } };\r\n};\r\n\r\nexport interface GenericTableProperties<T> {\r\n\tcolumns: GenericColumn<T>[];\r\n\tentriesPerPage: number;\r\n\trows: T[];\r\n\tactions?: { icon: IconType; handle: (row: T) => any }[];\r\n\tselectable?: boolean;\r\n\taddSelected?: (row: T) => void;\r\n\tremoveSelected?: (row: T) => void;\r\n}\r\n\r\nexport class GenericTable<T> extends Component<GenericTableProperties<T>, GenericTableState> {\r\n\tconstructor(props: GenericTableProperties<T>) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tcurrentPage: 0,\r\n\t\t\torder: {},\r\n\t\t};\r\n\t\tthis.pageBounds = this.pageBounds.bind(this);\r\n\t}\r\n\r\n\tprivate pageBounds(pageNumber: number, rowCount: number): [number, number] {\r\n\t\tconst lowerBound = pageNumber * this.props.entriesPerPage;\r\n\t\tconst upperBound = (pageNumber + 1) * this.props.entriesPerPage;\r\n\t\treturn [lowerBound, Math.min(upperBound, rowCount)];\r\n\t}\r\n\r\n\tprivate sortByOrderObject(\r\n\t\trows: T[],\r\n\t\tcolumns: GenericColumn<T>[],\r\n\t\torder: { [colId: string]: { priority: number; direction: \"asc\" | \"desc\" } }\r\n\t) {\r\n\t\tlet sortedRows = rows;\r\n\t\tObject.entries(order)\r\n\t\t\t.sort((a, b) => b[1].priority - a[1].priority)\r\n\t\t\t.forEach(([key, order]) => {\r\n\t\t\t\tsortedRows.sort((a, b) => {\r\n\t\t\t\t\tconst column = columns.find((c) => c.id === key);\r\n\t\t\t\t\tif (!column) throw Error(\"col not found\");\r\n\t\t\t\t\tif (typeof column.sort === \"function\") return order.direction === \"asc\" ? column.sort(a,b) : column.sort(b,a);\r\n\t\t\t\t\tconst valA = typeof column.data === \"function\" ? column.data(a) : a[column.data];\r\n\t\t\t\t\tconst valB = typeof column.data === \"function\" ? column.data(b) : b[column.data];\r\n\t\t\t\t\tlet comparisonResult = 0;\r\n\t\t\t\t\tif (valA > valB) comparisonResult = 1;\r\n\t\t\t\t\telse if (valB > valA) comparisonResult = -1;\r\n\t\t\t\t\telse return 0;\r\n\t\t\t\t\tif (order.direction === \"asc\") return comparisonResult;\r\n\t\t\t\t\treturn comparisonResult * -1;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\treturn sortedRows;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst [lowerBound, upperBound] = this.pageBounds(this.state.currentPage, this.props.rows.length);\r\n\t\tconst cols: GenericColumn<T>[] = [];\r\n\t\tif (\r\n\t\t\tthis.props.selectable === true &&\r\n\t\t\ttypeof this.props.addSelected === \"function\" &&\r\n\t\t\ttypeof this.props.removeSelected === \"function\"\r\n\t\t) {\r\n\t\t\tcols.push({\r\n\t\t\t\tdata: (row) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\tonChange={(evt) => {\r\n\t\t\t\t\t\t\t\tif (this.props.addSelected == null || this.props.removeSelected == null) return;\r\n\t\t\t\t\t\t\t\tif (evt.target.checked) this.props.addSelected(row);\r\n\t\t\t\t\t\t\t\telse this.props.removeSelected(row);\r\n\t\t\t\t\t\t\t}}></Checkbox>\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\tid: \"col_check\",\r\n\t\t\t\tname: \"\",\r\n\t\t\t\torderable: false,\r\n\t\t\t\talign: \"left\",\r\n\t\t\t\tsort: () => 0\r\n\t\t\t});\r\n\t\t}\r\n\t\tcols.push(...this.props.columns);\r\n\t\tconst headerCells = cols.map((col, _, arr) => {\r\n\t\t\treturn !col.orderable ? (\r\n\t\t\t\t<TableCell align={col.align ?? \"left\"} key={v4()}>\r\n\t\t\t\t\t{col.name}\r\n\t\t\t\t</TableCell>\r\n\t\t\t) : (\r\n\t\t\t\t<TableCell\r\n\t\t\t\t\talign={col.align ?? \"left\"}\r\n\t\t\t\t\tkey={v4()}\r\n\t\t\t\t\tsortDirection={\r\n\t\t\t\t\t\tcol.orderable && this.state.order[col.id] != null\r\n\t\t\t\t\t\t\t? this.state.order[col.id].direction\r\n\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t<TableSortLabel\r\n\t\t\t\t\t\t\tkey={v4()}\r\n\t\t\t\t\t\t\tactive={col.orderable && col.id in this.state.order}\r\n\t\t\t\t\t\t\tdirection={\r\n\t\t\t\t\t\t\t\tcol.orderable && this.state.order[col.id] != null\r\n\t\t\t\t\t\t\t\t\t? this.state.order[col.id].direction\r\n\t\t\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonClick={(evt) => {\r\n\t\t\t\t\t\t\t\tif (!col.orderable) return;\r\n\t\t\t\t\t\t\t\tconst order = this.state.order;\r\n\t\t\t\t\t\t\t\tif (!evt.shiftKey)\r\n\t\t\t\t\t\t\t\t\tarr.forEach((c) => {\r\n\t\t\t\t\t\t\t\t\t\tif (c.id !== col.id) delete order[c.id];\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif (col.id in order) {\r\n\t\t\t\t\t\t\t\t\tswitch (order[col.id].direction) {\r\n\t\t\t\t\t\t\t\t\t\tcase \"asc\":\r\n\t\t\t\t\t\t\t\t\t\t\torder[col.id].direction = \"desc\";\r\n\t\t\t\t\t\t\t\t\t\t\torder[col.id].priority = Date.now();\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\tcase \"desc\":\r\n\t\t\t\t\t\t\t\t\t\t\tdelete order[col.id];\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\torder[col.id] = { direction: \"asc\", priority: Date.now() };\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.setState({ order: this.state.order });\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t{col.name}\r\n\t\t\t\t\t\t</TableSortLabel>\r\n\t\t\t\t\t}\r\n\t\t\t\t</TableCell>\r\n\t\t\t);\r\n\t\t});\r\n\t\tconst tableRows = this.sortByOrderObject(this.props.rows, cols, this.state.order)\r\n\t\t\t.slice(lowerBound, upperBound)\r\n\t\t\t.map((row) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<TableRow key={v4()}>\r\n\t\t\t\t\t\t{(() => {\r\n\t\t\t\t\t\t\tconst cells = cols.map((col) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<TableCell key={v4()} align={col.align ?? \"left\"}>\r\n\t\t\t\t\t\t\t\t\t\t{(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tif (typeof col.data === \"function\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn col.data(row);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn row[col.data];\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t})()}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (this.props.actions != null) {\r\n\t\t\t\t\t\t\t\tcells.push(\r\n\t\t\t\t\t\t\t\t\t<TableCell key={v4()} align=\"right\" style={{ padding: \"4px\" }}>\r\n\t\t\t\t\t\t\t\t\t\t{this.props.actions.map((action) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={v4()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taction.handle(row);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{<action.icon size=\".75em\"></action.icon>}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn cells;\r\n\t\t\t\t\t\t})()}\r\n\t\t\t\t\t</TableRow>\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\tif (this.props.actions != null) {\r\n\t\t\theaderCells.push(\r\n\t\t\t\t<TableCell key=\"col_actions\" align=\"right\">\r\n\t\t\t\t\tAktionen\r\n\t\t\t\t</TableCell>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<TableContainer\r\n\t\t\t\tcomponent={Paper}\r\n\t\t\t\televation={0}\r\n\t\t\t\tstyle={{ display: this.props.rows.length > 0 ? \"block\" : \"none\" }}>\r\n\t\t\t\t<Table>\r\n\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t<TableRow>{headerCells}</TableRow>\r\n\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t<TableBody>{tableRows}</TableBody>\r\n\t\t\t\t\t{this.props.rows.length > this.props.entriesPerPage ? (\r\n\t\t\t\t\t\t<TableFooter>\r\n\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t<TablePagination\r\n\t\t\t\t\t\t\t\t\tcount={this.props.rows.length}\r\n\t\t\t\t\t\t\t\t\trowsPerPage={this.props.entriesPerPage}\r\n\t\t\t\t\t\t\t\t\trowsPerPageOptions={[]}\r\n\t\t\t\t\t\t\t\t\tpage={this.state.currentPage}\r\n\t\t\t\t\t\t\t\t\tonChangePage={(_, pageNumber) => {\r\n\t\t\t\t\t\t\t\t\t\tthis.setState({ currentPage: pageNumber });\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t</TableFooter>\r\n\t\t\t\t\t) : null}\r\n\t\t\t\t</Table>\r\n\t\t\t</TableContainer>\r\n\t\t);\r\n\t}\r\n}\r\n","import { Dictionary } from \"@reduxjs/toolkit\";\r\nimport React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Transaction, User } from \"../../entities/entities\";\r\nimport { usersAdapter } from \"../../redux/reducers/users\";\r\nimport { AppDispatch, AppState } from \"../../redux/store\";\r\nimport { GenericTable } from \"../common/genericTable\";\r\nimport { Balance } from \"../common/currency\";\r\nimport { BsTrashFill } from \"react-icons/bs\";\r\nimport { transactionsSlice } from \"../../redux/reducers/transactions\";\r\nexport type TransactionTableProps = {\r\n\ttransactions: Transaction[];\r\n};\r\nexport const TransactionTable = (props: TransactionTableProps) => {\r\n\tconst users = useSelector<AppState>((state) =>\r\n\t\tusersAdapter.getSelectors<AppState>((state) => state.users).selectEntities(state)\r\n\t) as Dictionary<User>;\r\n\tconst dispatch = useDispatch<AppDispatch>();\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<GenericTable<Transaction>\r\n\t\t\t\tcolumns={[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata: (r) => <Link to={\"/zsku-mgmt/transactions/\" + r.id}>{r.name}</Link>,\r\n\t\t\t\t\t\tid: \"col_name\",\r\n\t\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\tsort: (a, b) => a.name.localeCompare(b.name),\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata: (r) => <div title={r.description}>{r.description.substr(0, 50)}</div>,\r\n\t\t\t\t\t\tid: \"col_description\",\r\n\t\t\t\t\t\tname: \"Beschreibung\",\r\n\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\torderable: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata: (r) => {\r\n\t\t\t\t\t\t\tconst user = users[r.userId];\r\n\t\t\t\t\t\t\tif (user == null) return <p>N/A</p>;\r\n\t\t\t\t\t\t\treturn <Link to={\"/zsku-mgmt/users/\" + user.id}>{user.fullName}</Link>;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tid: \"col_user\",\r\n\t\t\t\t\t\tname: \"Mitglied\",\r\n\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\tsort: (a, b) => {\r\n\t\t\t\t\t\t\tconst userA = users[a.userId];\r\n\t\t\t\t\t\t\tconst userB = users[b.userId];\r\n\t\t\t\t\t\t\tif (userA == null || userB == null) return 0;\r\n\t\t\t\t\t\t\treturn userA.fullName.localeCompare(userB.fullName);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata: (r) => <Balance val={r.value}></Balance>,\r\n\t\t\t\t\t\tid: \"col_value\",\r\n\t\t\t\t\t\tname: \"Betrag\",\r\n\t\t\t\t\t\talign: \"right\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\tsort: (a, b) => a.value - b.value,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata: (r) => new Date(r.createdOn).toLocaleDateString(\"de-DE\"),\r\n\t\t\t\t\t\tid: \"col_timestamp\",\r\n\t\t\t\t\t\tname: \"Erstellt am\",\r\n\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\tsort: (a, b) => a.createdOn - b.createdOn,\r\n\t\t\t\t\t},\r\n\t\t\t\t]}\r\n\t\t\t\tentriesPerPage={8}\r\n\t\t\t\trows={props.transactions}\r\n\t\t\t\tactions={[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ticon: BsTrashFill,\r\n\t\t\t\t\t\thandle: (row) => {\r\n\t\t\t\t\t\t\tdispatch(transactionsSlice.actions.delete(row.id));\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t]}\r\n\t\t\t></GenericTable>\r\n\t\t</div>\r\n\t);\r\n};\r\n","import { Avatar, Button, Paper } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { v4 } from \"uuid\";\r\nimport { Transaction, User } from \"../../entities/entities\";\r\nimport { transactionsAdapter, transactionsSlice } from \"../../redux/reducers/transactions\";\r\nimport { usersAdapter } from \"../../redux/reducers/users\";\r\nimport { AppDispatch, AppState } from \"../../redux/store\";\r\nimport { Balance } from \"../common/currency\";\r\nimport { TransactionTable } from \"./transactionsTable\";\r\n\r\nconst Ledgers = withRouter((history) => {\r\n\tconst transactions = useSelector<AppState>((state) =>\r\n\t\ttransactionsAdapter.getSelectors().selectAll(state.transactions)\r\n\t) as Transaction[];\r\n\tconst usersArray = useSelector<AppState>((state) =>\r\n\t\tusersAdapter\r\n\t\t\t.getSelectors()\r\n\t\t\t.selectAll(state.users)\r\n\t\t\t.filter((u) => u.deleted !== true)\r\n\t) as User[];\r\n\tconst dispatch = useDispatch<AppDispatch>();\r\n\treturn (\r\n\t\t<div className=\"ledgerContainer\">\r\n\t\t\t<div className=\"zsku-panel\">\r\n\t\t\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t\t<h1>Kassenstand</h1>\r\n\t\t\t\t\t\t<Balance\r\n\t\t\t\t\t\t\tval={transactions\r\n\t\t\t\t\t\t\t\t.filter((t) => t.affectsGlobalLedger)\r\n\t\t\t\t\t\t\t\t.reduce((agg, next) => agg + next.value, 0)}></Balance>\r\n\t\t\t\t\t\t<Link to=\"/zsku-mgmt/transactions/new\">\r\n\t\t\t\t\t\t\t<Button>Auerplanmige Transaktion hinzufgen</Button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<TransactionTable\r\n\t\t\t\t\t\ttransactions={transactions.filter((t) => t.affectsGlobalLedger)}></TransactionTable>\r\n\t\t\t\t</Paper>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"cardGrid\">\r\n\t\t\t\t{usersArray.map((user) => {\r\n\t\t\t\t\tconst balance = transactions.reduce(\r\n\t\t\t\t\t\t(agg, next) => agg + (next.userId === user.id ? next.value : 0),\r\n\t\t\t\t\t\t0\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tstyle={{ cursor: \"pointer\" }}\r\n\t\t\t\t\t\t\tkey={\"userLedger_\" + user.id}\r\n\t\t\t\t\t\t\tclassName=\"card zsku-panel\"\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\thistory.history.push(\"/zsku-mgmt/users/\" + user.id);\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t<Paper elevation={3} style={{ padding: \"2em\", position: \"relative\" }}>\r\n\t\t\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: user.color,\r\n\t\t\t\t\t\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\t\t\t\t\t\ttop: \"1em\",\r\n\t\t\t\t\t\t\t\t\t\tright: \"1em\",\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{user.abbreviation}\r\n\t\t\t\t\t\t\t\t</Avatar>\r\n\t\t\t\t\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t\t\t\t\t<h1 style={{ marginLeft: \"0\" }}>{user.fullName}</h1>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div style={{ display: \"flex\", alignItems: \"center\", width: \"100%\" }}>\r\n\t\t\t\t\t\t\t\t\t<p style={{ marginRight: \"1em\" }}>Kontostand</p>\r\n\t\t\t\t\t\t\t\t\t<Balance val={balance}></Balance>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{balance < 0 && (\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ float: \"right\", bottom: \"1em\" }}\r\n\t\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\tconst tId = v4();\r\n\t\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\t\ttransactionsSlice.actions.create({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid: tId,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcreatedOn: Date.now(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taffectsGlobalLedger: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taffectsUserLedger: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: \"TRANS-\" + transactions.length.toString().padStart(4, \"0\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpenalties: [],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuserId: user.id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: balance * -1,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdescription: \"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\thistory.history.push(\"/zsku-mgmt/transactions/\" + tId);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tBegleichen\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\nexport default Ledgers;\r\n","import { createEntityAdapter, createSlice, PayloadAction, Update } from \"@reduxjs/toolkit\";\r\nimport { FeeType } from \"../../entities/entities\";\r\nimport { db } from \"../Database\";\r\nimport _ from \"lodash\";\r\n// const defaultState: FeeType[] = [\r\n// \t\t{ label: \"Brechen auf der Bahn\", value: 25, createdOn: new Date().valueOf(), id: \"1\" },\r\n// \t\t{ label: \"Diskutieren\", value: 0.01, createdOn: new Date().valueOf(), id: \"2\" },\r\n// \t\t{ label: \"Fluchen\", value: 0.01, createdOn: new Date().valueOf(), id: \"3\" },\r\n// \t\t{ label: \"Alle Neune\", value: 0.2, createdOn: new Date().valueOf(), id: \"4\" },\r\n// \t\t{ label: \"Gosse\", value: 0.3, createdOn: new Date().valueOf(), id: \"5\" },\r\n// \t];\r\n\r\nconst feeTypesAdapter = createEntityAdapter<FeeType>();\r\nconst feeTypesSlice = createSlice({\r\n\tinitialState: feeTypesAdapter.getInitialState(),\r\n\tname: \"feeTypes\",\r\n\treducers: {\r\n\t\t// create: feeTypesAdapter.addOne,\r\n\t\tcreate(state, action: PayloadAction<FeeType>) {\r\n\t\t\tstate.ids.push(action.payload.id);\r\n\t\t\tstate.entities[action.payload.id] = action.payload;\r\n\t\t\tdb.feeTypes.put(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tdelete(state, action: PayloadAction<string>) {\r\n\t\t\tconst ft = state.entities[action.payload];\r\n\t\t\tif (ft == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tft.deleted = true;\r\n\t\t\tdb.feeTypes.update(action.payload, { deleted: true });\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tset(state, action: PayloadAction<FeeType[]>) {\r\n\t\t\tstate.ids = action.payload.map((ft) => ft.id);\r\n\t\t\tstate.entities = {};\r\n\t\t\tfor (const ft of action.payload) {\r\n\t\t\t\tstate.entities[ft.id] = ft;\r\n\t\t\t}\r\n\t\t\tdb.feeTypes.clear().then(() => {\r\n\t\t\t\tdb.feeTypes.bulkPut(action.payload);\r\n\t\t\t});\r\n\t\t},\r\n\t\tupdate(state, action: PayloadAction<Update<FeeType>>) {\r\n\t\t\tstate.entities[action.payload.id] = _.merge(state.entities[action.payload.id], action.payload.changes);\r\n\t\t\tdb.feeTypes.update(action.payload.id as string, action.payload.changes);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport { feeTypesSlice, feeTypesAdapter };\r\n","import TextField from \"@material-ui/core/TextField/TextField\";\r\nimport { TextFieldProps } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport NumberFormat from \"react-number-format\";\r\ninterface NumberFormatCustomProps {\r\n\tinputRef: (instance: NumberFormat | null) => void;\r\n\tonChange: (event: { target: { name: string; value: string } }) => void;\r\n\tname: string;\r\n}\r\n\r\nconst NumberFormatCustom = (props: NumberFormatCustomProps) => {\r\n\tconst { inputRef, onChange, ...other } = props;\r\n\r\n\treturn (\r\n\t\t<NumberFormat\r\n\t\t\t{...other}\r\n\t\t\tgetInputRef={inputRef}\r\n\t\t\tonValueChange={(values) => {\r\n\t\t\t\tonChange({\r\n\t\t\t\t\ttarget: {\r\n\t\t\t\t\t\tname: props.name,\r\n\t\t\t\t\t\tvalue: values.value,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t}}\r\n\t\t\tthousandSeparator=\".\"\r\n\t\t\tdecimalSeparator=\",\"\r\n\t\t\tisNumericString\r\n\t\t\tfixedDecimalScale\r\n\t\t\tdecimalScale={2}\r\n\t\t\tallowedDecimalSeparators={[\",\", \".\"]}\r\n\t\t\tallowNegative\r\n\t\t\tallowLeadingZeros\r\n\t\t\tprefix=\"\"\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport const CurrencyField = ({ value, onChange, ...other }: Partial<TextFieldProps>) => {\r\n\treturn (\r\n\t\t<TextField\r\n            variant=\"outlined\"\r\n            InputProps={{\r\n\t\t\t\tstartAdornment: \"\",\r\n                inputComponent: NumberFormatCustom as any,\r\n\t\t\t}}\r\n\t\t\tvalue={value}\r\n            onChange={onChange}\r\n            {...other}\r\n\t\t/>\r\n\t);\r\n};\r\n","import { Button, FormControl, MenuItem, Paper, Select, Switch, TextField } from \"@material-ui/core\";\r\nimport { Dictionary, EntityState } from \"@reduxjs/toolkit\";\r\nimport { useFormik } from \"formik\";\r\nimport React from \"react\";\r\nimport { FaExchangeAlt } from \"react-icons/fa\";\r\nimport { ImFloppyDisk } from \"react-icons/im\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, RouteComponentProps, useHistory, withRouter } from \"react-router-dom\";\r\nimport { v4 } from \"uuid\";\r\nimport * as yup from \"yup\";\r\nimport { FeeType, Penalty, Transaction, User } from \"../../entities/entities\";\r\nimport { feeTypesAdapter } from \"../../redux/reducers/feeTypes\";\r\nimport { transactionsAdapter, transactionsSlice } from \"../../redux/reducers/transactions\";\r\nimport { AppDispatch, AppState } from \"../../redux/store\";\r\nimport { Currency } from \"../common/currency\";\r\nimport { CurrencyField } from \"../common/currencyField\";\r\nimport { GenericTable } from \"../common/genericTable\";\r\ninterface RouterParams {\r\n\ttransactionId: string;\r\n\tuserId?: string;\r\n}\r\n\r\ntype FeeTypeAggregate = { id: string; feeType: string; value: number; count: number };\r\n\r\ntype TransactionFormValues = {\r\n\tvalue: number;\r\n\tuser: string;\r\n\tdescription: string;\r\n\taffectsGlobalLedger: boolean;\r\n};\r\nconst TransactionForm = withRouter((router: RouteComponentProps<RouterParams>) => {\r\n\tconst dispatch = useDispatch<AppDispatch>();\r\n\tconst history = useHistory();\r\n\tconst validationSchema = yup.object({\r\n\t\tvalue: yup.number().required().notOneOf([0]),\r\n\t});\r\n\r\n\tconst users = useSelector<AppState>((state) => state.users) as EntityState<User>;\r\n\tconst feeTypes = useSelector<AppState>((state) =>\r\n\t\tfeeTypesAdapter.getSelectors<AppState>((state) => state.feeTypes).selectEntities(state)\r\n\t) as Dictionary<FeeType>;\r\n\r\n\tconst transaction = useSelector<AppState>((state) =>\r\n\t\ttransactionsAdapter\r\n\t\t\t.getSelectors<AppState>((state) => state.transactions)\r\n\t\t\t.selectById(state, router.match.params.transactionId)\r\n\t) as Transaction;\r\n\tconst transactionCount = useSelector<AppState>((state) =>\r\n\t\ttransactionsAdapter.getSelectors().selectTotal(state.transactions)\r\n\t) as number;\r\n\tconst transactionPenalties = useSelector<AppState>((state) =>\r\n\t\t(transaction?.penalties ?? []).map((p) => state.penalties.entities[p])\r\n\t) as Penalty[];\r\n\tlet countedPenalties = Object.values(\r\n\t\ttransactionPenalties.reduce<{ [id: string]: FeeTypeAggregate }>((agg, penalty) => {\r\n\t\t\tconst feeType = penalty && feeTypes[penalty.feeTypeId];\r\n\t\t\tif (agg[penalty.id] == null) {\r\n\t\t\t\tagg[penalty.id] = {\r\n\t\t\t\t\tcount: 0,\r\n\t\t\t\t\tfeeType: feeType?.label ?? \"Custom\",\r\n\t\t\t\t\tid: feeType?.id ?? penalty.id,\r\n\t\t\t\t\tvalue: 0,\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tagg[penalty.id].count++;\r\n\t\t\tagg[penalty.id].value += penalty?.value ?? 0;\r\n\t\t\treturn agg;\r\n\t\t}, {})\r\n\t);\r\n\r\n\tconst formik = useFormik<TransactionFormValues>({\r\n\t\tinitialValues: {\r\n\t\t\tdescription: transaction?.description ?? \"\",\r\n\t\t\tuser: transaction?.userId ?? router.match.params.userId,\r\n\t\t\tvalue: transaction?.value ?? 0,\r\n\t\t\taffectsGlobalLedger: true,\r\n\t\t},\r\n\t\tvalidationSchema,\r\n\r\n\t\tonSubmit: (values, { setSubmitting, resetForm }) => {\r\n\t\t\tconst isNewTransaction = router.match.params.transactionId === \"new\";\r\n\t\t\tif (isNewTransaction) {\r\n\t\t\t\tconst newTransactionId = v4();\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\ttransactionsSlice.actions.create({\r\n\t\t\t\t\t\taffectsGlobalLedger: values.affectsGlobalLedger,\r\n\t\t\t\t\t\taffectsUserLedger: !!router.match.params.userId,\r\n\t\t\t\t\t\tcreatedOn: Date.now(),\r\n\t\t\t\t\t\tdescription: values.description,\r\n\t\t\t\t\t\tid: newTransactionId,\r\n\t\t\t\t\t\tname: \"TRANS-\" + (transactionCount + 1).toString().padStart(4, \"0\"),\r\n\t\t\t\t\t\tuserId: values.user,\r\n\t\t\t\t\t\tvalue: parseFloat(values.value.toString()),\r\n\t\t\t\t\t\tpenalties: [],\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\tsetSubmitting(false);\r\n\t\t\t\thistory.push(\"/zsku-mgmt/transactions/\" + newTransactionId);\r\n\t\t\t} else {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\ttransactionsSlice.actions.update({\r\n\t\t\t\t\t\tid: transaction.id,\r\n\t\t\t\t\t\tchanges: {\r\n\t\t\t\t\t\t\tdescription: values.description,\r\n\t\t\t\t\t\t\tvalue: parseFloat(values.value.toString()),\r\n\t\t\t\t\t\t\tuserId: values.user,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\tsetSubmitting(false);\r\n\t\t\t\tresetForm({\r\n\t\t\t\t\tvalues: values,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t});\r\n\treturn (\r\n\t\t<div className=\"zsku-panel\">\r\n\t\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t<h1>{transaction?.name ?? \"Neue Transaktion\"}</h1>\r\n\t\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t\t<FaExchangeAlt size=\"4em\" style={{ backgroundColor: \"#7DCE82\" }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<form onSubmit={formik.handleSubmit}>\r\n\t\t\t\t\t<div className=\"zsku-keyValueGrid\">\r\n\t\t\t\t\t\t{(router.match.params.userId != null ||\r\n\t\t\t\t\t\t\t(transaction?.userId != null && transactionPenalties.length === 0)) && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<h4>Betrifft Kasse</h4>\r\n\t\t\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t\t\t<Switch\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\tchecked={formik.values.affectsGlobalLedger}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\tformik.setFieldValue(\"affectsGlobalLedger\", e.target.checked)\r\n\t\t\t\t\t\t\t\t\t\t}></Switch>\r\n\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t<h4>Betrag</h4>\r\n\t\t\t\t\t\t<CurrencyField\r\n\t\t\t\t\t\t\tdisabled={transaction?.penalties.length > 0}\r\n\t\t\t\t\t\t\terror={formik.touched.value && Boolean(formik.errors.value)}\r\n\t\t\t\t\t\t\thelperText={formik.touched.value && formik.errors.value}\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tvalue={formik.values.value}\r\n\t\t\t\t\t\t\tname=\"Value\"\r\n\t\t\t\t\t\t\tid=\"value\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\tonChange={(e) => formik.setFieldValue(\"value\", (e.target as any).value)}></CurrencyField>\r\n\r\n\t\t\t\t\t\t{(router.match.params.userId != null || transaction?.affectsUserLedger === true) && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<h4>Mitglied</h4>\r\n\t\t\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\terror={formik.touched.user && Boolean(formik.errors.user)}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={\r\n\t\t\t\t\t\t\t\t\t\t\ttransaction?.affectsGlobalLedger === false ||\r\n\t\t\t\t\t\t\t\t\t\t\trouter.match.params.transactionId !== \"new\" ||\r\n\t\t\t\t\t\t\t\t\t\t\trouter.match.params.userId != null\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tvalue={formik.values.user}\r\n\t\t\t\t\t\t\t\t\t\titemType=\"string\"\r\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\tformik.setFieldValue(\"user\", (e.target.value as number).toString());\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\trenderValue={(userId) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn userId == null ? null : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tto={\"/zsku-mgmt/users/\" + userId}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonMouseDown={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{users.entities[userId as string]?.fullName}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t{users.ids.map((userId) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={\"user_\" + userId} value={userId}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{users.entities[userId]?.fullName}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t<h4>Beschreibung</h4>\r\n\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\terror={formik.touched.description && Boolean(formik.errors.description)}\r\n\t\t\t\t\t\t\t\thelperText={formik.touched.description && formik.errors.description}\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\t\t\t\tid=\"description\"\r\n\t\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\t\tvalue={formik.values.description}\r\n\t\t\t\t\t\t\t\tonChange={formik.handleChange}></TextField>\r\n\t\t\t\t\t\t</FormControl>\r\n\r\n\t\t\t\t\t\t{transaction != null && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<h4>Erstellt am</h4>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tname=\"createdOn\"\r\n\t\t\t\t\t\t\t\t\tid=\"createdOn\"\r\n\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\tvalue={new Date(transaction.createdOn).toLocaleDateString(\"de-DE\")}></TextField>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<div className=\"gridSpacer\"></div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<FormControl style={{ float: \"right\" }}>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\tid=\"formSubmit\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tstartIcon={<ImFloppyDisk size=\".75em\" />}>\r\n\t\t\t\t\t\t\t\t\tSpeichern\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\r\n\t\t\t\t{countedPenalties.length > 0 ? (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<GenericTable<FeeTypeAggregate>\r\n\t\t\t\t\t\t\tcolumns={[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tid: \"col_feeType\",\r\n\t\t\t\t\t\t\t\t\tname: \"Strafe\",\r\n\t\t\t\t\t\t\t\t\tdata: (r) => r.feeType,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tid: \"col_value\",\r\n\t\t\t\t\t\t\t\t\tname: \"Gesamtbetrag\",\r\n\t\t\t\t\t\t\t\t\tdata: (r) => <Currency val={r.value}></Currency>,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tid: \"col_count\",\r\n\t\t\t\t\t\t\t\t\tname: \"Anzahl\",\r\n\t\t\t\t\t\t\t\t\tdata: \"count\",\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\tentriesPerPage={10}\r\n\t\t\t\t\t\t\trows={countedPenalties}></GenericTable>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : null}\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default TransactionForm;\r\n","import { Button, MenuItem, Select, TextField } from \"@material-ui/core\";\r\nimport { bindActionCreators } from \"@reduxjs/toolkit\";\r\nimport React, { Component } from \"react\";\r\nimport { ImFloppyDisk } from \"react-icons/im\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport { FeeType, FeeTypeApplicationStrategy } from \"../../../entities/entities\";\r\nimport { feeTypesAdapter, feeTypesSlice } from \"../../../redux/reducers/feeTypes\";\r\nimport { AppDispatch, AppState } from \"../../../redux/store\";\r\nimport { CurrencyField } from \"../../common/currencyField\";\r\n\r\ntype FeeTypesFormState = {\r\n\tvalue: string;\r\n\tapplicationStrategy: FeeTypeApplicationStrategy;\r\n\tname: string;\r\n\tid: string;\r\n};\r\n\r\nconst update = feeTypesSlice.actions.update;\r\ntype LinkDispatchProps = {\r\n\teditFeeType: typeof update;\r\n};\r\n\r\ntype LinkStateProps = {\r\n\tfeeType?: FeeType;\r\n};\r\n\r\ntype RouteInfo = {\r\n\tid: string;\r\n};\r\n\r\ninterface FeeTypesFormProps extends RouteComponentProps<RouteInfo> {}\r\n\r\nclass FeeTypesEditForm extends Component<LinkDispatchProps & LinkStateProps & FeeTypesFormProps, FeeTypesFormState> {\r\n\tconstructor(props: LinkDispatchProps & LinkStateProps & FeeTypesFormProps) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tvalue: this.props.feeType?.value?.toString() ?? \"\",\r\n\t\t\tname: this.props.feeType?.label ?? \"\",\r\n\t\t\tid: this.props.feeType?.id ?? \"ERR\",\r\n\t\t\tapplicationStrategy: this.props.feeType?.applicationStrategy ?? FeeTypeApplicationStrategy.Target,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tif (this.state.id !== this.props.match.params.id) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tid: this.props.feeType?.id ?? \"ERR\",\r\n\t\t\t\tname: this.props.feeType?.label ?? \"ERR\",\r\n\t\t\t\tvalue: this.props.feeType?.value?.toString() ?? \"\",\r\n\t\t\t\tapplicationStrategy: this.props.feeType?.applicationStrategy ?? FeeTypeApplicationStrategy.Target,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div style={{ display: \"flex\", gap: \"10px\", alignItems: \"center\" }}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tvalue={this.state.name}\r\n\t\t\t\t\tlabel=\"Name\"\r\n\t\t\t\t\tname=\"Name\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tonChange={(evt) => {\r\n\t\t\t\t\t\tthis.setState({ name: evt.target.value });\r\n\t\t\t\t\t}}></TextField>\r\n\t\t\t\t<CurrencyField\r\n\t\t\t\t\tvalue={this.state.value}\r\n\t\t\t\t\tlabel=\"Value\"\r\n\t\t\t\t\tname=\"Wert\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\tthis.setState({value: e.target.value});\r\n\t\t\t\t\t}}></CurrencyField>\r\n\t\t\t\t<Select\r\n\t\t\t\t\tlabel=\"Betrifft\"\r\n\t\t\t\t\tname=\"ApplicationStrategy\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tvalue={this.state.applicationStrategy}\r\n\t\t\t\t\tonChange={(evt) => {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tapplicationStrategy: parseInt(evt.target.value as string) as FeeTypeApplicationStrategy,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t<MenuItem value={FeeTypeApplicationStrategy.Target}>Ziel</MenuItem>\r\n\t\t\t\t\t<MenuItem value={FeeTypeApplicationStrategy.AllButTarget}>Alle auer Ziel</MenuItem>\r\n\t\t\t\t\t<MenuItem value={FeeTypeApplicationStrategy.AutoAll}>Alle</MenuItem>\r\n\t\t\t\t</Select>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tstartIcon={<ImFloppyDisk size=\".75em\" />}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tthis.props.editFeeType({\r\n\t\t\t\t\t\t\tchanges: {\r\n\t\t\t\t\t\t\t\tlabel: this.state.name,\r\n\t\t\t\t\t\t\t\tvalue: parseFloat(this.state.value),\r\n\t\t\t\t\t\t\t\tapplicationStrategy: this.state.applicationStrategy,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tid: this.state.id,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.props.history.push(\"/zsku-mgmt/settings\");\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\tSpeichern\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: FeeTypesFormProps): LinkStateProps => ({\r\n\tfeeType: feeTypesAdapter.getSelectors().selectById(state.feeTypes, ownProps.match.params.id),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: AppDispatch): LinkDispatchProps => ({\r\n\teditFeeType: bindActionCreators(feeTypesSlice.actions.update, dispatch),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(FeeTypesEditForm));\r\n","import { createEntityAdapter, createSlice, PayloadAction, Update } from \"@reduxjs/toolkit\";\r\nimport _ from \"lodash\";\r\nimport { Penalty } from \"../../entities/entities\";\r\nimport { db } from \"../Database\";\r\n\r\nconst penaltiesAdapter = createEntityAdapter<Penalty>();\r\nconst penaltiesSlice = createSlice({\r\n\tinitialState: penaltiesAdapter.getInitialState(),\r\n\tname: \"penalties\",\r\n\treducers: {\r\n\t\tcreate(state, action: PayloadAction<Penalty>) {\r\n\t\t\tstate.ids.push(action.payload.id);\r\n\t\t\tstate.entities[action.payload.id] = action.payload;\r\n\t\t\tdb.penalties.put(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tcreateMultiple(state, action: PayloadAction<Penalty[]>) {\r\n\t\t\tstate.ids.push(...action.payload.map((p) => p.id));\r\n\t\t\tfor (const penalty of action.payload) {\r\n\t\t\t\tstate.entities[penalty.id] = penalty;\r\n\t\t\t}\r\n\t\t\tdb.penalties.bulkPut(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tdelete(state, action: PayloadAction<string>) {\r\n\t\t\tstate.ids = state.ids.filter((id) => id !== action.payload);\r\n\t\t\tdelete state.entities[action.payload];\r\n\t\t\tdb.penalties.delete(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tdeleteMultiple(state, action: PayloadAction<string[]>) {\r\n\t\t\tstate.ids = state.ids.filter((id) => action.payload.findIndex((del) => id !== del));\r\n\t\t\tfor (const del of action.payload) {\r\n\t\t\t\tdelete state.entities[del];\r\n\t\t\t}\r\n\t\t\tdb.penalties.bulkDelete(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tset(state, action: PayloadAction<Penalty[]>) {\r\n\t\t\tstate.ids = action.payload.map((ft) => ft.id);\r\n\t\t\tstate.entities = {};\r\n\t\t\tfor (const ft of action.payload) {\r\n\t\t\t\tstate.entities[ft.id] = ft;\r\n\t\t\t}\r\n\t\t\tdb.penalties.clear().then(() => {\r\n\t\t\t\tdb.penalties.bulkPut(action.payload);\r\n\t\t\t});\r\n\t\t},\r\n\t\tupdate(state, action: PayloadAction<Update<Penalty>>) {\r\n\t\t\tstate.entities[action.payload.id] = _.merge(state.entities[action.payload.id], action.payload.changes);\r\n\t\t\tdb.penalties.update(action.payload.id as string, action.payload.changes);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t},\r\n});\r\nexport { penaltiesAdapter, penaltiesSlice };\r\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { v4 } from \"uuid\";\r\nimport { Game, User } from \"../../entities/entities\";\r\nimport { db } from \"../Database\";\r\nimport { AppState } from \"../store\";\r\nimport { penaltiesAdapter } from \"./penalties\";\r\nconst gameSelectors = {\r\n\topenGame: (state: AppState) => state.games.entities[state.games.openGame],\r\n\tgameById: (state: AppState, id: string) => state.games.entities[id],\r\n\tclosedGames: (state: AppState) =>\r\n\t\tstate.games.ids.filter((id) => id !== state.games.openGame).map((id) => state.games.entities[id]),\r\n\tallGames: (state: AppState) => state.games.ids.map((id) => state.games.entities[id]),\r\n\tplayers: (gameId: string) => (state: AppState) =>\r\n\t\tstate.games.entities[gameId]?.users\r\n\t\t\t.map((usr) => state.users.entities[usr])\r\n\t\t\t.sort((a, b) => (a as User).fullName.localeCompare((b as User).fullName)),\r\n\tplayerPenalties: (gameId: string, playerId: string) => (state: AppState) =>\r\n\t\tpenaltiesAdapter\r\n\t\t\t.getSelectors()\r\n\t\t\t.selectAll(state.penalties)\r\n\t\t\t.filter((p) => p.userId === playerId && p.gameId === gameId),\r\n\tpenalties: (gameId: string) => (state: AppState) =>\r\n\t\tpenaltiesAdapter\r\n\t\t\t.getSelectors()\r\n\t\t\t.selectAll(state.penalties)\r\n\t\t\t.filter((p) => p.gameId === gameId),\r\n};\r\nconst gamesSlice = createSlice({\r\n\tinitialState: { ids: [], entities: {}, openGame: \"\" } as {\r\n\t\tids: string[];\r\n\t\tentities: { [id: string]: Game };\r\n\t\topenGame: string;\r\n\t},\r\n\tname: \"games\",\r\n\treducers: {\r\n\t\tcreateGame(state) {\r\n\t\t\tconst newGame: Game = {\r\n\t\t\t\tid: v4(),\r\n\t\t\t\tcreatedOn: Date.now(),\r\n\t\t\t\tstatus: \"open\",\r\n\t\t\t\tname: `SPIEL-${(state.ids.length + 1).toString().padStart(4, \"0\")}`,\r\n\t\t\t\tusers: [],\r\n\t\t\t};\r\n\t\t\tstate.ids.push(newGame.id);\r\n\t\t\tstate.entities[newGame.id] = newGame;\r\n\t\t\tstate.openGame = newGame.id;\r\n\t\t\tdb.games.put(newGame);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tfinishGame(state) {\r\n\t\t\tconst openGame = state.openGame;\r\n\t\t\tif (!openGame) return state;\r\n\t\t\tconst game = state.entities[state.openGame];\r\n\t\t\tif (game.users.length === 0) return state;\r\n\t\t\tgame.status = \"closed\";\r\n\t\t\tstate.openGame = \"\";\r\n\t\t\tdb.games.update(openGame, { status: \"closed\" });\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tabortGame(state) {\r\n\t\t\tconst openGame = state.openGame;\r\n\t\t\tif (!openGame) return state;\r\n\t\t\tstate.ids = state.ids.filter((g) => g !== openGame);\r\n\t\t\tdelete state.entities[openGame];\r\n\t\t\tdb.games.delete(openGame);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tsetGames(state, action: PayloadAction<Game[]>) {\r\n\t\t\tstate.ids = action.payload.map((g) => g.id);\r\n\t\t\tstate.entities = action.payload.reduce((agg, next) => {\r\n\t\t\t\tagg[next.id] = next;\r\n\t\t\t\tif (next.status === \"open\") state.openGame = next.id;\r\n\t\t\t\treturn agg;\r\n\t\t\t}, {} as { [id: string]: Game });\r\n\t\t\tdb.games.clear().then(() => {\r\n\t\t\t\tdb.games.bulkPut(action.payload);\r\n\t\t\t});\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\taddPlayerToOpenGame(state, action: PayloadAction<{ userId: string }>) {\r\n\t\t\tconst openGame = state.entities[state.openGame];\r\n\t\t\tif (openGame == null) return;\r\n\t\t\topenGame.users.push(action.payload.userId);\r\n\t\t\tdb.games.update(state.openGame, { \"users\": [...openGame.users] });\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tremovePlayerFromGame(state, action: PayloadAction<{ userId: string }>) {\r\n\t\t\tconst openGame = state.entities[state.openGame];\r\n\t\t\tif (openGame == null) return;\r\n\t\t\topenGame.users = openGame.users.filter((u) => u !== action.payload.userId);\r\n\t\t\tdb.games.update(state.openGame, { users: [...openGame.users] });\r\n\t\t\treturn state;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport { gamesSlice, gameSelectors };\r\n\r\n","import { createEntityAdapter, createSlice, PayloadAction, Update } from \"@reduxjs/toolkit\";\r\nimport _ from \"lodash\";\r\nimport { Role } from \"../../entities/entities\";\r\nimport { db } from \"../Database\";\r\n\r\nconst rolesAdapter = createEntityAdapter<Role>();\r\nconst rolesSlice = createSlice({\r\n\tinitialState: rolesAdapter.getInitialState(),\r\n\tname: \"roles\",\r\n\treducers: {\r\n\t\tcreate(state, action: PayloadAction<Role>) {\r\n\t\t\tstate.ids.push(action.payload.id);\r\n\t\t\tstate.entities[action.payload.id] = action.payload;\r\n\t\t\tdb.roles.put(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tdelete(state, action: PayloadAction<string>) {\r\n\t\t\tstate.ids = state.ids.filter((id) => id !== action.payload);\r\n\t\t\tdelete state.entities[action.payload];\r\n\t\t\tdb.roles.delete(action.payload);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t\tset(state, action: PayloadAction<Role[]>) {\r\n\t\t\tstate.ids = action.payload.map((ft) => ft.id);\r\n\t\t\tstate.entities = {};\r\n\t\t\tfor (const ft of action.payload) {\r\n\t\t\t\tstate.entities[ft.id] = ft;\r\n\t\t\t}\r\n\t\t\tdb.roles.clear().then(() => db.roles.bulkPut(action.payload));\r\n\t\t},\r\n\t\tupdate(state, action: PayloadAction<Update<Role>>) {\r\n\t\t\tstate.entities[action.payload.id] = _.merge(state.entities[action.payload.id], action.payload.changes);\r\n\t\t\tdb.roles.update(action.payload.id as string, action.payload.changes);\r\n\t\t\treturn state;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport { rolesSlice, rolesAdapter };\r\n","import { configureStore, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport _ from \"lodash\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { FeeType, FeeTypeApplicationStrategy, Role, User } from \"../entities/entities\";\r\nimport { colors } from \"../main/common/colors\";\r\nimport { db } from \"./Database\";\r\nimport { feeTypesSlice } from \"./reducers/feeTypes\";\r\nimport { gamesSlice } from \"./reducers/games\";\r\nimport { penaltiesSlice } from \"./reducers/penalties\";\r\nimport { rolesSlice } from \"./reducers/roles\";\r\nimport { transactionsSlice } from \"./reducers/transactions\";\r\nimport { usersSlice } from \"./reducers/users\";\r\nconst feeTypes: FeeType[] = [\r\n\t{\r\n\t\tlabel: \"Diskutieren\",\r\n\t\tvalue: 0.01,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"2\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Fluchen\",\r\n\t\tvalue: 0.01,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"3\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Alle Neune\",\r\n\t\tvalue: 0.2,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.AllButTarget,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"4\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Gosse\",\r\n\t\tvalue: 0.3,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"5\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Kugel abfangen misslingt\",\r\n\t\tvalue: 0.5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"6\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Kugel abgefangen\",\r\n\t\tvalue: 0.5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"7\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Wurf verpennt\",\r\n\t\tvalue: 0.5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"8\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Nicht aufgeschrieben\",\r\n\t\tvalue: 0.5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"9\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"2. Verlierer\",\r\n\t\tvalue: 0.5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"10\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Kugel fallen lassen\",\r\n\t\tvalue: 1,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"11\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Nicht aufgegessen\",\r\n\t\tvalue: 1,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"12\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Nichts gegessen\",\r\n\t\tvalue: 1,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"13\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Versptung (5m)\",\r\n\t\tvalue: 1,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"14\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Klingel\",\r\n\t\tvalue: 2,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"15\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Kugel auerhalb\",\r\n\t\tvalue: 2,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"16\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Verlierer\",\r\n\t\tvalue: 1.5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"17\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Versptung (15m)\",\r\n\t\tvalue: 2.5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"18\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Interieur beschdigt\",\r\n\t\tvalue: 3,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"19\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Beitrag\",\r\n\t\tvalue: 5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.AutoAll,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"20\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Kegelshirt nicht an\",\r\n\t\tvalue: 5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"21\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Versptung (30m)\",\r\n\t\tvalue: 5,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"22\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Eingeschlafen\",\r\n\t\tvalue: 10,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"23\",\r\n\t},\r\n\t{\r\n\t\tlabel: \"Brechen auf der Bahn\",\r\n\t\tvalue: 25,\r\n\t\tapplicationStrategy: FeeTypeApplicationStrategy.Target,\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"24\",\r\n\t},\r\n];\r\n\r\nconst roles: Role[] = [\r\n\t{\r\n\t\tname: \"Kassenwart\",\r\n\t\tcreatedOn: Date.now(),\r\n\t\tid: \"1\",\r\n\t},\r\n];\r\n\r\nconst users: User[] = [\r\n\t{\r\n\t\tabbreviation: \"DW\",\r\n\t\tcolor: _.sample(colors) ?? \"#0088cc\",\r\n\t\tcreatedOn: Date.now(),\r\n\t\tfullName: \"David Weischer\",\r\n\t\tid: \"2\",\r\n\t\troles: [\"1\"],\r\n\t},\r\n];\r\n\r\nexport const loadingSlice = createSlice({\r\n\tinitialState: true,\r\n\tname: \"loading\",\r\n\treducers: {\r\n\t\tset(state, action: PayloadAction<boolean>) {\r\n\t\t\tstate = action.payload;\r\n\t\t\treturn false;\r\n\t\t},\r\n\t},\r\n});\r\n\r\nexport const store = configureStore({\r\n\treducer: {\r\n\t\tfeeTypes: feeTypesSlice.reducer,\r\n\t\troles: rolesSlice.reducer,\r\n\t\tusers: usersSlice.reducer,\r\n\t\ttransactions: transactionsSlice.reducer,\r\n\t\tpenalties: penaltiesSlice.reducer,\r\n\t\tgames: gamesSlice.reducer,\r\n\t\tloading: loadingSlice.reducer,\r\n\t},\r\n});\r\n\r\n(async () => {\r\n\tlet dbFeeTypes = await db.feeTypes.toArray();\r\n\tif (dbFeeTypes?.length === 0) dbFeeTypes = feeTypes;\r\n\tlet dbRoles = await db.roles.toArray();\r\n\tif (dbRoles?.length === 0) dbRoles = roles;\r\n\tlet dbUsers = await db.users.toArray();\r\n\tif (dbUsers?.length === 0) dbUsers = users;\r\n\r\n\tstore.dispatch(feeTypesSlice.actions.set(dbFeeTypes));\r\n\tstore.dispatch(penaltiesSlice.actions.set(await db.penalties.toArray()));\r\n\tstore.dispatch(rolesSlice.actions.set(dbRoles));\r\n\tstore.dispatch(usersSlice.actions.set(dbUsers));\r\n\tstore.dispatch(transactionsSlice.actions.set(await db.transactions.toArray()));\r\n\tstore.dispatch(loadingSlice.actions.set(false));\r\n\tstore.dispatch(gamesSlice.actions.setGames(await db.games.toArray()));\r\n})();\r\n\r\nexport type AppDispatch = typeof store.dispatch;\r\nexport const useStoreDispatch = () => useDispatch<typeof store.dispatch>();\r\nexport type AppState = ReturnType<typeof store.getState>;\r\n","import { Button, MenuItem, Select, TextField } from \"@material-ui/core\";\r\nimport React, { useState } from \"react\";\r\nimport { ImFloppyDisk } from \"react-icons/im\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { v4 } from \"uuid\";\r\nimport { FeeTypeApplicationStrategy } from \"../../../entities/entities\";\r\nimport { feeTypesSlice } from \"../../../redux/reducers/feeTypes\";\r\nimport { useStoreDispatch } from \"../../../redux/store\";\r\nimport { CurrencyField } from \"../../common/currencyField\";\r\n\r\nconst FeeTypesCreateForm = withRouter(({ history }) => {\r\n\tconst [val, setValue] = useState(\"\");\r\n\tconst [label, setLabel] = useState(\"\");\r\n\tconst [applicationStrategy, setApplicationStrategy] = useState(FeeTypeApplicationStrategy.Target);\r\n\tconst dispatch = useStoreDispatch();\r\n\treturn (\r\n\t\t<div style={{ display: \"flex\", gap: \"10px\", alignItems: \"center\" }}>\r\n\t\t\t<TextField\r\n\t\t\t\tvalue={label}\r\n\t\t\t\tlabel=\"Name\"\r\n\t\t\t\tname=\"Name\"\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tonChange={(evt) => {\r\n\t\t\t\t\tsetLabel(evt.target.value);\r\n\t\t\t\t}}></TextField>\r\n\t\t\t<CurrencyField\r\n\t\t\t\tvalue={val}\r\n\t\t\t\tlabel=\"Wert\"\r\n\t\t\t\tname=\"Value\"\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\tsetValue(e.target.value);\r\n\t\t\t\t}}></CurrencyField>\r\n\t\t\t<Select\r\n\t\t\t\tlabel=\"Betrifft\"\r\n\t\t\t\tname=\"ApplicationStrategy\"\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tvalue={applicationStrategy}\r\n\t\t\t\tonChange={(evt) => {\r\n\t\t\t\t\tsetApplicationStrategy(parseInt(evt.target.value as string) as FeeTypeApplicationStrategy);\r\n\t\t\t\t}}>\r\n\t\t\t\t<MenuItem value={FeeTypeApplicationStrategy.Target}>Ziel</MenuItem>\r\n\t\t\t\t<MenuItem value={FeeTypeApplicationStrategy.AllButTarget}>Alle auer Ziel</MenuItem>\r\n\t\t\t\t<MenuItem value={FeeTypeApplicationStrategy.AutoAll}>Alle</MenuItem>\r\n\t\t\t</Select>\r\n\t\t\t<Button\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tstartIcon={<ImFloppyDisk size=\".75em\" />}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\tfeeTypesSlice.actions.create({\r\n\t\t\t\t\t\t\tvalue: parseFloat(val),\r\n\t\t\t\t\t\t\tlabel,\r\n\t\t\t\t\t\t\tapplicationStrategy,\r\n\t\t\t\t\t\t\tid: v4(),\r\n\t\t\t\t\t\t\tcreatedOn: Date.now(),\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t);\r\n\t\t\t\t\thistory.push(\"/zsku-mgmt/settings\");\r\n\t\t\t\t}}>\r\n\t\t\t\tSpeichern\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default connect()(FeeTypesCreateForm);\r\n","import { Button, Dialog, DialogActions, DialogContent, DialogTitle } from \"@material-ui/core\";\r\nimport React, { ReactElement, useState } from \"react\";\r\n\r\ninterface ConfirmationDialogAction {\r\n\tlabel: string;\r\n\thandle?: () => any;\r\n}\r\ninterface ConfirmationDialogProps {\r\n\ttitle: string;\r\n\tmessage: string;\r\n\r\n\tonConfirm?: () => any;\r\n\tonAbort?: () => any;\r\n\tcustom?: ConfirmationDialogAction[];\r\n\tcomponent: ReactElement;\r\n}\r\nconst ConfirmationDialog = ({ title, message, onConfirm, onAbort, custom, component }: ConfirmationDialogProps) => {\r\n\tconst [open, setOpen] = useState(false);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div\r\n\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tsetOpen(true);\r\n\t\t\t\t}}>\r\n\t\t\t\t{component}\r\n\t\t\t</div>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={open}\r\n\t\t\t\tonClose={() => {\r\n\t\t\t\t\tsetOpen(false);\r\n\t\t\t\t\tif (typeof onAbort === \"function\") onAbort();\r\n\t\t\t\t}}>\r\n\t\t\t\t<DialogTitle>{title}</DialogTitle>\r\n\t\t\t\t<DialogContent>{message}</DialogContent>\r\n\r\n\t\t\t\t{custom != null && custom.length > 0 ? (\r\n\t\t\t\t\t<div style={{display: \"flex\", flexDirection: \"column\"}}>\r\n\t\t\t\t\t\t{custom.map((action, idx) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tkey={`conf_act_${idx}`}\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetOpen(false);\r\n\t\t\t\t\t\t\t\t\t\ttypeof action.handle === \"function\" && action.handle();\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{action.label}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsetOpen(false);\r\n\t\t\t\t\t\t\t\tif (typeof onAbort === \"function\") onAbort();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\tAbbrechen\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsetOpen(false);\r\n\t\t\t\t\t\t\t\tif (typeof onConfirm === \"function\") onConfirm();\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\tBesttigen\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t)}\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\t);\r\n};\r\nexport { ConfirmationDialog };\r\n","import { bindActionCreators } from \"@reduxjs/toolkit\";\r\nimport React, { Component } from \"react\";\r\nimport { BsPencilSquare, BsTrash } from \"react-icons/bs\";\r\nimport { connect } from \"react-redux\";\r\nimport \"../../../css/settings.scss\";\r\nimport \"../../../entities/dataservice\";\r\nimport { FeeType, FeeTypeApplicationStrategy } from \"../../../entities/entities\";\r\nimport { AppDispatch, AppState } from \"../../../redux/store\";\r\nimport { GenericTable } from \"../../common/genericTable\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport { feeTypesAdapter, feeTypesSlice } from \"../../../redux/reducers/feeTypes\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { ConfirmationDialog } from \"../../common/confirmationDialog\";\r\n\r\ntype FeeTableState = {};\r\ninterface FeeTableProps extends RouteComponentProps {}\r\ntype LinkStateProps = { feeTypes: FeeType[] };\r\ntype LinkDispatchProps = { deleteFeeType: (id: string) => void };\r\n\r\nexport class FeeTypesTable extends Component<FeeTableProps & LinkStateProps & LinkDispatchProps, FeeTableState> {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<GenericTable<FeeType>\r\n\t\t\t\tcolumns={[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: \"col_name\",\r\n\t\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\t\tdata: \"label\",\r\n\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: \"col_value\",\r\n\t\t\t\t\t\tname: \"Wert\",\r\n\t\t\t\t\t\tdata: (r) => (r.value != null ? r.value.toFixed(2) + \" \" : \"CUSTOM\"),\r\n\t\t\t\t\t\talign: \"right\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\tsort: (a,b) => {return (a.value ?? 0) - (b.value ?? 0)}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: \"col_strategy\",\r\n\t\t\t\t\t\tname: \"Betrifft\",\r\n\t\t\t\t\t\tdata: (r) => {\r\n\t\t\t\t\t\t\tswitch (r.applicationStrategy) {\r\n\t\t\t\t\t\t\t\tcase FeeTypeApplicationStrategy.Target:\r\n\t\t\t\t\t\t\t\t\treturn \"Ziel\";\r\n\t\t\t\t\t\t\t\tcase FeeTypeApplicationStrategy.AllButTarget:\r\n\t\t\t\t\t\t\t\t\treturn \"Alle auer Ziel\";\r\n\t\t\t\t\t\t\t\tcase FeeTypeApplicationStrategy.AutoAll:\r\n\t\t\t\t\t\t\t\t\treturn \"Alle\";\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\treturn \"Niemanden\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\torderable: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: \"col_timestamp\",\r\n\t\t\t\t\t\tname: \"Erstellt am\",\r\n\t\t\t\t\t\tdata: (r) => new Date(r.createdOn ?? Date.now()).toLocaleDateString(\"de-DE\"),\r\n\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\tsort: (a,b) => a.createdOn - b.createdOn\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: \"col_actions\",\r\n\t\t\t\t\t\tname: \"Aktionen\",\r\n\t\t\t\t\t\talign: \"right\",\r\n\t\t\t\t\t\tdata: (r) => (\r\n\t\t\t\t\t\t\t<div style={{ float: \"right\", display: \"flex\" }}>\r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tthis.props.history.push(\"/zsku-mgmt/settings/feeTypes/edit/\" + r.id);\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<BsPencilSquare size=\".75em\"></BsPencilSquare>\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t<ConfirmationDialog\r\n\t\t\t\t\t\t\t\t\ttitle=\"Strafe lschen\"\r\n\t\t\t\t\t\t\t\t\tmessage={`Soll die Strafe ${r.label} wirklich gelscht werden?`}\r\n\t\t\t\t\t\t\t\t\tonConfirm={() => {\r\n\t\t\t\t\t\t\t\t\t\tif (r.id != null) this.props.deleteFeeType(r.id);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tcomponent={\r\n\t\t\t\t\t\t\t\t\t\t<IconButton color=\"primary\">\r\n\t\t\t\t\t\t\t\t\t\t\t<BsTrash size=\".75em\"></BsTrash>\r\n\t\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t}></ConfirmationDialog>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t},\r\n\t\t\t\t]}\r\n\t\t\t\trows={this.props.feeTypes.filter((ft) => ft.deleted !== true)}\r\n\t\t\t\tentriesPerPage={5}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: AppState): LinkStateProps => ({\r\n\tfeeTypes: feeTypesAdapter.getSelectors().selectAll(state.feeTypes),\r\n});\r\nconst mapDispatchToProps = (dispatch: AppDispatch): LinkDispatchProps => ({\r\n\tdeleteFeeType: bindActionCreators(feeTypesSlice.actions.delete, dispatch),\r\n});\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(FeeTypesTable));\r\n","import { Button, Paper } from \"@material-ui/core\";\r\nimport React, { Component } from \"react\";\r\nimport { FaMoneyBillWave } from \"react-icons/fa\";\r\nimport { Link, Route } from \"react-router-dom\";\r\nimport \"../../../css/settings.scss\";\r\nimport \"../../../entities/dataservice\";\r\nimport FeeTypesEditForm from \"./feeTypesEditForm\";\r\nimport FeeTypesCreateForm from \"./feeTypesCreateForm\";\r\nimport FeeTypesTable from \"./feeTypesTable\";\r\n\r\ntype FeeTypesState = {};\r\n\r\nexport class FeeTypes extends Component<{}, FeeTypesState> {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t\t<div className=\"feeTypesMain settingszsku-panel\">\r\n\t\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t\t<h1>Strafen</h1>\r\n\t\t\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t\t\t<FaMoneyBillWave size=\"4em\" style={{ backgroundColor: \"#EDB458\" }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<Link to=\"/zsku-mgmt/settings/feeTypes/addNew\" style={{ textDecoration: \"none\" }}>\r\n\t\t\t\t\t\t\t<Button variant=\"text\" color=\"primary\">\r\n\t\t\t\t\t\t\t\tHinzufgen\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"settingsContainer\">\r\n\t\t\t\t\t\t<Route path=\"/zsku-mgmt/settings/feeTypes/addNew\" component={FeeTypesCreateForm}></Route>\r\n\t\t\t\t\t\t<Route path=\"/zsku-mgmt/settings/feeTypes/edit/:id\" component={FeeTypesEditForm}></Route>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Route path=\"/zsku-mgmt/settings\" component={FeeTypesTable}></Route>\r\n\t\t\t\t</div>\r\n\t\t\t</Paper>\r\n\t\t);\r\n\t}\r\n}\r\n","import { Button, TextField } from \"@material-ui/core\";\r\nimport React, { useState } from \"react\";\r\nimport { ImFloppyDisk } from \"react-icons/im\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { v4 } from \"uuid\";\r\nimport { rolesSlice } from \"../../../redux/reducers/roles\";\r\nimport { useStoreDispatch } from \"../../../redux/store\";\r\n\r\nconst RolesCreateForm = withRouter(({ history }) => {\r\n\tconst [name, setName] = useState(\"\");\r\n\tconst dispatch = useStoreDispatch();\r\n\treturn (\r\n\t\t<div style={{ display: \"flex\", gap: \"10px\", alignItems: \"center\" }}>\r\n\t\t\t<TextField\r\n\t\t\t\tvalue={name}\r\n\t\t\t\tlabel=\"Name\"\r\n\t\t\t\tname=\"Name\"\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tonChange={(evt) => {\r\n\t\t\t\t\tsetName(evt.target.value);\r\n\t\t\t\t}}></TextField>\r\n\t\t\t<Button\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tstartIcon={<ImFloppyDisk size=\".75em\" />}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tdispatch(rolesSlice.actions.create({ name, id: v4(), createdOn: Date.now() }));\r\n\t\t\t\t\thistory.push(\"/zsku-mgmt/settings\");\r\n\t\t\t\t}}>\r\n\t\t\t\tSpeichern\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default connect()(RolesCreateForm);\r\n","import { Button, TextField } from \"@material-ui/core\";\r\nimport { bindActionCreators } from \"@reduxjs/toolkit\";\r\nimport React, { Component } from \"react\";\r\nimport { ImFloppyDisk } from \"react-icons/im\";\r\nimport { connect } from \"react-redux\";\r\nimport { RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport { Role } from \"../../../entities/entities\";\r\nimport { rolesAdapter, rolesSlice } from \"../../../redux/reducers/roles\";\r\nimport { AppDispatch, AppState } from \"../../../redux/store\";\r\n\r\ntype RolesFormState = {\r\n\tname: string;\r\n\tid: string;\r\n};\r\n\r\nconst update = rolesSlice.actions.update;\r\ntype LinkDispatchProps = {\r\n\teditRole: typeof update;\r\n};\r\n\r\ntype LinkStateProps = {\r\n\trole?: Role;\r\n};\r\n\r\ntype RouteInfo = {\r\n\tid: string;\r\n};\r\n\r\ninterface RolesFormProps extends RouteComponentProps<RouteInfo> {}\r\n\r\nclass RolesEditForm extends Component<LinkDispatchProps & LinkStateProps & RolesFormProps, RolesFormState> {\r\n\tconstructor(props: LinkDispatchProps & LinkStateProps & RolesFormProps) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tname: this.props.role?.name ?? \"\",\r\n\t\t\tid: this.props.role?.id ?? \"ERR\",\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidUpdate() {\r\n\t\tif (this.state.id !== this.props.match.params.id) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tid: this.props.role?.id ?? \"ERR\",\r\n\t\t\t\tname: this.props.role?.name ?? \"ERR\",\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div style={{ display: \"flex\", gap: \"10px\", alignItems: \"center\" }}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tvalue={this.state.name}\r\n\t\t\t\t\tlabel=\"Name\"\r\n\t\t\t\t\tname=\"Name\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tonChange={(evt) => {\r\n\t\t\t\t\t\tthis.setState({ name: evt.target.value });\r\n\t\t\t\t\t}}></TextField>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tstartIcon={<ImFloppyDisk size=\".75em\" />}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tthis.props.editRole({\r\n\t\t\t\t\t\t\tchanges: { name: this.state.name },\r\n\t\t\t\t\t\t\tid: this.state.id,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.props.history.push(\"/zsku-mgmt/settings\");\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\tSpeichern\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: RolesFormProps): LinkStateProps => ({\r\n\trole: rolesAdapter.getSelectors().selectById(state.roles, ownProps.match.params.id),\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: AppDispatch): LinkDispatchProps => ({\r\n\teditRole: bindActionCreators(rolesSlice.actions.update, dispatch),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(RolesEditForm));\r\n","import React from \"react\";\r\nimport { BsPencilSquare, BsTrash } from \"react-icons/bs\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { Role } from \"../../../entities/entities\";\r\nimport { AppState, useStoreDispatch } from \"../../../redux/store\";\r\nimport { GenericTable } from \"../../common/genericTable\";\r\nimport { rolesAdapter, rolesSlice } from \"../../../redux/reducers/roles\";\r\nimport { connect, useSelector } from \"react-redux\";\r\nimport { EntityState } from \"@reduxjs/toolkit\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { ConfirmationDialog } from \"../../common/confirmationDialog\";\r\n\r\nconst RolesTable = withRouter(({ history }) => {\r\n\tconst dispatch = useStoreDispatch();\r\n\tconst rolesCollection = useSelector<AppState>((state) => state.roles) as EntityState<Role>;\r\n\tconst roles = rolesAdapter.getSelectors().selectAll(rolesCollection);\r\n\treturn (\r\n\t\t<GenericTable<Role>\r\n\t\t\tcolumns={[\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"col_name\",\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\tdata: \"name\",\r\n\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\torderable: true,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"col_timestamp\",\r\n\t\t\t\t\tname: \"Erstellt am\",\r\n\t\t\t\t\tdata: (r) => new Date(r.createdOn ?? Date.now()).toLocaleDateString(\"de-DE\"),\r\n\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\torderable: true,\r\n\t\t\t\t\tsort: (a, b) => a.createdOn - b.createdOn,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"col_actions\",\r\n\t\t\t\t\tname: \"Aktionen\",\r\n\t\t\t\t\talign: \"right\",\r\n\t\t\t\t\tdata: (r) => (\r\n\t\t\t\t\t\t<div style={{ float: \"right\", display: \"flex\" }}>\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/zsku-mgmt/settings/roles/edit/\" + r.id);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<BsPencilSquare size=\".75em\"></BsPencilSquare>\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t<ConfirmationDialog\r\n\t\t\t\t\t\t\t\ttitle=\"Posten lschen\"\r\n\t\t\t\t\t\t\t\tmessage={`Soll der Posten ${r.name} wirklich gelscht werden?`}\r\n\t\t\t\t\t\t\t\tonConfirm={() => {\r\n\t\t\t\t\t\t\t\t\tif (r.id != null) dispatch(rolesSlice.actions.delete(r.id));\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tcomponent={\r\n\t\t\t\t\t\t\t\t\t<IconButton color=\"primary\">\r\n\t\t\t\t\t\t\t\t\t\t<BsTrash size=\".75em\"></BsTrash>\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t}></ConfirmationDialog>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t),\r\n\t\t\t\t},\r\n\t\t\t]}\r\n\t\t\trows={roles}\r\n\t\t\tentriesPerPage={5}></GenericTable>\r\n\t);\r\n});\r\n\r\nexport default connect()(RolesTable);\r\n","import Button from \"@material-ui/core/Button/Button\";\r\nimport Paper from \"@material-ui/core/Paper/Paper\";\r\nimport React from \"react\";\r\nimport { FaUserTag } from \"react-icons/fa\";\r\nimport { Link, Route } from \"react-router-dom\";\r\nimport RolesCreateForm from \"./rolesCreateForm\";\r\nimport RolesEditForm from \"./rolesEditForm\";\r\nimport RolesTable from \"./rolesTable\";\r\n\r\nconst Roles = () => {\r\n\treturn (\r\n\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t<div className=\"rolesMain settingszsku-panel\">\r\n\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t<h1>Posten</h1>\r\n\t\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t\t<FaUserTag size=\"4em\" style={{ backgroundColor: \"#7DCE82\" }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Link to=\"/zsku-mgmt/settings/roles/addNew\" style={{ textDecoration: \"none\" }}>\r\n\t\t\t\t\t\t<Button variant=\"text\" color=\"primary\">\r\n\t\t\t\t\t\t\tHinzufgen\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"settingsContainer\">\r\n\t\t\t\t\t<Route path=\"/zsku-mgmt/settings/roles/addNew\" component={RolesCreateForm}></Route>\r\n\t\t\t\t\t<Route path=\"/zsku-mgmt/settings/roles/edit/:id\" component={RolesEditForm}></Route>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Route path=\"/zsku-mgmt/settings\" component={RolesTable}></Route>\r\n\t\t\t</div>\r\n\t\t</Paper>\r\n\t);\r\n};\r\n\r\nexport default Roles;\r\n","import { IconButton } from \"@material-ui/core\";\r\nimport { EntityState } from \"@reduxjs/toolkit\";\r\nimport React from \"react\";\r\nimport { BsPencilSquare, BsTrash } from \"react-icons/bs\";\r\nimport { connect, useSelector } from \"react-redux\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { Role, User } from \"../../../entities/entities\";\r\nimport { rolesAdapter } from \"../../../redux/reducers/roles\";\r\nimport { usersAdapter, usersSlice } from \"../../../redux/reducers/users\";\r\nimport { AppState, useStoreDispatch } from \"../../../redux/store\";\r\nimport { ConfirmationDialog } from \"../../common/confirmationDialog\";\r\nimport { GenericTable } from \"../../common/genericTable\";\r\n\r\nconst UsersTable = withRouter(({ history }) => {\r\n\tconst dispatch = useStoreDispatch();\r\n\tconst usersCollection = useSelector<AppState>((state) => state.users) as EntityState<User>;\r\n\tconst rolesCollection = useSelector<AppState>((state) => state.roles) as EntityState<Role>;\r\n\tconst users = usersAdapter\r\n\t\t.getSelectors()\r\n\t\t.selectAll(usersCollection)\r\n\t\t.filter((u) => u.deleted !== true);\r\n\tconst roles = rolesAdapter.getSelectors().selectEntities(rolesCollection);\r\n\r\n\treturn (\r\n\t\t<GenericTable<User>\r\n\t\t\tcolumns={[\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"col_name\",\r\n\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\tdata: (row) => <Link to={\"/zsku-mgmt/users/\" + row.id}>{row.fullName}</Link>,\r\n\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\torderable: true,\r\n\t\t\t\t\tsort: (a, b) => a.fullName.localeCompare(b.fullName),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"col_abbreviation\",\r\n\t\t\t\t\tname: \"Abkrzung\",\r\n\t\t\t\t\tdata: \"abbreviation\",\r\n\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\torderable: true,\r\n\t\t\t\t\tsort: (a, b) => a.fullName.localeCompare(b.fullName),\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"col_roles\",\r\n\t\t\t\t\tname: \"Posten\",\r\n\t\t\t\t\tdata: (row) => {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\trow.roles\r\n\t\t\t\t\t\t\t\t.slice(0, 3)\r\n\t\t\t\t\t\t\t\t.map((r) => roles[r]?.name)\r\n\t\t\t\t\t\t\t\t.join(\", \") + (row.roles.length > 3 ? \", ...\" : \"\")\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\talign: \"left\",\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"col_timestamp\",\r\n\t\t\t\t\tname: \"Erstellt am\",\r\n\t\t\t\t\tdata: (r) => new Date(r.createdOn ?? Date.now()).toLocaleDateString(\"de-DE\"),\r\n\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\torderable: true,\r\n\t\t\t\t\tsort: (a, b) => a.createdOn - b.createdOn,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"col_actions\",\r\n\t\t\t\t\tname: \"Aktionen\",\r\n\t\t\t\t\talign: \"right\",\r\n\t\t\t\t\tdata: (r) => (\r\n\t\t\t\t\t\t<div style={{ float: \"right\", display: \"flex\" }}>\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\thistory.push(\"/zsku-mgmt/users/\" + r.id);\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<BsPencilSquare size=\".75em\"></BsPencilSquare>\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t<ConfirmationDialog\r\n\t\t\t\t\t\t\t\ttitle=\"Mitglied lschen\"\r\n\t\t\t\t\t\t\t\tmessage={`Soll das Mitglied ${r.fullName} wirklich gelscht werden?`}\r\n\t\t\t\t\t\t\t\tonConfirm={() => {\r\n\t\t\t\t\t\t\t\t\tif (r.id != null) dispatch(usersSlice.actions.delete(r.id));\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tcomponent={\r\n\t\t\t\t\t\t\t\t\t<IconButton color=\"primary\">\r\n\t\t\t\t\t\t\t\t\t\t<BsTrash size=\".75em\"></BsTrash>\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t}></ConfirmationDialog>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t),\r\n\t\t\t\t},\r\n\t\t\t]}\r\n\t\t\trows={users}\r\n\t\t\tentriesPerPage={5}></GenericTable>\r\n\t);\r\n});\r\n\r\nexport default connect()(UsersTable);\r\n","import Button from \"@material-ui/core/Button/Button\";\r\nimport Paper from \"@material-ui/core/Paper/Paper\";\r\nimport React from \"react\";\r\nimport { FaUserFriends } from \"react-icons/fa\";\r\nimport { Link, Route } from \"react-router-dom\";\r\nimport UsersTable from \"./usersTable\";\r\n\r\nconst Users = () => {\r\n\treturn (\r\n\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t<div className=\"usersMain settingszsku-panel\">\r\n\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t<h1>Mitglieder</h1>\r\n\t\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t\t<FaUserFriends size=\"4em\" style={{ backgroundColor: \"#6184D8\" }} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Link to=\"/zsku-mgmt/users/new\" style={{ textDecoration: \"none\" }}>\r\n\t\t\t\t\t\t<Button variant=\"text\" color=\"primary\">\r\n\t\t\t\t\t\t\tHinzufgen\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Route path=\"/zsku-mgmt/settings\" component={UsersTable}></Route>\r\n\t\t\t</div>\r\n\t\t</Paper>\r\n\t);\r\n};\r\n\r\nexport default Users;\r\n","import React from \"react\";\r\nimport { FeeTypes } from \"./FeeTypes/feeTypes\";\r\nimport Roles from \"./Roles/roles\";\r\nimport Users from \"./Users/users\";\r\n\r\nconst Settings = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"zsku-panel\">\r\n\t\t\t\t<Users />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"zsku-panel\">\r\n\t\t\t\t<Roles />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"zsku-panel\">\r\n\t\t\t\t<FeeTypes />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default Settings;\r\n","import {\r\n\tAvatar,\r\n\tButton,\r\n\tCard,\r\n\tCardContent,\r\n\tCardHeader,\r\n\tDialog,\r\n\tDialogActions,\r\n\tDialogContent,\r\n\tDialogTitle,\r\n\tFormControl,\r\n\tIconButton,\r\n\tMenuItem,\r\n\tPaper,\r\n\tSelect,\r\n\tTextField\r\n} from \"@material-ui/core\";\r\nimport { Dictionary } from \"@reduxjs/toolkit\";\r\nimport { useFormik } from \"formik\";\r\nimport { countBy, entries, last, maxBy } from \"lodash\";\r\nimport React, { ComponentProps, useState } from \"react\";\r\nimport { BsFillCaretLeftFill, BsFillCaretRightFill, BsFillTrashFill } from \"react-icons/bs\";\r\nimport { FaChartPie } from \"react-icons/fa\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, RouteComponentProps, withRouter } from \"react-router-dom\";\r\nimport { v4 } from \"uuid\";\r\nimport * as yup from \"yup\";\r\nimport { FeeType, FeeTypeApplicationStrategy, Game, Penalty, Role, User } from \"../../entities/entities\";\r\nimport { feeTypesAdapter } from \"../../redux/reducers/feeTypes\";\r\nimport { gameSelectors, gamesSlice } from \"../../redux/reducers/games\";\r\nimport { penaltiesAdapter, penaltiesSlice } from \"../../redux/reducers/penalties\";\r\nimport { transactionsAdapter, transactionsSlice } from \"../../redux/reducers/transactions\";\r\nimport { usersAdapter } from \"../../redux/reducers/users\";\r\nimport { AppDispatch, AppState } from \"../../redux/store\";\r\nimport { ConfirmationDialog } from \"../common/confirmationDialog\";\r\nimport { Currency, formatCurrency } from \"../common/currency\";\r\nimport { CurrencyField } from \"../common/currencyField\";\r\nimport { GenericTable } from \"../common/genericTable\";\r\nconst NoCurrentGame = () => {\r\n\tconst dispatch = useDispatch<AppDispatch>();\r\n\treturn (\r\n\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t<h1>Kein aktuelles Spiel</h1>\r\n\t\t\t<Button\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tdispatch(gamesSlice.actions.createGame());\r\n\t\t\t\t}}>\r\n\t\t\t\tNeues Spiel\r\n\t\t\t</Button>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\ninterface GroupedPenaltyProps extends ComponentProps<\"div\"> {\r\n\tpenalties: Penalty[];\r\n\teditable?: boolean;\r\n\tuser?: string;\r\n}\r\nconst GroupedPenalties = ({ penalties, editable, user, ...other }: GroupedPenaltyProps) => {\r\n\ttype GroupedPenalty = [string, { count: number; sum: number; penalties: Penalty[] }];\r\n\tconst dispatch = useDispatch();\r\n\tconst feeTypes = useSelector<AppState>((state) =>\r\n\t\tfeeTypesAdapter.getSelectors().selectEntities(state.feeTypes)\r\n\t) as Dictionary<FeeType>;\r\n\tconst openGame = useSelector<AppState>(gameSelectors.openGame) as Game;\r\n\tconst groupedPenalties: GroupedPenalty[] = entries(\r\n\t\tpenalties.reduce<{\r\n\t\t\t[feeTypeId: string]: { count: number; sum: number; penalties: Penalty[] };\r\n\t\t}>((agg, next) => {\r\n\t\t\tif (agg[next.feeTypeId] == null) {\r\n\t\t\t\tagg[next.feeTypeId] = { count: 0, sum: 0, penalties: [] };\r\n\t\t\t}\r\n\t\t\tagg[next.feeTypeId].count++;\r\n\t\t\tagg[next.feeTypeId].sum += next.value;\r\n\t\t\tagg[next.feeTypeId].penalties.push(next);\r\n\t\t\treturn agg;\r\n\t\t}, {})\r\n\t);\r\n\treturn (\r\n\t\t<div {...other}>\r\n\t\t\t<GenericTable<GroupedPenalty>\r\n\t\t\t\tcolumns={[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: \"col_feetypename\",\r\n\t\t\t\t\t\tdata: (r) => feeTypes[r[0]]?.label ?? \"N/A\",\r\n\t\t\t\t\t\tname: \"Strafe\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: \"col_count\",\r\n\t\t\t\t\t\tdata: (r) =>\r\n\t\t\t\t\t\t\teditable && user ? (\r\n\t\t\t\t\t\t\t\t<div style={{ display: \"flex\", alignItems: \"center\" }}>\r\n\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst penalty = penalties.find((p) => p.feeTypeId === r[0]);\r\n\t\t\t\t\t\t\t\t\t\t\tif (penalty == null) return;\r\n\t\t\t\t\t\t\t\t\t\t\tdispatch(penaltiesSlice.actions.delete(penalty.id));\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<BsFillCaretLeftFill />\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t\t<span>{r[1].count.toString()}</span>\r\n\t\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\t\tpenaltiesSlice.actions.create({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcreatedOn: Date.now(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfeeTypeId: r[0],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tgameId: openGame.id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid: v4(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuserId: user,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: feeTypes[r[0]]?.value ?? 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<BsFillCaretRightFill />\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\tr[1].count.toString()\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\tname: \"Anzahl\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\tsort: (a, b) => a[1].count - b[1].count,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: \"col_sum\",\r\n\t\t\t\t\t\tdata: (r) => <Currency val={r[1].sum} style={{ margin: 0 }}></Currency>,\r\n\t\t\t\t\t\tname: \"Summe\",\r\n\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\tsort: (a, b) => a[1].sum - b[1].sum,\r\n\t\t\t\t\t},\r\n\t\t\t\t]}\r\n\t\t\t\trows={groupedPenalties}\r\n\t\t\t\tentriesPerPage={10}></GenericTable>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst PlayerCard = ({\r\n\tplayer,\r\n\tgame,\r\n\topenAddPenalty,\r\n}: {\r\n\tplayer: User;\r\n\tgame: Game;\r\n\topenAddPenalty: (player: User) => any;\r\n}) => {\r\n\tconst dispatch = useDispatch<AppDispatch>();\r\n\tconst penalties = useSelector<AppState>(gameSelectors.playerPenalties(game.id, player.id)) as Penalty[];\r\n\tconst [showStats, setShowStats] = useState(false);\r\n\tconst role = useSelector<AppState>((state) => state.roles.entities[player.roles.find(Boolean) ?? \"\"]) as Role;\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Card\r\n\t\t\t\tonClick={() => openAddPenalty(player)}\r\n\t\t\t\televation={2}\r\n\t\t\t\tstyle={{ borderRadius: \"1em\", maxWidth: \"750px\", cursor: \"pointer\" }}>\r\n\t\t\t\t<CardHeader\r\n\t\t\t\t\tavatar={<Avatar style={{ backgroundColor: player.color }}>{player.abbreviation}</Avatar>}\r\n\t\t\t\t\taction={\r\n\t\t\t\t\t\t<div onClick={(e) => e.stopPropagation()}>\r\n\t\t\t\t\t\t\t{penalties.length > 0 ? (\r\n\t\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\t\ttitle=\"Details anzeigen\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetShowStats(!showStats);\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t<FaChartPie size=\".85em\" />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t\t\t<ConfirmationDialog\r\n\t\t\t\t\t\t\t\ttitle=\"Spieler entfernen\"\r\n\t\t\t\t\t\t\t\tmessage={`Soll ${player.fullName} aus dem Spiel entfernt werden? Alle Strafen fr diesen Spieler werden zurckgesetzt.`}\r\n\t\t\t\t\t\t\t\tonConfirm={() => {\r\n\t\t\t\t\t\t\t\t\tdispatch(penaltiesSlice.actions.deleteMultiple(penalties.map((p) => p.id)));\r\n\t\t\t\t\t\t\t\t\tdispatch(gamesSlice.actions.removePlayerFromGame({ userId: player.id }));\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tcomponent={\r\n\t\t\t\t\t\t\t\t\t<IconButton title=\"Spieler entfernen\">\r\n\t\t\t\t\t\t\t\t\t\t<BsFillTrashFill color=\"red\" size=\".85em\" />\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsubheader={role?.name ?? \"Kein Posten\"}\r\n\t\t\t\t\ttitle={player.fullName}>\r\n\t\t\t\t\t<h4>{player.fullName}</h4>\r\n\t\t\t\t</CardHeader>\r\n\t\t\t\t{showStats && penalties.length > 0 ? (\r\n\t\t\t\t\t<CardContent>\r\n\t\t\t\t\t\t<GroupedPenalties\r\n\t\t\t\t\t\t\tpenalties={penalties}\r\n\t\t\t\t\t\t\tuser={player.id}\r\n\t\t\t\t\t\t\teditable={true}\r\n\t\t\t\t\t\t\tonClick={(e) => e.stopPropagation()}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</CardContent>\r\n\t\t\t\t) : null}\r\n\t\t\t\t<CardContent>\r\n\t\t\t\t\t<hr style={{ borderTop: \"1px solid #ddd\", borderBottom: \"0\" }}></hr>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\tdisplay: \"grid\",\r\n\t\t\t\t\t\t\tgridTemplateColumns: \"auto 1px auto\",\r\n\t\t\t\t\t\t\talignItems: \"center\",\r\n\t\t\t\t\t\t\tmarginBottom: 0,\r\n\t\t\t\t\t\t\tmarginTop: \".75em\",\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<div style={{ width: \"100%\", textAlign: \"center\" }}>\r\n\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tmargin: \".5em\",\r\n\t\t\t\t\t\t\t\t\tfontWeight: \"bold\",\r\n\t\t\t\t\t\t\t\t\tcolor: \"#888\",\r\n\t\t\t\t\t\t\t\t\ttextTransform: \"uppercase\",\r\n\t\t\t\t\t\t\t\t\tletterSpacing: \".1em\",\r\n\t\t\t\t\t\t\t\t\tfontSize: \"small\",\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tStrafen\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<p style={{ margin: \".25em\", fontWeight: \"bold\", fontSize: \"large\" }}>{penalties.length}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div style={{ borderRight: \"1px solid #ddd\", height: \"3em\", margin: \"0\" }}></div>\r\n\t\t\t\t\t\t<div style={{ width: \"100%\", textAlign: \"center\" }}>\r\n\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tmargin: \".25em\",\r\n\t\t\t\t\t\t\t\t\tfontWeight: \"bold\",\r\n\t\t\t\t\t\t\t\t\tcolor: \"#888\",\r\n\t\t\t\t\t\t\t\t\ttextTransform: \"uppercase\",\r\n\t\t\t\t\t\t\t\t\tletterSpacing: \".1em\",\r\n\t\t\t\t\t\t\t\t\tfontSize: \"small\",\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\tBetrag\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<Currency\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tmargin: \".25em\",\r\n\t\t\t\t\t\t\t\t\tfontWeight: \"bold\",\r\n\t\t\t\t\t\t\t\t\tfontSize: \"large\",\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tval={penalties.reduce((agg, next) => agg + next.value, 0)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</CardContent>\r\n\t\t\t</Card>\r\n\t\t</div>\r\n\t);\r\n};\r\ntype PenaltyDialogType = {\r\n\tpenaltyModalOpen: boolean;\r\n\tsetPenaltyModalOpen: (open: boolean) => any;\r\n\tpenaltyModalPlayer: User;\r\n\tgame: Game;\r\n};\r\ntype AddPenaltyDialogFormValues = {\r\n\tfeeType: string;\r\n\tvalue: number | undefined;\r\n\tquantity: number;\r\n};\r\n\r\nconst AddPenaltyDialog = ({ penaltyModalOpen, setPenaltyModalOpen, penaltyModalPlayer, game }: PenaltyDialogType) => {\r\n\tconst dispatch = useDispatch<AppDispatch>();\r\n\tconst validationSchema = yup.object({\r\n\t\tfeeType: yup.string().required(),\r\n\t\tvalue: yup.number().positive().required(),\r\n\t\tquantity: yup.number().min(0).required(),\r\n\t});\r\n\tconst formik = useFormik<AddPenaltyDialogFormValues>({\r\n\t\tinitialValues: {\r\n\t\t\tfeeType: \"\",\r\n\t\t\tvalue: undefined,\r\n\t\t\tquantity: 1,\r\n\t\t},\r\n\t\tvalidationSchema,\r\n\t\tonSubmit: (values) => {\r\n\t\t\tconst feeType = feeTypes.find((ft) => ft.id === values.feeType);\r\n\t\t\tif (feeType == null) return;\r\n\t\t\tconst penalties: Penalty[] = [];\r\n\t\t\tfor (let i = 0; i < values.quantity; i++) {\r\n\t\t\t\tconst targets: string[] = [];\r\n\t\t\t\tif (feeType.applicationStrategy === FeeTypeApplicationStrategy.AutoAll) targets.push(...game.users);\r\n\t\t\t\telse if (feeType.applicationStrategy === FeeTypeApplicationStrategy.AllButTarget)\r\n\t\t\t\t\ttargets.push(...game.users.filter((u) => u !== penaltyModalPlayer.id));\r\n\t\t\t\telse if (feeType.applicationStrategy === FeeTypeApplicationStrategy.Target)\r\n\t\t\t\t\ttargets.push(penaltyModalPlayer.id);\r\n\t\t\t\tpenalties.push(\r\n\t\t\t\t\t...targets.map((target) => ({\r\n\t\t\t\t\t\tid: v4(),\r\n\t\t\t\t\t\tcreatedOn: Date.now(),\r\n\t\t\t\t\t\tfeeTypeId: feeType.id,\r\n\t\t\t\t\t\tgameId: game.id,\r\n\t\t\t\t\t\tuserId: target,\r\n\t\t\t\t\t\tvalue: parseFloat(values.value?.toString() ?? \"0\"),\r\n\t\t\t\t\t}))\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tdispatch(penaltiesSlice.actions.createMultiple(penalties));\r\n\t\t\tformik.resetForm({\r\n\t\t\t\tvalues: { feeType: \"\", quantity: 1, value: undefined },\r\n\t\t\t\ttouched: { feeType: false, quantity: false, value: false },\r\n\t\t\t\terrors: { feeType: undefined, quantity: undefined, value: undefined },\r\n\t\t\t});\r\n\t\t\tsetPenaltyModalOpen(false);\r\n\t\t},\r\n\t});\r\n\tconst feeTypes = useSelector<AppState>((state) =>\r\n\t\tfeeTypesAdapter.getSelectors().selectAll(state.feeTypes)\r\n\t) as FeeType[];\r\n\treturn (\r\n\t\t<Dialog open={penaltyModalOpen} onClose={() => setPenaltyModalOpen(false)} maxWidth=\"sm\" fullWidth={true}>\r\n\t\t\t<DialogTitle>Strafe fr {penaltyModalPlayer?.fullName ?? \"?\"}</DialogTitle>\r\n\t\t\t<DialogContent>\r\n\t\t\t\t<form onSubmit={formik.handleSubmit}>\r\n\t\t\t\t\t<div className=\"zsku-keyValueGrid\">\r\n\t\t\t\t\t\t<h4>Strafe</h4>\r\n\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tid=\"feeType\"\r\n\t\t\t\t\t\t\t\tname=\"feeType\"\r\n\t\t\t\t\t\t\t\terror={formik.touched.feeType && Boolean(formik.errors.feeType)}\r\n\t\t\t\t\t\t\t\tvalue={formik.values.feeType}\r\n\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\tformik.setFieldValue(\"feeType\", e.target.value);\r\n\t\t\t\t\t\t\t\t\tconst feeType = feeTypes.find((ft) => ft.id === e.target.value);\r\n\t\t\t\t\t\t\t\t\tformik.setFieldValue(\"value\", feeType?.value ?? 0);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\trenderValue={() => {\r\n\t\t\t\t\t\t\t\t\treturn <p>{feeTypes.find((ft) => ft.id === formik.values.feeType)?.label}</p>;\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t{feeTypes\r\n\t\t\t\t\t\t\t\t\t.filter(\r\n\t\t\t\t\t\t\t\t\t\t(ft) =>\r\n\t\t\t\t\t\t\t\t\t\t\tft.applicationStrategy !== FeeTypeApplicationStrategy.AutoAll &&\r\n\t\t\t\t\t\t\t\t\t\t\tft.deleted !== true\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t.sort((a, b) => a.label.localeCompare(b.label))\r\n\t\t\t\t\t\t\t\t\t.map((ft) => (\r\n\t\t\t\t\t\t\t\t\t\t<MenuItem key={ft.id} value={ft.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t{ft.label}\r\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t<h4>Betrag</h4>\r\n\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t<CurrencyField\r\n\t\t\t\t\t\t\t\tdisabled={(() => {\r\n\t\t\t\t\t\t\t\t\tconst feeType = feeTypes.find((ft) => ft.id === formik.values.feeType);\r\n\t\t\t\t\t\t\t\t\treturn feeType == null || feeType.value != null;\r\n\t\t\t\t\t\t\t\t})()}\r\n\t\t\t\t\t\t\t\terror={formik.touched.value && Boolean(formik.errors.value)}\r\n\t\t\t\t\t\t\t\thelperText={formik.touched.value && formik.errors.value}\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tvalue={formik.values.value}\r\n\t\t\t\t\t\t\t\tname=\"Value\"\r\n\t\t\t\t\t\t\t\tid=\"value\"\r\n\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\tformik.setFieldValue(\"value\", (e.target as any).value)\r\n\t\t\t\t\t\t\t\t}></CurrencyField>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t<h4>Anzahl</h4>\r\n\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tid=\"quantity\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tdisabled={feeTypes.find((ft) => ft.id === formik.values.feeType)?.value == null}\r\n\t\t\t\t\t\t\t\tonChange={formik.handleChange}\r\n\t\t\t\t\t\t\t\tvalue={formik.values.quantity}\r\n\t\t\t\t\t\t\t\tInputProps={{ inputProps: { min: 1 } }}></TextField>\r\n\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button onClick={() => setPenaltyModalOpen(false)}>Abort</Button>\r\n\t\t\t\t\t\t<Button color=\"primary\" type=\"submit\">\r\n\t\t\t\t\t\t\tBesttigen\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t</form>\r\n\t\t\t</DialogContent>\r\n\t\t</Dialog>\r\n\t);\r\n};\r\n\r\nconst ExistingCurrentGame = ({ game }: { game: Game }) => {\r\n\tconst notParticipating = useSelector<AppState>((state) =>\r\n\t\tstate.users.ids\r\n\t\t\t.filter((u) => game.users.findIndex((p) => p === u) < 0)\r\n\t\t\t.map((u) => state.users.entities[u])\r\n\t\t\t.filter((u) => u != null && u.deleted !== true)\r\n\t) as User[];\r\n\tconst players = useSelector<AppState>(gameSelectors.players(game.id)) as User[];\r\n\tconst penalties = useSelector<AppState>(gameSelectors.penalties(game.id)) as Penalty[];\r\n\tconst autoFeeTypes = useSelector<AppState>((state) =>\r\n\t\tfeeTypesAdapter\r\n\t\t\t.getSelectors()\r\n\t\t\t.selectAll(state.feeTypes)\r\n\t\t\t.filter((ft) => ft.applicationStrategy === FeeTypeApplicationStrategy.AutoAll)\r\n\t) as FeeType[];\r\n\tconst transactionCount = useSelector<AppState>((state) =>\r\n\t\ttransactionsAdapter.getSelectors().selectTotal(state.transactions)\r\n\t) as number;\r\n\r\n\tconst [penaltyModalOpen, setPenaltyModalOpen] = useState(false);\r\n\tconst [penaltyModalPlayer, setPenaltyModalPlayer] = useState((null as unknown) as User);\r\n\r\n\tconst openAddPenalty = (player: User) => {\r\n\t\tsetPenaltyModalPlayer(player);\r\n\t\tsetPenaltyModalOpen(true);\r\n\t};\r\n\tconst dispatch = useDispatch<AppDispatch>();\r\n\tconst finishGame = (withAutoPenalties: boolean) => {\r\n\t\tif (penalties.length === 0 && autoFeeTypes.length === 0) {\r\n\t\t\tdispatch(gamesSlice.actions.abortGame());\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdispatch(gamesSlice.actions.finishGame());\r\n\t\tfor (const player of players) {\r\n\t\t\tconst userPenalties = [...penalties.filter((pen) => pen.userId === player.id)];\r\n\t\t\tif (withAutoPenalties) {\r\n\t\t\t\tconst autoPenalties = autoFeeTypes.map((autoFee) => ({\r\n\t\t\t\t\tid: v4(),\r\n\t\t\t\t\tcreatedOn: Date.now(),\r\n\t\t\t\t\tfeeTypeId: autoFee.id,\r\n\t\t\t\t\tgameId: game.id,\r\n\t\t\t\t\tuserId: player.id,\r\n\t\t\t\t\tvalue: autoFee.value ?? 0,\r\n\t\t\t\t}));\r\n\t\t\t\tdispatch(penaltiesSlice.actions.createMultiple(autoPenalties));\r\n\t\t\t\tuserPenalties.push(...autoPenalties);\r\n\t\t\t}\r\n\t\t\tconst value = userPenalties.reduce((agg, next) => agg + next.value, 0);\r\n\t\t\tif (userPenalties.length === 0 || value === 0) continue;\r\n\t\t\tconst transactionId = v4();\r\n\t\t\tdispatch(\r\n\t\t\t\ttransactionsSlice.actions.create({\r\n\t\t\t\t\taffectsGlobalLedger: false,\r\n\t\t\t\t\taffectsUserLedger: true,\r\n\t\t\t\t\tcreatedOn: Date.now(),\r\n\t\t\t\t\tdescription: \"Penalties from \" + game.name,\r\n\t\t\t\t\tid: transactionId,\r\n\t\t\t\t\tname: \"TRANS-\" + (transactionCount + 1).toString().padStart(4, \"0\"),\r\n\t\t\t\t\tuserId: player.id,\r\n\t\t\t\t\tvalue: -value,\r\n\t\t\t\t\tpenalties: userPenalties.map((up) => up.id),\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t<h1>{game.name}</h1>\r\n\t\t\t\t<ConfirmationDialog\r\n\t\t\t\t\ttitle=\"Spiel abbrechen\"\r\n\t\t\t\t\tmessage=\"Spiel wirklich abbrechen? Alle bisher verteilten Strafen werden gelscht.\"\r\n\t\t\t\t\tonConfirm={() => {\r\n\t\t\t\t\t\tdispatch(gamesSlice.actions.abortGame());\r\n\t\t\t\t\t\tdispatch(penaltiesSlice.actions.deleteMultiple(penalties.map((p) => p.id)));\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tcomponent={<Button variant=\"text\">Abbrechen</Button>}></ConfirmationDialog>\r\n\t\t\t\t<ConfirmationDialog\r\n\t\t\t\t\ttitle=\"Spiel Abschlieen\"\r\n\t\t\t\t\tmessage=\"Spiel wirklich abschlieen? Alle bisher verteilten Strafen werden den Kontostnden der Spieler angerechnet.\"\r\n\t\t\t\t\tcustom={[\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"Abbrechen\",\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"Abschlieen (keine Standard-Strafen)\",\r\n\t\t\t\t\t\t\thandle: () => {\r\n\t\t\t\t\t\t\t\tfinishGame(false);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tlabel: \"Abschlieen (Standard-Strafen)\",\r\n\t\t\t\t\t\t\thandle: () => {\r\n\t\t\t\t\t\t\t\tfinishGame(true);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t]}\r\n\t\t\t\t\tcomponent={\r\n\t\t\t\t\t\t<Button variant=\"outlined\" style={{ color: \"red\", borderColor: \"red\" }}>\r\n\t\t\t\t\t\t\tSpiel Speichern\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t}></ConfirmationDialog>\r\n\t\t\t</div>\r\n\t\t\t<div style={{ margin: \"0em 1em 1em\", alignItems: \"center\" }}>\r\n\t\t\t\t{notParticipating.length > 0 ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<h4 style={{ marginBottom: \".5em\" }}>Spieler hinzufgen</h4>\r\n\t\t\t\t\t\t<div style={{ display: \"flex\", columnGap: \"1em\" }}>\r\n\t\t\t\t\t\t\t{notParticipating.map((u) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\t\t\t\tkey={u.id}\r\n\t\t\t\t\t\t\t\t\t\ttitle={u.fullName}\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: u.color }}\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\tdispatch(gamesSlice.actions.addPlayerToOpenGame({ userId: u.id }));\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t{u.abbreviation}\r\n\t\t\t\t\t\t\t\t\t</Avatar>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : null}\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tdisplay: \"grid\",\r\n\t\t\t\t\t\tgridTemplateColumns: \"repeat(auto-fit, minmax(300px, 1fr))\",\r\n\t\t\t\t\t\tgap: \"2em\",\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t{players.map((p) => (\r\n\t\t\t\t\t\t<PlayerCard game={game} player={p} key={p.id} openAddPenalty={openAddPenalty} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<AddPenaltyDialog\r\n\t\t\t\tpenaltyModalOpen={penaltyModalOpen}\r\n\t\t\t\tpenaltyModalPlayer={penaltyModalPlayer}\r\n\t\t\t\tsetPenaltyModalOpen={setPenaltyModalOpen}\r\n\t\t\t\tgame={game}></AddPenaltyDialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst CurrentGameForm = () => {\r\n\tconst activeGame = useSelector<AppState>(gameSelectors.openGame) as Game;\r\n\treturn (\r\n\t\t<div className=\"zsku-panel\">\r\n\t\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t\t{activeGame == null ? <NoCurrentGame /> : <ExistingCurrentGame game={activeGame} />}\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\ntype ClosedGameRouterParams = {\r\n\tgameId: string;\r\n};\r\nconst ClosedGameForm = withRouter((router: RouteComponentProps<ClosedGameRouterParams>) => {\r\n\tconst game = useSelector<AppState>((state) => gameSelectors.gameById(state, router.match.params.gameId)) as Game;\r\n\tconst penalties = useSelector<AppState>(gameSelectors.penalties(game?.id)) as Penalty[];\r\n\tconst feeTypes = useSelector<AppState>((state) =>\r\n\t\tfeeTypesAdapter.getSelectors().selectEntities(state.feeTypes)\r\n\t) as Dictionary<FeeType>;\r\n\tconst players = useSelector<AppState>((state) => game?.users.map((id) => state.users.entities[id])) as User[];\r\n\treturn (\r\n\t\t<div className=\"zsku-panel\">\r\n\t\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t<h1>{game?.name ?? \"Spiel nicht gefunden\"}</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"zsku-keyValueGrid\">\r\n\t\t\t\t\t<h4>Gespielt am</h4>\r\n\t\t\t\t\t<p>{new Date(game?.createdOn).toLocaleDateString(\"de-DE\")}</p>\r\n\r\n\t\t\t\t\t<h4>Strafen</h4>\r\n\t\t\t\t\t<p>{penalties.length}</p>\r\n\r\n\t\t\t\t\t<h4>Gesamtbetrag</h4>\r\n\t\t\t\t\t<Currency\r\n\t\t\t\t\t\tval={penalties.reduce((agg, next) => agg + next.value, 0)}\r\n\t\t\t\t\t\tstyle={{ margin: 0 }}></Currency>\r\n\t\t\t\t\t<h4>Durchschnitt</h4>\r\n\t\t\t\t\t<Currency\r\n\t\t\t\t\t\tval={penalties.reduce((agg, next) => agg + next.value, 0) / players.length}\r\n\t\t\t\t\t\tstyle={{ margin: 0 }}></Currency>\r\n\t\t\t\t</div>\r\n\t\t\t\t{players?.length > 0 ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<h3>Mitspieler</h3>\r\n\t\t\t\t\t\t<GenericTable<User>\r\n\t\t\t\t\t\t\tcolumns={[\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tid: \"col_name\",\r\n\t\t\t\t\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\t\t\t\t\tdata: (row) => <Link to={\"/zsku-mgmt/users/\" + row.id}>{row.fullName}</Link>,\r\n\t\t\t\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\t\t\t\tsort: (a, b) => a.fullName.localeCompare(b.fullName),\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tid: \"col_penaltycount\",\r\n\t\t\t\t\t\t\t\t\tname: \"Strafen\",\r\n\t\t\t\t\t\t\t\t\tdata: (r) => (\r\n\t\t\t\t\t\t\t\t\t\t<p style={{ margin: 0 }}>{penalties.filter((p) => p.userId === r.id).length}</p>\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\t\t\t\tsort: (a, b) => {\r\n\t\t\t\t\t\t\t\t\t\tconst aCount = penalties.filter((p) => p.userId === a.id).length;\r\n\t\t\t\t\t\t\t\t\t\tconst bCount = penalties.filter((p) => p.userId === b.id).length;\r\n\t\t\t\t\t\t\t\t\t\treturn aCount - bCount;\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tid: \"col_penaltysum\",\r\n\t\t\t\t\t\t\t\t\tname: \"Gesamtbetrag\",\r\n\t\t\t\t\t\t\t\t\tdata: (r) => (\r\n\t\t\t\t\t\t\t\t\t\t<Currency\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ margin: 0 }}\r\n\t\t\t\t\t\t\t\t\t\t\tval={penalties\r\n\t\t\t\t\t\t\t\t\t\t\t\t.filter((p) => p.userId === r.id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.reduce((agg, next) => agg + next.value, 0)}></Currency>\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\t\t\t\tsort: (a, b) => {\r\n\t\t\t\t\t\t\t\t\t\tconst aSum = penalties\r\n\t\t\t\t\t\t\t\t\t\t\t.filter((p) => p.userId === a.id)\r\n\t\t\t\t\t\t\t\t\t\t\t.reduce((agg, next) => agg + next.value, 0);\r\n\t\t\t\t\t\t\t\t\t\tconst bSum = penalties\r\n\t\t\t\t\t\t\t\t\t\t\t.filter((p) => p.userId === b.id)\r\n\t\t\t\t\t\t\t\t\t\t\t.reduce((agg, next) => agg + next.value, 0);\r\n\t\t\t\t\t\t\t\t\t\treturn aSum - bSum;\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tid: \"col_penaltyfav\",\r\n\t\t\t\t\t\t\t\t\tname: \"Am hufigsten\",\r\n\t\t\t\t\t\t\t\t\tdata: (r) => (\r\n\t\t\t\t\t\t\t\t\t\t<p style={{ margin: 0 }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst userPenalties = penalties.filter((p) => p.userId === r.id);\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (userPenalties.length === 0) return \"Keine Strafe\";\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst [feeTypeId] =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmaxBy(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tentries(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcountBy(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpenalties.filter((p) => p.userId === r.id),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(p) => p.feeTypeId\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(entry) => last(entry)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t) ?? [];\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (feeTypeId == null) return \"N/A\";\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst feeType = feeTypes[feeTypeId];\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (feeType == null) return \"N/A\";\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfeeType.label +\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t` (${formatCurrency(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserPenalties\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.filter((p) => p.feeTypeId === feeType.id)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.reduce((agg, next) => agg + next.value, 0)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)})`\r\n\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t})()}\r\n\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\talign: \"left\",\r\n\t\t\t\t\t\t\t\t\torderable: false,\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\trows={players ?? []}\r\n\t\t\t\t\t\t\tentriesPerPage={players?.length ?? 0}></GenericTable>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : null}\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nconst ClosedGamesList = () => {\r\n\tconst closedGames = (useSelector<AppState>(gameSelectors.closedGames) as Game[]).sort(\r\n\t\t(a, b) => b.createdOn - a.createdOn\r\n\t);\r\n\tconst penalties = useSelector<AppState>((state) =>\r\n\t\tpenaltiesAdapter.getSelectors().selectAll(state.penalties)\r\n\t) as Penalty[];\r\n\tconst users = useSelector<AppState>((state) =>\r\n\t\tusersAdapter.getSelectors().selectEntities(state.users)\r\n\t) as Dictionary<User>;\r\n\treturn (\r\n\t\t<div className=\"zsku-panel\">\r\n\t\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t<h1>Beendete Spiele</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<GenericTable<Game>\r\n\t\t\t\t\t\tcolumns={[\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: \"col_name\",\r\n\t\t\t\t\t\t\t\tname: \"Name\",\r\n\t\t\t\t\t\t\t\tdata: (r) => <Link to={\"/zsku-mgmt/games/\" + r.id}>{r.name}</Link>,\r\n\t\t\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\t\t\tsort: (a, b) => a.name.localeCompare(b.name),\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: \"col_users\",\r\n\t\t\t\t\t\t\t\tname: \"Mitspieler\",\r\n\t\t\t\t\t\t\t\tdata: (r) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<div style={{ display: \"flex\", flexWrap: \"wrap\", gap: \"10px\" }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{(r.users.map((u) => users[u]).filter(Boolean) as User[])\r\n\t\t\t\t\t\t\t\t\t\t\t\t.sort((a, b) => a.abbreviation.localeCompare(b.abbreviation, \"de-DE\"))\r\n\t\t\t\t\t\t\t\t\t\t\t\t.map((u) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Link to={\"users/\" + (u?.id ?? \"0\")} key={v4()}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={v4()}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontWeight: \"normal\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: u.color,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{u.abbreviation}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Avatar>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: \"col_totalpenalties\",\r\n\t\t\t\t\t\t\t\tname: \"Strafen (Anzahl)\",\r\n\t\t\t\t\t\t\t\tdata: (r) => penalties.filter((p) => p.gameId === r.id).length.toString(),\r\n\t\t\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\t\t\tsort: (a, b) => {\r\n\t\t\t\t\t\t\t\t\tconst aCount = penalties.filter((p) => p.gameId === a.id).length;\r\n\t\t\t\t\t\t\t\t\tconst bCount = penalties.filter((p) => p.gameId === b.id).length;\r\n\t\t\t\t\t\t\t\t\treturn aCount - bCount;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: \"col_sumpenalties\",\r\n\t\t\t\t\t\t\t\tname: \"Strafen (Summe)\",\r\n\t\t\t\t\t\t\t\tdata: (r) =>\r\n\t\t\t\t\t\t\t\t\tformatCurrency(\r\n\t\t\t\t\t\t\t\t\t\tpenalties.filter((p) => p.gameId === r.id).reduce((agg, p) => agg + p.value, 0)\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\t\t\tsort: (a, b) => {\r\n\t\t\t\t\t\t\t\t\tconst aSum = penalties\r\n\t\t\t\t\t\t\t\t\t\t.filter((p) => p.gameId === a.id)\r\n\t\t\t\t\t\t\t\t\t\t.reduce((agg, p) => agg + p.value, 0);\r\n\t\t\t\t\t\t\t\t\tconst bSum = penalties\r\n\t\t\t\t\t\t\t\t\t\t.filter((p) => p.gameId === b.id)\r\n\t\t\t\t\t\t\t\t\t\t.reduce((agg, p) => agg + p.value, 0);\r\n\t\t\t\t\t\t\t\t\treturn aSum - bSum;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tid: \"col_date\",\r\n\t\t\t\t\t\t\t\tname: \"Gespielt am\",\r\n\t\t\t\t\t\t\t\tdata: (r) => new Date(r.createdOn).toLocaleDateString(\"de-DE\"),\r\n\t\t\t\t\t\t\t\torderable: true,\r\n\t\t\t\t\t\t\t\tsort: (a, b) => a.createdOn - b.createdOn,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\trows={closedGames}\r\n\t\t\t\t\t\tentriesPerPage={10}></GenericTable>\r\n\t\t\t\t</div>\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst Games = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<CurrentGameForm />\r\n\t\t\t<ClosedGamesList />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport { ClosedGameForm, GroupedPenalties };\r\nexport default Games;\r\n","import {\r\n\tAvatar,\r\n\tButton,\r\n\tChip,\r\n\tFormControl,\r\n\tMenuItem,\r\n\tOutlinedInput,\r\n\tPaper,\r\n\tSelect,\r\n\tTextField\r\n} from \"@material-ui/core\";\r\nimport { EntityState } from \"@reduxjs/toolkit\";\r\nimport { useFormik } from \"formik\";\r\nimport React from \"react\";\r\nimport { FaMoneyBillWave, FaUser } from \"react-icons/fa\";\r\nimport { ImFloppyDisk } from \"react-icons/im\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, RouteComponentProps, useHistory, withRouter } from \"react-router-dom\";\r\nimport { v4 } from \"uuid\";\r\nimport * as yup from \"yup\";\r\nimport { Penalty, Role, Transaction, User } from \"../../entities/entities\";\r\nimport { penaltiesAdapter } from \"../../redux/reducers/penalties\";\r\nimport { usersAdapter, usersSlice } from \"../../redux/reducers/users\";\r\nimport { AppDispatch, AppState } from \"../../redux/store\";\r\nimport { Balance, Currency } from \"../common/currency\";\r\nimport { GroupedPenalties } from \"../games/games\";\r\nimport { TransactionTable } from \"../ledgers/transactionsTable\";\r\ninterface RouterProps {\r\n\tuserId: string;\r\n}\r\n\r\ninterface UserFormValues {\r\n\tfullName: string;\r\n\tcolor: string;\r\n\troles: string[];\r\n}\r\n\r\nconst UserForm = withRouter((router: RouteComponentProps<RouterProps>) => {\r\n\tconst user = useSelector<AppState>((state) =>\r\n\t\tusersAdapter.getSelectors<AppState>((state) => state.users).selectById(state, router.match.params.userId)\r\n\t) as User;\r\n\tconst roles = useSelector<AppState>((state) => state.roles) as EntityState<Role>;\r\n\tconst transactions = useSelector<AppState>((state) =>\r\n\t\tstate.transactions.ids\r\n\t\t\t.map((tid) => state.transactions.entities[tid])\r\n\t\t\t.filter((t) => user != null && t?.userId === user.id)\r\n\t) as Transaction[];\r\n\tconst userPenalties = useSelector<AppState>(\r\n\t\t(state) =>\r\n\t\t\tuser != null &&\r\n\t\t\tpenaltiesAdapter\r\n\t\t\t\t.getSelectors()\r\n\t\t\t\t.selectAll(state.penalties)\r\n\t\t\t\t.filter((p) => p.userId === user.id)\r\n\t) as Penalty[];\r\n\tconst dispatch = useDispatch<AppDispatch>();\r\n\tconst history = useHistory();\r\n\tconst validationSchema = yup.object({\r\n\t\tfullName: yup.string().required(\"Der Nutzername ist erforderlich\"),\r\n\t\tcolor: yup\r\n\t\t\t.string()\r\n\t\t\t.matches(\r\n\t\t\t\t/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,\r\n\t\t\t\t\"Bitte die Farbe als gltigen Hexcode eingeben\"\r\n\t\t\t),\r\n\t});\r\n\tconst formik = useFormik<UserFormValues>({\r\n\t\tinitialValues: {\r\n\t\t\tfullName: user?.fullName ?? \"\",\r\n\t\t\tcolor: user?.color ?? \"\",\r\n\t\t\troles: user?.roles ?? [],\r\n\t\t},\r\n\t\tvalidationSchema,\r\n\t\tonSubmit: (values) => {\r\n\t\t\tconst isCreate = router.match.params.userId === \"new\";\r\n\t\t\tif (isCreate) {\r\n\t\t\t\tconst newUserId = v4();\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tusersSlice.actions.create({\r\n\t\t\t\t\t\tfullName: values.fullName,\r\n\t\t\t\t\t\tcolor: values.color,\r\n\t\t\t\t\t\tabbreviation:\r\n\t\t\t\t\t\t\tvalues.fullName == null || values.fullName === \"\"\r\n\t\t\t\t\t\t\t\t? \"\"\r\n\t\t\t\t\t\t\t\t: values.fullName\r\n\t\t\t\t\t\t\t\t\t\t.split(\" \")\r\n\t\t\t\t\t\t\t\t\t\t.filter((s) => s.length > 0)\r\n\t\t\t\t\t\t\t\t\t\t.map((s) => s[0])\r\n\t\t\t\t\t\t\t\t\t\t.join(\"\"),\r\n\t\t\t\t\t\tid: newUserId,\r\n\t\t\t\t\t\tcreatedOn: Date.now(),\r\n\t\t\t\t\t\troles: values.roles\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\thistory.push({ pathname: \"/zsku-mgmt/users/\" + newUserId });\r\n\t\t\t} else {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tusersSlice.actions.update({\r\n\t\t\t\t\t\tid: router.match.params.userId,\r\n\t\t\t\t\t\tchanges: {\r\n\t\t\t\t\t\t\tfullName: values.fullName,\r\n\t\t\t\t\t\t\tcolor: values.color,\r\n\t\t\t\t\t\t\tabbreviation:\r\n\t\t\t\t\t\t\t\tvalues.fullName == null || values.fullName === \"\"\r\n\t\t\t\t\t\t\t\t\t? \"\"\r\n\t\t\t\t\t\t\t\t\t: values.fullName\r\n\t\t\t\t\t\t\t\t\t\t\t.split(\" \")\r\n\t\t\t\t\t\t\t\t\t\t\t.filter((s) => s.length > 0)\r\n\t\t\t\t\t\t\t\t\t\t\t.map((s) => s[0])\r\n\t\t\t\t\t\t\t\t\t\t\t.join(\"\"),\r\n\t\t\t\t\t\t\troles: values.roles ?? []\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t});\r\n\tconst getAbbreviation = (name: string) => {\r\n\t\treturn name\r\n\t\t\t.split(\" \")\r\n\t\t\t.filter((s) => s.length > 0)\r\n\t\t\t.map((s) => s[0])\r\n\t\t\t.join(\"\");\r\n\t};\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className=\"zsku-panel\">\r\n\t\t\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t\t<h1>{user?.fullName ?? \"Neues Mitglied\"}</h1>\r\n\t\t\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t\t\t<FaUser size=\"4em\" style={{ backgroundColor: \"#7DCE82\" }} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<form onSubmit={formik.handleSubmit}>\r\n\t\t\t\t\t\t<div className=\"zsku-keyValueGrid\">\r\n\t\t\t\t\t\t\t<h4>Name</h4>\r\n\t\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\terror={formik.touched.fullName && Boolean(formik.errors.fullName)}\r\n\t\t\t\t\t\t\t\t\thelperText={formik.touched.fullName && formik.errors.fullName}\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\tname=\"fullName\"\r\n\t\t\t\t\t\t\t\t\tid=\"fullName\"\r\n\t\t\t\t\t\t\t\t\tvalue={formik.values.fullName}\r\n\t\t\t\t\t\t\t\t\tonChange={formik.handleChange}></TextField>\r\n\t\t\t\t\t\t\t</FormControl>\r\n\r\n\t\t\t\t\t\t\t{user != null ? (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<h4>Abkrzung</h4>\r\n\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"abbreviation\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"abbreviation\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\t\t\t\tformik.values.fullName == null || formik.values.fullName === \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: getAbbreviation(formik.values.fullName)\r\n\t\t\t\t\t\t\t\t\t\t}></TextField>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t<h4>Farbe</h4>\r\n\t\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t\t<OutlinedInput\r\n\t\t\t\t\t\t\t\t\terror={formik.touched.color && Boolean(formik.errors.color)}\r\n\t\t\t\t\t\t\t\t\tendAdornment={\r\n\t\t\t\t\t\t\t\t\t\t<Avatar style={{ backgroundColor: formik.values.color }}>\r\n\t\t\t\t\t\t\t\t\t\t\t{getAbbreviation(formik.values.fullName)}\r\n\t\t\t\t\t\t\t\t\t\t</Avatar>\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t// helperText={formik.touched.color && formik.errors.color}\r\n\t\t\t\t\t\t\t\t\tname=\"color\"\r\n\t\t\t\t\t\t\t\t\tid=\"color\"\r\n\t\t\t\t\t\t\t\t\tvalue={formik.values.color}\r\n\t\t\t\t\t\t\t\t\tonChange={formik.handleChange}></OutlinedInput>\r\n\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t{user != null ? (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<h4>Erstellt am</h4>\r\n\t\t\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\tname=\"createdOn\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"createdOn\"\r\n\t\t\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\tvalue={new Date(user.createdOn).toLocaleDateString(\"de-DE\")}></TextField>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t) : null}\r\n\r\n\t\t\t\t\t\t\t<h4>Posten</h4>\r\n\t\t\t\t\t\t\t<FormControl>\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\t\tmultiple\r\n\t\t\t\t\t\t\t\t\tvalue={formik.values.roles}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => formik.setFieldValue(\"roles\", e.target.value)}\r\n\t\t\t\t\t\t\t\t\t// input={<Input id=\"select-multiple-chip\" />}\r\n\t\t\t\t\t\t\t\t\trenderValue={(selected) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<div style={{ display: \"flex\", flexWrap: \"wrap\" }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{(selected as string[]).map((value) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Chip\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonMouseDown={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={value}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={roles.entities[value]?.name}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ margin: \"5px 10px 0 0\" }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonDelete={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformik.setFieldValue(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"roles\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformik.values.roles.filter((sr) => sr !== value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tMenuProps={{\r\n\t\t\t\t\t\t\t\t\t\tPaperProps: {\r\n\t\t\t\t\t\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\t\t\t\t\t\tmaxHeight: \"30vh\",\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t{roles.ids.map((rId) => {\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem key={rId} value={rId}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{roles.entities[rId]?.name ?? \"Unknown\"}\r\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t<div className=\"gridSpacer\"></div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<FormControl style={{ float: \"right\" }}>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"formSubmit\"\r\n\t\t\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\tstartIcon={<ImFloppyDisk size=\".75em\" />}>\r\n\t\t\t\t\t\t\t\t\t\tSpeichern\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</Paper>\r\n\t\t\t</div>\r\n\t\t\t{router.match.params.userId === \"new\" ? null : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<div className=\"zsku-panel\">\r\n\t\t\t\t\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t\t\t\t<h1>Strafen</h1>\r\n\t\t\t\t\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t\t\t\t\t<FaMoneyBillWave size=\"4em\" style={{ backgroundColor: \"#7DCe82\" }} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"zsku-keyValueGrid\">\r\n\t\t\t\t\t\t\t\t<h4>Gesamt</h4>\r\n\t\t\t\t\t\t\t\t<Currency\r\n\t\t\t\t\t\t\t\t\tval={(userPenalties ?? []).reduce((agg, next) => {\r\n\t\t\t\t\t\t\t\t\t\treturn agg + (next.value ?? 0);\r\n\t\t\t\t\t\t\t\t\t}, 0)}></Currency>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<GroupedPenalties penalties={userPenalties ?? []}></GroupedPenalties>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"zsku-panel\">\r\n\t\t\t\t\t\t<Paper elevation={3} className=\"zsku-panel\">\r\n\t\t\t\t\t\t\t<div className=\"zsku-panelHeading\">\r\n\t\t\t\t\t\t\t\t<h1>Transaktionen</h1>\r\n\t\t\t\t\t\t\t\t<Link to={\"/zsku-mgmt/transactions/new/\" + router.match.params.userId}>\r\n\t\t\t\t\t\t\t\t\t<Button variant=\"text\" color=\"primary\">\r\n\t\t\t\t\t\t\t\t\t\tHinzufgen\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t<div className=\"logo\">\r\n\t\t\t\t\t\t\t\t\t<FaMoneyBillWave size=\"4em\" style={{ backgroundColor: \"#7DCe82\" }} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"zsku-keyValueGrid\">\r\n\t\t\t\t\t\t\t\t<h4>Kassenbestand</h4>\r\n\t\t\t\t\t\t\t\t<Balance\r\n\t\t\t\t\t\t\t\t\tval={transactions.reduce((agg, next) => {\r\n\t\t\t\t\t\t\t\t\t\treturn agg + (next.value ?? 0);\r\n\t\t\t\t\t\t\t\t\t}, 0)}></Balance>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<TransactionTable transactions={transactions}></TransactionTable>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default UserForm;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { GiBowlingStrike, GiMoneyStack, GiCog } from \"react-icons/gi\";\r\nexport type SidebarLinkParameters = {\r\n\troute: string;\r\n\tlabel: string;\r\n};\r\nexport function SidebarLinks() {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<ul>\r\n\t\t\t\t<Link to={\"/zsku-mgmt/games\"}>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<GiBowlingStrike size=\"1.75em\" />\r\n\t\t\t\t\t\t<h4>Spiele</h4>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Link to={\"/zsku-mgmt/ledgers\"}>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<GiMoneyStack size=\"1.75em\" />\r\n\t\t\t\t\t\t<h4>Kasse</h4>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</Link>\r\n\t\t\t\t<Link to={\"/zsku-mgmt/settings\"}>\r\n\t\t\t\t\t<li>\r\n\t\t\t\t\t\t<GiCog size=\"1.75em\" />\r\n\t\t\t\t\t\t<h4>Einstellungen</h4>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</Link>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { Avatar } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { connect, useSelector } from \"react-redux\";\r\nimport { Role, User } from \"../entities/entities\";\r\nimport { AppState } from \"../redux/store\";\r\nfunction SidebarUserLogo({ abbreviation, color }: { abbreviation: string; color: string }) {\r\n\treturn (\r\n\t\t<Avatar style={{ backgroundColor: color }}>{abbreviation}</Avatar>\r\n\t);\r\n}\r\n\r\nconst SidebarUser = ({ user }: { user: User }) => {\r\n\tconst userRoles = useSelector<AppState>((state) =>\r\n\t\tuser?.roles.map(r => state.roles.entities[r])\r\n\t) as Role[] ?? [];\r\n\tif (user == null)\r\n\t\treturn (\r\n\t\t\t<div className=\"sidebarUser\">\r\n\t\t\t\t<p>Loading ...</p>\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\treturn (\r\n\t\t<div className=\"sidebarUser\">\r\n\t\t\t<SidebarUserLogo color={user?.color} abbreviation={user?.abbreviation} />\r\n\t\t\t<div className=\"sidebarUserInfo\">\r\n\t\t\t\t<h1>{user?.fullName}</h1>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t{userRoles\r\n\t\t\t\t\t\t.slice(0, 3)\r\n\t\t\t\t\t\t.map((r) => r.name)\r\n\t\t\t\t\t\t.join(\", \")}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default connect()(SidebarUser);\r\n","import { IconButton } from \"@material-ui/core\";\r\nimport React, { useState } from \"react\";\r\nimport { BsChevronDoubleLeft, BsChevronDoubleRight } from \"react-icons/bs\";\r\nimport { User } from \"../entities/entities\";\r\nimport { SidebarLinks } from \"./links\";\r\nimport SidebarUser from \"./user\";\r\n\r\nexport const Sidebar = ({ user }: { user: User }) => {\r\n\tconst [minimized, setMinimized] = useState(false);\r\n\treturn (\r\n\t\t<aside className={\"sidebar\" + (minimized ? \" minimized\" : \"\")}>\r\n\t\t\t<SidebarUser user={user}></SidebarUser>\r\n\t\t\t<SidebarLinks />\r\n\t\t\t<IconButton\r\n\t\t\t\tclassName=\"minimize\"\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tsetMinimized(!minimized);\r\n\t\t\t\t}}>\r\n\t\t\t\t{minimized ? (\r\n\t\t\t\t\t<BsChevronDoubleRight></BsChevronDoubleRight>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<BsChevronDoubleLeft></BsChevronDoubleLeft>\r\n\t\t\t\t)}\r\n\t\t\t</IconButton>\r\n\t\t</aside>\r\n\t);\r\n};\r\n","import React from \"react\";\r\nimport { connect, useSelector } from \"react-redux\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport \"./css/App.scss\";\r\nimport { User } from \"./entities/entities\";\r\nimport { Landing } from \"./main/landing/landing\";\r\nimport Ledgers from \"./main/ledgers/ledgers\";\r\nimport TransactionForm from \"./main/ledgers/transactionForm\";\r\nimport Settings from \"./main/settings/settings\";\r\nimport Games, { ClosedGameForm } from \"./main/games/games\";\r\nimport UserForm from \"./main/users/userForm\";\r\nimport { usersAdapter } from \"./redux/reducers/users\";\r\nimport { AppState } from \"./redux/store\";\r\nimport { Sidebar } from \"./sidebar/sidebar\";\r\nimport _ from \"lodash\";\r\n\r\nconst Main = () => {\r\n\tconst user = useSelector<AppState>((state) => _.first(usersAdapter.getSelectors().selectAll(state.users))) as User;\r\n\treturn (\r\n\t\t<Router>\r\n\t\t\t<div className=\"mainContainer\">\r\n\t\t\t\t<div className=\"sidebarContainer\">\r\n\t\t\t\t\t<Sidebar user={user} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"contentContainer\">\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route path=\"/zsku-mgmt/users/:userId\" component={UserForm}></Route>\r\n\t\t\t\t\t\t<Route path=\"/zsku-mgmt/transactions/:transactionId/:userId?\" component={TransactionForm}></Route>\r\n\t\t\t\t\t\t<Route path=\"/zsku-mgmt/ledgers\" component={Ledgers}></Route>\r\n\t\t\t\t\t\t<Route path=\"/zsku-mgmt/settings\" component={Settings} />\r\n\t\t\t\t\t\t<Route path=\"/zsku-mgmt/games/:gameId\" exact={true} component={ClosedGameForm} />\r\n\t\t\t\t\t\t<Route path=\"/zsku-mgmt/games\" exact={true} component={Games} />\r\n\t\t\t\t\t\t<Route path=\"/zsku-mgmt\" strict={true}>\r\n\t\t\t\t\t\t\t<Landing user={user} />\r\n\t\t\t\t\t\t</Route>\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Router>\r\n\t);\r\n};\r\n\r\nfunction App() {\r\n\tconst loading = useSelector<AppState>((state) => state.loading) as boolean;\r\n\treturn <div className=\"App\">{loading ? <div></div> : <Main></Main>}</div>;\r\n}\r\n\r\nexport default connect()(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./css/index.css\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { Provider } from \"react-redux\";\r\nimport { store } from \"./redux/store\";\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<Provider store={store}>\r\n\t\t\t<App />\r\n\t\t</Provider>\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}