(this["webpackJsonpzsku-mgmt"]=this["webpackJsonpzsku-mgmt"]||[]).push([[0],{183:function(e,t,a){},203:function(e,t,a){e.exports=a(238)},208:function(e,t,a){},212:function(e,t,a){},238:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(13),i=a.n(r),o=(a(208),a(7)),c=a(11),u=a(17);a(212);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var m=l.a.createElement("title",null,"ZSKU Logo"),p=function(e){var t=e.svgRef,a=e.title,n=d(e,["svgRef","title"]);return l.a.createElement("svg",s({width:250,height:250,viewBox:"0 0 66.146 66.146",ref:t},n),void 0===a?m:a?l.a.createElement("title",null,a):null,l.a.createElement("g",{transform:"translate(0 -230.85)"},l.a.createElement("g",{transform:"matrix(2.5493 0 0 2.5493 -32.372 -379.35)",style:{strokeWidth:.79375}},l.a.createElement("path",{d:"m17.907 240.94h15.502v15.502h-15.502z",style:{fill:"none",strokeWidth:.79375,stroke:"#000"}}),l.a.createElement("path",{d:"m17.907 256.44 15.502-15.502",style:{fill:"none",strokeWidth:.79375,stroke:"#000"}}),l.a.createElement("path",{d:"m33.409 256.44-7.7508-7.7508v-7.7508",style:{fill:"none",strokeWidth:.79375,stroke:"#000"}}),l.a.createElement("path",{d:"m25.658 248.69v7.7508",style:{fill:"none",strokeWidth:.79375,stroke:"#000"}}),l.a.createElement("path",{d:"m25.658 248.69c-2.1403 0-3.8754-1.7351-3.8754-3.8754 3e-6 -2.1403 1.7351-3.8754 3.8754-3.8754s3.8754 1.7351 3.8754 3.8754",style:{fill:"none",strokeWidth:.79375,stroke:"#000"}}),l.a.createElement("path",{d:"m25.632 248.68c2.1403 0 3.8754 1.7351 3.8754 3.8754 2e-6 2.1403-1.7351 3.8754-3.8754 3.8754s-3.8754-1.7351-3.8754-3.8754",style:{fill:"none",strokeWidth:.79375,stroke:"#000"}}),l.a.createElement("path",{d:"m33.409 256.46c3e-6 4.2807-3.4702 7.7508-7.7508 7.7508s-7.7508-3.4702-7.7508-7.7508",style:{fill:"none",strokeWidth:.79375,stroke:"#000"}}))))},f=l.a.forwardRef((function(e,t){return l.a.createElement(p,s({svgRef:t},e))})),v=(a.p,function(e){var t;return l.a.createElement("div",{className:"landingMain"},l.a.createElement("div",null,l.a.createElement(f,null),l.a.createElement("h1",null,"ZSKU Wegholzen"),l.a.createElement("p",null,"Willkommen im ZSKU Management Portal, ",l.a.createElement("br",null),null===(t=e.user)||void 0===t?void 0:t.fullName)))}),g=a(243),b=a(275),h=a(291),y=a(285),E=a(36),O=a(16),k=a(18),S=a.n(k),j=a(33),N=a(46),z=a(44),w=new(function(e){Object(N.a)(a,e);var t=Object(z.a)(a);function a(){var e;return Object(j.a)(this,a),(e=t.call(this,"zsku-db")).feeTypes=void 0,e.penalties=void 0,e.roles=void 0,e.users=void 0,e.transactions=void 0,e.games=void 0,e.version(4).stores({feeTypes:"id,createdOn,label,value,applicationStrategy,deleted",penalties:"id,createdOn,gameId,userId,feeTypeId,value",roles:"id,createdOn,name",users:"id,createdOn,abbreviation,fullName,color,deleted",transactions:"id,createdOn,name,description,userId,value,affectsGlobalLedger,affectsGlobalUser",games:"id,createdOn,name,status,users"}),e.feeTypes=e.table("feeTypes"),e.penalties=e.table("penalties"),e.roles=e.table("roles"),e.users=e.table("users"),e.transactions=e.table("transactions"),e.games=e.table("games"),e}return a}(a(186).a)),T=Object(O.b)(),C=Object(O.c)({initialState:T.getInitialState(),name:"transactions",reducers:{create:function(e,t){return e.ids.push(t.payload.id),e.entities[t.payload.id]=t.payload,w.transactions.put(t.payload),e},delete:function(e,t){return e.ids=e.ids.filter((function(e){return e!==t.payload})),delete e.entities[t.payload],w.transactions.delete(t.payload),e},set:function(e,t){e.ids=t.payload.map((function(e){return e.id})),e.entities={};var a,n=Object(E.a)(t.payload);try{for(n.s();!(a=n.n()).done;){var l=a.value;e.entities[l.id]=l}}catch(r){n.e(r)}finally{n.f()}return w.transactions.clear().then((function(){w.transactions.bulkPut(t.payload)})),e},update:function(e,t){return e.entities[t.payload.id]=S.a.merge(e.entities[t.payload.id],t.payload.changes),w.transactions.update(t.payload.id,t.payload.changes),e}}}),I=["#2589BD","#FF751F","#F9C846","#5b4e77","#339989"],A=Object(O.b)(),D=Object(O.c)({initialState:A.getInitialState(),name:"users",reducers:{create:function(e,t){var a;null==t.payload.color&&(t.payload.color=null!==(a=S.a.sample(I))&&void 0!==a?a:"#aaa");return e.ids.push(t.payload.id),e.entities[t.payload.id]=t.payload,w.users.put(t.payload),e},delete:function(e,t){var a=e.entities[t.payload];if(null!=a)return a.deleted=!0,w.feeTypes.update(t.payload,{deleted:!0}),e},set:function(e,t){e.ids=t.payload.map((function(e){return e.id})),e.entities={};var a,n=Object(E.a)(t.payload);try{for(n.s();!(a=n.n()).done;){var l=a.value;e.entities[l.id]=l}}catch(r){n.e(r)}finally{n.f()}w.users.clear().then((function(){w.users.bulkPut(t.payload)}))},update:function(e,t){return e.entities[t.payload.id]=S.a.merge(e.entities[t.payload.id],t.payload.changes),w.users.update(t.payload.id,t.payload.changes),e}}}),P=a(23);function x(e){return"".concat(e.toFixed(2)," \u20ac")}var B,G=function(e){return l.a.createElement("p",{style:e.style},x(e.val))},F=function(e){var t=(e.inverted?-1:1)*e.val;return l.a.createElement("div",{className:"balance",style:{display:"flex",alignItems:"center",gap:".25em",float:"right"}},t>0?l.a.createElement(P.h,{size:"0.5em",color:"green"}):t<0?l.a.createElement(P.h,{size:"0.5em",color:"red",style:{transform:"rotate(0.5turn)"}}):void 0,l.a.createElement(G,{val:t}))},_=a(38),W=a(28),L=a(40),M=a(119),R=a(287),V=a(289),K=a(242),H=a(274),U=a(271),q=a(273),Z=a(268),J=a(270),$=a(272),Q=a(284),X=a(269),Y=a(98),ee=a.n(Y),te=a(120),ae=function(e){Object(N.a)(a,e);var t=Object(z.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={currentPage:0,order:{}},n.pageBounds=n.pageBounds.bind(Object(M.a)(n)),n}return Object(L.a)(a,[{key:"pageBounds",value:function(e,t){var a=e*this.props.entriesPerPage,n=(e+1)*this.props.entriesPerPage;return[a,Math.min(n,t)]}},{key:"sortByOrderObject",value:function(e,t,a){var n=e;return Object.entries(a).sort((function(e,t){return t[1].priority-e[1].priority})).forEach((function(e){var a=Object(W.a)(e,2),l=a[0],r=a[1];n.sort((function(e,a){var n=t.find((function(e){return e.id===l}));if(!n)throw Error("col not found");if("function"===typeof n.sort)return"asc"===r.direction?n.sort(e,a):n.sort(a,e);var i="function"===typeof n.data?n.data(e):e[n.data],o="function"===typeof n.data?n.data(a):a[n.data],c=0;if(i>o)c=1;else{if(!(o>i))return 0;c=-1}return"asc"===r.direction?c:-1*c}))})),n}},{key:"render",value:function(){var e=this,t=this.pageBounds(this.state.currentPage,this.props.rows.length),a=Object(W.a)(t,2),n=a[0],r=a[1],i=[];!0===this.props.selectable&&"function"===typeof this.props.addSelected&&"function"===typeof this.props.removeSelected&&i.push({data:function(t){return l.a.createElement(R.a,{onChange:function(a){null!=e.props.addSelected&&null!=e.props.removeSelected&&(a.target.checked?e.props.addSelected(t):e.props.removeSelected(t))}})},id:"col_check",name:"",orderable:!1,align:"left",sort:function(){return 0}}),i.push.apply(i,Object(_.a)(this.props.columns));var o=i.map((function(t,a,n){var r,i;return t.orderable?l.a.createElement(Z.a,{align:null!==(i=t.align)&&void 0!==i?i:"left",key:Object(y.a)(),sortDirection:t.orderable&&null!=e.state.order[t.id]?e.state.order[t.id].direction:void 0},l.a.createElement(V.a,{key:Object(y.a)(),active:t.orderable&&t.id in e.state.order,direction:t.orderable&&null!=e.state.order[t.id]?e.state.order[t.id].direction:void 0,onClick:function(a){if(t.orderable){var l=e.state.order;if(a.shiftKey||n.forEach((function(e){e.id!==t.id&&delete l[e.id]})),t.id in l)switch(l[t.id].direction){case"asc":l[t.id].direction="desc",l[t.id].priority=Date.now();break;case"desc":delete l[t.id]}else l[t.id]={direction:"asc",priority:Date.now()};e.setState({order:e.state.order})}}},t.name)):l.a.createElement(Z.a,{align:null!==(r=t.align)&&void 0!==r?r:"left",key:Object(y.a)()},t.name)})),c=this.sortByOrderObject(this.props.rows,i,this.state.order).slice(n,r).map((function(t){return l.a.createElement(X.a,{key:Object(y.a)()},function(){var a=i.map((function(e){var a;return l.a.createElement(Z.a,{key:Object(y.a)(),align:null!==(a=e.align)&&void 0!==a?a:"left"},"function"===typeof e.data?e.data(t):t[e.data])}));return null!=e.props.actions&&a.push(l.a.createElement(Z.a,{key:Object(y.a)(),align:"right",style:{padding:"4px"}},e.props.actions.map((function(e){return l.a.createElement(K.a,{key:Object(y.a)(),color:"primary",onClick:function(){e.handle(t)}},l.a.createElement(e.icon,{size:".75em"}))})))),a}())}));return null!=this.props.actions&&o.push(l.a.createElement(Z.a,{key:"col_actions",align:"right"},"Aktionen")),l.a.createElement(J.a,{component:g.a,elevation:0,style:{display:this.props.rows.length>0?"block":"none"}},l.a.createElement(U.a,null,l.a.createElement($.a,null,l.a.createElement(X.a,null,o)),l.a.createElement(q.a,null,c),this.props.rows.length>this.props.entriesPerPage?l.a.createElement(H.a,null,l.a.createElement(X.a,null,l.a.createElement(Q.a,{count:this.props.rows.length,rowsPerPage:this.props.entriesPerPage,rowsPerPageOptions:[],page:this.state.currentPage,onChangePage:function(t,a){e.setState({currentPage:a})}}))):null))}}]),a}(n.Component),ne=function(e){var t=Object(o.d)((function(e){return A.getSelectors((function(e){return e.users})).selectEntities(e)}));return l.a.createElement("div",null,l.a.createElement(ae,{columns:[{data:function(e){return l.a.createElement(c.b,{to:"/zsku-mgmt/transactions/"+e.id},e.name)},id:"col_name",name:"Name",align:"left",orderable:!0,sort:function(e,t){return e.name.localeCompare(t.name)}},{data:function(e){return l.a.createElement("div",{title:e.description},e.description.substr(0,50))},id:"col_description",name:"Beschreibung",align:"left",orderable:!1},{data:function(e){var a=t[e.userId];return null==a?l.a.createElement("p",null,"N/A"):l.a.createElement(c.b,{to:"/zsku-mgmt/users/"+a.id},a.fullName)},id:"col_user",name:"Mitglied",align:"left",orderable:!0,sort:function(e,a){var n=t[e.userId],l=t[a.userId];return null==n||null==l?0:n.fullName.localeCompare(l.fullName)}},{data:function(e){return l.a.createElement(F,{val:e.value})},id:"col_value",name:"Betrag",align:"right",orderable:!0,sort:function(e,t){return e.value-t.value}},{data:function(e){return new Date(e.createdOn).toLocaleDateString("de-DE")},id:"col_timestamp",name:"Erstellt am",align:"left",orderable:!0,sort:function(e,t){return e.createdOn-t.createdOn}}],entriesPerPage:8,rows:e.transactions}))},le=Object(u.g)((function(e){var t=Object(o.d)((function(e){return T.getSelectors().selectAll(e.transactions)})),a=Object(o.d)((function(e){return A.getSelectors().selectAll(e.users).filter((function(e){return!0!==e.deleted}))})),n=Object(o.c)();return l.a.createElement("div",{className:"ledgerContainer"},l.a.createElement("div",{className:"zsku-panel"},l.a.createElement(g.a,{elevation:3,className:"zsku-panel"},l.a.createElement("div",{className:"zsku-panelHeading"},l.a.createElement("h1",null,"Kassenstand"),l.a.createElement(F,{val:t.filter((function(e){return e.affectsGlobalLedger})).reduce((function(e,t){return e+t.value}),0)}),l.a.createElement(c.b,{to:"/zsku-mgmt/transactions/new"},l.a.createElement(b.a,null,"Au\xdferplanm\xe4\xdfige Transaktion hinzuf\xfcgen"))),l.a.createElement(ne,{transactions:t.filter((function(e){return e.affectsGlobalLedger}))}))),l.a.createElement("div",{className:"cardGrid"},a.map((function(a){var r=t.reduce((function(e,t){return e+(t.userId===a.id?t.value:0)}),0);return l.a.createElement("div",{style:{cursor:"pointer"},key:"userLedger_"+a.id,className:"card zsku-panel",onClick:function(){e.history.push("/zsku-mgmt/users/"+a.id)}},l.a.createElement(g.a,{elevation:3,style:{padding:"2em",position:"relative"}},l.a.createElement(h.a,{style:{backgroundColor:a.color,position:"absolute",top:"1em",right:"1em"}},a.abbreviation),l.a.createElement("div",{className:"zsku-panelHeading"},l.a.createElement("h1",{style:{marginLeft:"0"}},a.fullName)),l.a.createElement("div",{style:{display:"flex",alignItems:"center",width:"100%"}},l.a.createElement("p",{style:{marginRight:"1em"}},"Kontostand"),l.a.createElement(F,{val:r})),r<0&&l.a.createElement(b.a,{style:{float:"right",bottom:"1em"},onClick:function(l){l.stopPropagation();var i=Object(y.a)();n(C.actions.create({id:i,createdOn:Date.now(),affectsGlobalLedger:!0,affectsUserLedger:!0,name:"TRANS-"+t.length.toString().padStart(4,"0"),penalties:[],userId:a.id,value:-1*r,description:""})),e.history.push("/zsku-mgmt/transactions/"+i)}},"Begleichen")))}))))})),re=a(162),ie=a(276),oe=a(164),ce=a(290),ue=a(277),se=a(96),de=a(37),me=a(43),pe=a(48),fe=Object(O.b)(),ve=Object(O.c)({initialState:fe.getInitialState(),name:"feeTypes",reducers:{create:function(e,t){return e.ids.push(t.payload.id),e.entities[t.payload.id]=t.payload,w.feeTypes.put(t.payload),e},delete:function(e,t){var a=e.entities[t.payload];if(null!=a)return a.deleted=!0,w.feeTypes.update(t.payload,{deleted:!0}),e},set:function(e,t){e.ids=t.payload.map((function(e){return e.id})),e.entities={};var a,n=Object(E.a)(t.payload);try{for(n.s();!(a=n.n()).done;){var l=a.value;e.entities[l.id]=l}}catch(r){n.e(r)}finally{n.f()}w.feeTypes.clear().then((function(){w.feeTypes.bulkPut(t.payload)}))},update:function(e,t){return e.entities[t.payload.id]=S.a.merge(e.entities[t.payload.id],t.payload.changes),w.feeTypes.update(t.payload.id,t.payload.changes),e}}}),ge=a(110),be=a(194),he=a.n(be),ye=a(193),Ee=function(e){var t=e.inputRef,a=e.onChange,n=Object(ge.a)(e,["inputRef","onChange"]);return l.a.createElement(ye.a,Object.assign({},n,{getInputRef:t,onValueChange:function(t){a({target:{name:e.name,value:t.value}})},thousandSeparator:".",decimalSeparator:",",isNumericString:!0,fixedDecimalScale:!0,decimalScale:2,allowedDecimalSeparators:[",","."],allowNegative:!0,allowLeadingZeros:!0,prefix:""}))},Oe=function(e){var t=e.value,a=e.onChange,n=Object(ge.a)(e,["value","onChange"]);return l.a.createElement(he.a,Object.assign({variant:"outlined",InputProps:{startAdornment:"\u20ac",inputComponent:Ee},value:t,onChange:a},n))},ke=Object(u.g)((function(e){var t,a,n,r,i=Object(o.c)(),s=Object(u.f)(),d=pe.b({value:pe.a().required().notOneOf([0])}),m=Object(o.d)((function(e){return e.users})),p=Object(o.d)((function(e){return fe.getSelectors((function(e){return e.feeTypes})).selectEntities(e)})),f=Object(o.d)((function(t){return T.getSelectors((function(e){return e.transactions})).selectById(t,e.match.params.transactionId)})),v=Object(o.d)((function(e){return T.getSelectors().selectTotal(e.transactions)})),h=Object(o.d)((function(e){var t;return(null!==(t=null===f||void 0===f?void 0:f.penalties)&&void 0!==t?t:[]).map((function(t){return e.penalties.entities[t]}))})),E=Object.values(h.reduce((function(e,t){var a,n,l,r=t&&p[t.feeTypeId];null==e[t.id]&&(e[t.id]={count:0,feeType:null!==(n=null===r||void 0===r?void 0:r.label)&&void 0!==n?n:"Custom",id:null!==(l=null===r||void 0===r?void 0:r.id)&&void 0!==l?l:t.id,value:0});return e[t.id].count++,e[t.id].value+=null!==(a=null===t||void 0===t?void 0:t.value)&&void 0!==a?a:0,e}),{})),O=Object(se.a)({initialValues:{description:null!==(t=null===f||void 0===f?void 0:f.description)&&void 0!==t?t:"",user:null!==(a=null===f||void 0===f?void 0:f.userId)&&void 0!==a?a:e.match.params.userId,value:null!==(n=null===f||void 0===f?void 0:f.value)&&void 0!==n?n:0,affectsGlobalLedger:!0},validationSchema:d,onSubmit:function(t,a){var n=a.setSubmitting,l=a.resetForm;if("new"===e.match.params.transactionId){var r=Object(y.a)();i(C.actions.create({affectsGlobalLedger:t.affectsGlobalLedger,affectsUserLedger:!!e.match.params.userId,createdOn:Date.now(),description:t.description,id:r,name:"TRANS-"+(v+1).toString().padStart(4,"0"),userId:t.user,value:parseFloat(t.value.toString()),penalties:[]})),n(!1),s.push("/zsku-mgmt/transactions/"+r)}else i(C.actions.update({id:f.id,changes:{description:t.description,value:parseFloat(t.value.toString()),userId:t.user}})),n(!1),l({values:t})}});return l.a.createElement("div",{className:"zsku-panel"},l.a.createElement(g.a,{elevation:3,className:"zsku-panel"},l.a.createElement("div",{className:"zsku-panelHeading"},l.a.createElement("h1",null,null!==(r=null===f||void 0===f?void 0:f.name)&&void 0!==r?r:"Neue Transaktion"),l.a.createElement("div",{className:"logo"},l.a.createElement(de.b,{size:"4em",style:{backgroundColor:"#7DCE82"}}))),l.a.createElement("form",{onSubmit:O.handleSubmit},l.a.createElement("div",{className:"zsku-keyValueGrid"},(null!=e.match.params.userId||null!=(null===f||void 0===f?void 0:f.userId)&&0===h.length)&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Betrifft Kasse"),l.a.createElement(re.a,null,l.a.createElement(ie.a,{color:"primary",checked:O.values.affectsGlobalLedger,onChange:function(e){return O.setFieldValue("affectsGlobalLedger",e.target.checked)}}))),l.a.createElement("h4",null,"Betrag"),l.a.createElement(Oe,{disabled:(null===f||void 0===f?void 0:f.penalties.length)>0,error:O.touched.value&&Boolean(O.errors.value),helperText:O.touched.value&&O.errors.value,size:"small",value:O.values.value,name:"Value",id:"value",variant:"outlined",onChange:function(e){return O.setFieldValue("value",e.target.value)}}),(null!=e.match.params.userId||!0===(null===f||void 0===f?void 0:f.affectsUserLedger))&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Mitglied"),l.a.createElement(re.a,null,l.a.createElement(oe.a,{error:O.touched.user&&Boolean(O.errors.user),disabled:!1===(null===f||void 0===f?void 0:f.affectsGlobalLedger)||"new"!==e.match.params.transactionId||null!=e.match.params.userId,variant:"outlined",value:O.values.user,itemType:"string",onChange:function(e){O.setFieldValue("user",e.target.value.toString())},renderValue:function(e){var t;return null==e?null:l.a.createElement(c.b,{to:"/zsku-mgmt/users/"+e,onMouseDown:function(e){e.stopPropagation()}},null===(t=m.entities[e])||void 0===t?void 0:t.fullName)}},m.ids.map((function(e){var t;return l.a.createElement(ce.a,{key:"user_"+e,value:e},null===(t=m.entities[e])||void 0===t?void 0:t.fullName)}))))),l.a.createElement("h4",null,"Beschreibung"),l.a.createElement(re.a,null,l.a.createElement(ue.a,{error:O.touched.description&&Boolean(O.errors.description),helperText:O.touched.description&&O.errors.description,variant:"outlined",size:"small",name:"description",id:"description",multiline:!0,value:O.values.description,onChange:O.handleChange})),null!=f&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Erstellt am"),l.a.createElement(ue.a,{disabled:!0,variant:"outlined",size:"small",name:"createdOn",id:"createdOn",fullWidth:!0,value:new Date(f.createdOn).toLocaleDateString("de-DE")})),l.a.createElement("div",{className:"gridSpacer"}),l.a.createElement("div",null,l.a.createElement(re.a,{style:{float:"right"}},l.a.createElement(b.a,{variant:"contained",type:"submit",id:"formSubmit",color:"primary",startIcon:l.a.createElement(me.a,{size:".75em"})},"Speichern"))))),E.length>0?l.a.createElement("div",null,l.a.createElement(ae,{columns:[{id:"col_feeType",name:"Strafe",data:function(e){return e.feeType}},{id:"col_value",name:"Gesamtbetrag",data:function(e){return l.a.createElement(G,{val:e.value})}},{id:"col_count",name:"Anzahl",data:"count"}],entriesPerPage:10,rows:E})):null))})),Se=(a(183),a(52));!function(e){e[e.Target=0]="Target",e[e.AllButTarget=1]="AllButTarget",e[e.AutoAll=2]="AutoAll"}(B||(B={}));ve.actions.update;var je,Ne=function(e){Object(N.a)(a,e);var t=Object(z.a)(a);function a(e){var n,l,r,i,o,c,u,s,d,m;return Object(j.a)(this,a),(m=t.call(this,e)).state={value:null!==(n=null===(l=m.props.feeType)||void 0===l||null===(r=l.value)||void 0===r?void 0:r.toString())&&void 0!==n?n:"",name:null!==(i=null===(o=m.props.feeType)||void 0===o?void 0:o.label)&&void 0!==i?i:"",id:null!==(c=null===(u=m.props.feeType)||void 0===u?void 0:u.id)&&void 0!==c?c:"ERR",applicationStrategy:null!==(s=null===(d=m.props.feeType)||void 0===d?void 0:d.applicationStrategy)&&void 0!==s?s:B.Target},m}return Object(L.a)(a,[{key:"componentDidUpdate",value:function(){var e,t,a,n,l,r,i,o,c;this.state.id!==this.props.match.params.id&&this.setState({id:null!==(e=null===(t=this.props.feeType)||void 0===t?void 0:t.id)&&void 0!==e?e:"ERR",name:null!==(a=null===(n=this.props.feeType)||void 0===n?void 0:n.label)&&void 0!==a?a:"ERR",value:null!==(l=null===(r=this.props.feeType)||void 0===r||null===(i=r.value)||void 0===i?void 0:i.toString())&&void 0!==l?l:"",applicationStrategy:null!==(o=null===(c=this.props.feeType)||void 0===c?void 0:c.applicationStrategy)&&void 0!==o?o:B.Target})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{style:{display:"flex",gap:"10px",alignItems:"center"}},l.a.createElement(ue.a,{value:this.state.name,label:"Name",name:"Name",variant:"outlined",onChange:function(t){e.setState({name:t.target.value})}}),l.a.createElement(Oe,{value:this.state.value,label:"Value",name:"Wert",variant:"outlined",onChange:function(t){e.setState({value:t.target.value})}}),l.a.createElement(oe.a,{label:"Betrifft",name:"ApplicationStrategy",variant:"outlined",value:this.state.applicationStrategy,onChange:function(t){e.setState({applicationStrategy:parseInt(t.target.value)})}},l.a.createElement(ce.a,{value:B.Target},"Ziel"),l.a.createElement(ce.a,{value:B.AllButTarget},"Alle au\xdfer Ziel"),l.a.createElement(ce.a,{value:B.AutoAll},"Alle")),l.a.createElement(b.a,{color:"primary",variant:"contained",startIcon:l.a.createElement(me.a,{size:".75em"}),onClick:function(){e.props.editFeeType({changes:{label:e.state.name,value:parseFloat(e.state.value),applicationStrategy:e.state.applicationStrategy},id:e.state.id}),e.props.history.push("/zsku-mgmt/settings")}},"Speichern"))}}]),a}(n.Component),ze=Object(o.b)((function(e,t){return{feeType:fe.getSelectors().selectById(e.feeTypes,t.match.params.id)}}),(function(e){return{editFeeType:Object(Se.b)(ve.actions.update,e)}}))(Object(u.g)(Ne)),we=Object(O.b)(),Te=Object(O.c)({initialState:we.getInitialState(),name:"penalties",reducers:{create:function(e,t){return e.ids.push(t.payload.id),e.entities[t.payload.id]=t.payload,w.penalties.put(t.payload),e},createMultiple:function(e,t){var a;(a=e.ids).push.apply(a,Object(_.a)(t.payload.map((function(e){return e.id}))));var n,l=Object(E.a)(t.payload);try{for(l.s();!(n=l.n()).done;){var r=n.value;e.entities[r.id]=r}}catch(i){l.e(i)}finally{l.f()}return w.penalties.bulkPut(t.payload),e},delete:function(e,t){return e.ids=e.ids.filter((function(e){return e!==t.payload})),delete e.entities[t.payload],w.penalties.delete(t.payload),e},deleteMultiple:function(e,t){e.ids=e.ids.filter((function(e){return t.payload.findIndex((function(t){return e!==t}))}));var a,n=Object(E.a)(t.payload);try{for(n.s();!(a=n.n()).done;){var l=a.value;delete e.entities[l]}}catch(r){n.e(r)}finally{n.f()}return w.penalties.bulkDelete(t.payload),e},set:function(e,t){e.ids=t.payload.map((function(e){return e.id})),e.entities={};var a,n=Object(E.a)(t.payload);try{for(n.s();!(a=n.n()).done;){var l=a.value;e.entities[l.id]=l}}catch(r){n.e(r)}finally{n.f()}w.penalties.clear().then((function(){w.penalties.bulkPut(t.payload)}))},update:function(e,t){return e.entities[t.payload.id]=S.a.merge(e.entities[t.payload.id],t.payload.changes),w.penalties.update(t.payload.id,t.payload.changes),e}}}),Ce=function(e){return e.games.entities[e.games.openGame]},Ie=function(e,t){return e.games.entities[t]},Ae=function(e){return e.games.ids.filter((function(t){return t!==e.games.openGame})).map((function(t){return e.games.entities[t]}))},De=function(e){return function(t){var a;return null===(a=t.games.entities[e])||void 0===a?void 0:a.users.map((function(e){return t.users.entities[e]})).sort((function(e,t){return e.fullName.localeCompare(t.fullName)}))}},Pe=function(e,t){return function(a){return we.getSelectors().selectAll(a.penalties).filter((function(a){return a.userId===t&&a.gameId===e}))}},xe=function(e){return function(t){return we.getSelectors().selectAll(t.penalties).filter((function(t){return t.gameId===e}))}},Be=Object(O.c)({initialState:{ids:[],entities:{},openGame:""},name:"games",reducers:{createGame:function(e){var t={id:Object(y.a)(),createdOn:Date.now(),status:"open",name:"SPIEL-".concat((e.ids.length+1).toString().padStart(4,"0")),users:[]};return e.ids.push(t.id),e.entities[t.id]=t,e.openGame=t.id,w.games.put(t),e},finishGame:function(e){var t=e.openGame;if(!t)return e;var a=e.entities[e.openGame];return 0===a.users.length||(a.status="closed",e.openGame="",w.games.update(t,{status:"closed"})),e},abortGame:function(e){var t=e.openGame;return t?(e.ids=e.ids.filter((function(e){return e!==t})),delete e.entities[t],w.games.delete(t),e):e},setGames:function(e,t){return e.ids=t.payload.map((function(e){return e.id})),e.entities=t.payload.reduce((function(t,a){return t[a.id]=a,"open"===a.status&&(e.openGame=a.id),t}),{}),w.games.clear().then((function(){w.games.bulkPut(t.payload)})),e},addPlayerToOpenGame:function(e,t){var a=e.entities[e.openGame];if(null!=a)return a.users.push(t.payload.userId),w.games.update(e.openGame,{users:Object(_.a)(a.users)}),e},removePlayerFromGame:function(e,t){var a=e.entities[e.openGame];if(null!=a)return a.users=a.users.filter((function(e){return e!==t.payload.userId})),w.games.update(e.openGame,{users:Object(_.a)(a.users)}),e}}}),Ge=Object(O.b)(),Fe=Object(O.c)({initialState:Ge.getInitialState(),name:"roles",reducers:{create:function(e,t){return e.ids.push(t.payload.id),e.entities[t.payload.id]=t.payload,w.roles.put(t.payload),e},delete:function(e,t){return e.ids=e.ids.filter((function(e){return e!==t.payload})),delete e.entities[t.payload],w.roles.delete(t.payload),e},set:function(e,t){e.ids=t.payload.map((function(e){return e.id})),e.entities={};var a,n=Object(E.a)(t.payload);try{for(n.s();!(a=n.n()).done;){var l=a.value;e.entities[l.id]=l}}catch(r){n.e(r)}finally{n.f()}w.roles.clear().then((function(){return w.roles.bulkPut(t.payload)}))},update:function(e,t){return e.entities[t.payload.id]=S.a.merge(e.entities[t.payload.id],t.payload.changes),w.roles.update(t.payload.id,t.payload.changes),e}}}),_e=[{label:"Diskutieren",value:.01,applicationStrategy:B.Target,createdOn:Date.now(),id:"2"},{label:"Fluchen",value:.01,applicationStrategy:B.Target,createdOn:Date.now(),id:"3"},{label:"Alle Neune",value:.2,applicationStrategy:B.AllButTarget,createdOn:Date.now(),id:"4"},{label:"Gosse",value:.3,applicationStrategy:B.Target,createdOn:Date.now(),id:"5"},{label:"Kugel abfangen misslingt",value:.5,applicationStrategy:B.Target,createdOn:Date.now(),id:"6"},{label:"Kugel abgefangen",value:.5,applicationStrategy:B.Target,createdOn:Date.now(),id:"7"},{label:"Wurf verpennt",value:.5,applicationStrategy:B.Target,createdOn:Date.now(),id:"8"},{label:"Nicht aufgeschrieben",value:.5,applicationStrategy:B.Target,createdOn:Date.now(),id:"9"},{label:"2. Verlierer",value:.5,applicationStrategy:B.Target,createdOn:Date.now(),id:"10"},{label:"Kugel fallen lassen",value:1,applicationStrategy:B.Target,createdOn:Date.now(),id:"11"},{label:"Nicht aufgegessen",value:1,applicationStrategy:B.Target,createdOn:Date.now(),id:"12"},{label:"Nichts gegessen",value:1,applicationStrategy:B.Target,createdOn:Date.now(),id:"13"},{label:"Versp\xe4tung (5m)",value:1,applicationStrategy:B.Target,createdOn:Date.now(),id:"14"},{label:"Klingel",value:2,applicationStrategy:B.Target,createdOn:Date.now(),id:"15"},{label:"Kugel au\xdferhalb",value:2,applicationStrategy:B.Target,createdOn:Date.now(),id:"16"},{label:"Verlierer",value:1.5,applicationStrategy:B.Target,createdOn:Date.now(),id:"17"},{label:"Versp\xe4tung (15m)",value:2.5,applicationStrategy:B.Target,createdOn:Date.now(),id:"18"},{label:"Interieur besch\xe4digt",value:3,applicationStrategy:B.Target,createdOn:Date.now(),id:"19"},{label:"Beitrag",value:5,applicationStrategy:B.AutoAll,createdOn:Date.now(),id:"20"},{label:"Kegelshirt nicht an",value:5,applicationStrategy:B.Target,createdOn:Date.now(),id:"21"},{label:"Versp\xe4tung (30m)",value:5,applicationStrategy:B.Target,createdOn:Date.now(),id:"22"},{label:"Eingeschlafen",value:10,applicationStrategy:B.Target,createdOn:Date.now(),id:"23"},{label:"Brechen auf der Bahn",value:25,applicationStrategy:B.Target,createdOn:Date.now(),id:"24"}],We=[{name:"Kassenwart",createdOn:Date.now(),id:"1"}],Le=[{abbreviation:"DW",color:null!==(je=S.a.sample(I))&&void 0!==je?je:"#0088cc",createdOn:Date.now(),fullName:"David Weischer",id:"2",roles:["1"]}],Me=Object(O.c)({initialState:!0,name:"loading",reducers:{set:function(e,t){return t.payload,!1}}}),Re=Object(O.a)({reducer:{feeTypes:ve.reducer,roles:Fe.reducer,users:D.reducer,transactions:C.reducer,penalties:Te.reducer,games:Be.reducer,loading:Me.reducer}});Object(te.a)(ee.a.mark((function e(){var t,a,n,l,r,i;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.feeTypes.toArray();case 2:return l=e.sent,0===(null===(t=l)||void 0===t?void 0:t.length)&&(l=_e),e.next=6,w.roles.toArray();case 6:return r=e.sent,0===(null===(a=r)||void 0===a?void 0:a.length)&&(r=We),e.next=10,w.users.toArray();case 10:return i=e.sent,0===(null===(n=i)||void 0===n?void 0:n.length)&&(i=Le),Re.dispatch(ve.actions.set(l)),e.t0=Re,e.t1=Te.actions,e.next=17,w.penalties.toArray();case 17:return e.t2=e.sent,e.t3=e.t1.set.call(e.t1,e.t2),e.t0.dispatch.call(e.t0,e.t3),Re.dispatch(Fe.actions.set(r)),Re.dispatch(D.actions.set(i)),e.t4=Re,e.t5=C.actions,e.next=26,w.transactions.toArray();case 26:return e.t6=e.sent,e.t7=e.t5.set.call(e.t5,e.t6),e.t4.dispatch.call(e.t4,e.t7),Re.dispatch(Me.actions.set(!1)),e.t8=Re,e.t9=Be.actions,e.next=34,w.games.toArray();case 34:e.t10=e.sent,e.t11=e.t9.setGames.call(e.t9,e.t10),e.t8.dispatch.call(e.t8,e.t11);case 37:case"end":return e.stop()}}),e)})))();var Ve=function(){return Object(o.c)()},Ke=Object(u.g)((function(e){var t=e.history,a=Object(n.useState)(""),r=Object(W.a)(a,2),i=r[0],o=r[1],c=Object(n.useState)(""),u=Object(W.a)(c,2),s=u[0],d=u[1],m=Object(n.useState)(B.Target),p=Object(W.a)(m,2),f=p[0],v=p[1],g=Ve();return l.a.createElement("div",{style:{display:"flex",gap:"10px",alignItems:"center"}},l.a.createElement(ue.a,{value:s,label:"Name",name:"Name",variant:"outlined",onChange:function(e){d(e.target.value)}}),l.a.createElement(Oe,{value:i,label:"Wert",name:"Value",variant:"outlined",onChange:function(e){o(e.target.value)}}),l.a.createElement(oe.a,{label:"Betrifft",name:"ApplicationStrategy",variant:"outlined",value:f,onChange:function(e){v(parseInt(e.target.value))}},l.a.createElement(ce.a,{value:B.Target},"Ziel"),l.a.createElement(ce.a,{value:B.AllButTarget},"Alle au\xdfer Ziel"),l.a.createElement(ce.a,{value:B.AutoAll},"Alle")),l.a.createElement(b.a,{color:"primary",variant:"contained",startIcon:l.a.createElement(me.a,{size:".75em"}),onClick:function(){g(ve.actions.create({value:parseFloat(i),label:s,applicationStrategy:f,id:Object(y.a)(),createdOn:Date.now()})),t.push("/zsku-mgmt/settings")}},"Speichern"))})),He=Object(o.b)()(Ke),Ue=a(288),qe=a(278),Ze=a(279),Je=a(280),$e=function(e){var t=e.title,a=e.message,r=e.onConfirm,i=e.onAbort,o=e.custom,c=e.component,u=Object(n.useState)(!1),s=Object(W.a)(u,2),d=s[0],m=s[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{onClick:function(e){e.stopPropagation(),m(!0)}},c),l.a.createElement(Ue.a,{open:d,onClose:function(){m(!1),"function"===typeof i&&i()}},l.a.createElement(qe.a,null,t),l.a.createElement(Ze.a,null,a),null!=o&&o.length>0?l.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.map((function(e,t){return l.a.createElement(b.a,{key:"conf_act_".concat(t),onClick:function(){m(!1),"function"===typeof e.handle&&e.handle()}},e.label)}))):l.a.createElement(Je.a,null,l.a.createElement(b.a,{onClick:function(){m(!1),"function"===typeof i&&i()}},"Abbrechen"),l.a.createElement(b.a,{color:"primary",onClick:function(){m(!1),"function"===typeof r&&r()}},"Best\xe4tigen"))))},Qe=function(e){Object(N.a)(a,e);var t=Object(z.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(L.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement(ae,{columns:[{id:"col_name",name:"Name",data:"label",align:"left",orderable:!0},{id:"col_value",name:"Wert",data:function(e){return null!=e.value?e.value.toFixed(2)+" \u20ac":"CUSTOM"},align:"right",orderable:!0,sort:function(e,t){var a,n;return(null!==(a=e.value)&&void 0!==a?a:0)-(null!==(n=t.value)&&void 0!==n?n:0)}},{id:"col_strategy",name:"Betrifft",data:function(e){switch(e.applicationStrategy){case B.Target:return"Ziel";case B.AllButTarget:return"Alle au\xdfer Ziel";case B.AutoAll:return"Alle";default:return"Niemanden"}},align:"left",orderable:!1},{id:"col_timestamp",name:"Erstellt am",data:function(e){var t;return new Date(null!==(t=e.createdOn)&&void 0!==t?t:Date.now()).toLocaleDateString("de-DE")},align:"left",orderable:!0,sort:function(e,t){return e.createdOn-t.createdOn}},{id:"col_actions",name:"Aktionen",align:"right",data:function(t){return l.a.createElement("div",{style:{float:"right",display:"flex"}},l.a.createElement(K.a,{color:"primary",onClick:function(){e.props.history.push("/zsku-mgmt/settings/feeTypes/edit/"+t.id)}},l.a.createElement(P.f,{size:".75em"})),l.a.createElement($e,{title:"Strafe l\xf6schen",message:"Soll die Strafe ".concat(t.label," wirklich gel\xf6scht werden?"),onConfirm:function(){null!=t.id&&e.props.deleteFeeType(t.id)},component:l.a.createElement(K.a,{color:"primary"},l.a.createElement(P.g,{size:".75em"}))}))}}],rows:this.props.feeTypes.filter((function(e){return!0!==e.deleted})),entriesPerPage:5})}}]),a}(n.Component),Xe=Object(o.b)((function(e){return{feeTypes:fe.getSelectors().selectAll(e.feeTypes)}}),(function(e){return{deleteFeeType:Object(Se.b)(ve.actions.delete,e)}}))(Object(u.g)(Qe)),Ye=function(e){Object(N.a)(a,e);var t=Object(z.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(L.a)(a,[{key:"render",value:function(){return l.a.createElement(g.a,{elevation:3,className:"zsku-panel"},l.a.createElement("div",{className:"feeTypesMain settingszsku-panel"},l.a.createElement("div",{className:"zsku-panelHeading"},l.a.createElement("h1",null,"Strafen"),l.a.createElement("div",{className:"logo"},l.a.createElement(de.c,{size:"4em",style:{backgroundColor:"#EDB458"}})),l.a.createElement(c.b,{to:"/zsku-mgmt/settings/feeTypes/addNew",style:{textDecoration:"none"}},l.a.createElement(b.a,{variant:"text",color:"primary"},"Hinzuf\xfcgen"))),l.a.createElement("div",{className:"settingsContainer"},l.a.createElement(u.a,{path:"/zsku-mgmt/settings/feeTypes/addNew",component:He}),l.a.createElement(u.a,{path:"/zsku-mgmt/settings/feeTypes/edit/:id",component:ze})),l.a.createElement(u.a,{path:"/zsku-mgmt/settings",component:Xe})))}}]),a}(n.Component),et=a(141),tt=a.n(et),at=a(140),nt=a.n(at),lt=Object(u.g)((function(e){var t=e.history,a=Object(n.useState)(""),r=Object(W.a)(a,2),i=r[0],o=r[1],c=Ve();return l.a.createElement("div",{style:{display:"flex",gap:"10px",alignItems:"center"}},l.a.createElement(ue.a,{value:i,label:"Name",name:"Name",variant:"outlined",onChange:function(e){o(e.target.value)}}),l.a.createElement(b.a,{color:"primary",variant:"contained",startIcon:l.a.createElement(me.a,{size:".75em"}),onClick:function(){c(Fe.actions.create({name:i,id:Object(y.a)(),createdOn:Date.now()})),t.push("/zsku-mgmt/settings")}},"Speichern"))})),rt=Object(o.b)()(lt),it=(Fe.actions.update,function(e){Object(N.a)(a,e);var t=Object(z.a)(a);function a(e){var n,l,r,i,o;return Object(j.a)(this,a),(o=t.call(this,e)).state={name:null!==(n=null===(l=o.props.role)||void 0===l?void 0:l.name)&&void 0!==n?n:"",id:null!==(r=null===(i=o.props.role)||void 0===i?void 0:i.id)&&void 0!==r?r:"ERR"},o}return Object(L.a)(a,[{key:"componentDidUpdate",value:function(){var e,t,a,n;this.state.id!==this.props.match.params.id&&this.setState({id:null!==(e=null===(t=this.props.role)||void 0===t?void 0:t.id)&&void 0!==e?e:"ERR",name:null!==(a=null===(n=this.props.role)||void 0===n?void 0:n.name)&&void 0!==a?a:"ERR"})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{style:{display:"flex",gap:"10px",alignItems:"center"}},l.a.createElement(ue.a,{value:this.state.name,label:"Name",name:"Name",variant:"outlined",onChange:function(t){e.setState({name:t.target.value})}}),l.a.createElement(b.a,{color:"primary",variant:"contained",startIcon:l.a.createElement(me.a,{size:".75em"}),onClick:function(){e.props.editRole({changes:{name:e.state.name},id:e.state.id}),e.props.history.push("/zsku-mgmt/settings")}},"Speichern"))}}]),a}(n.Component)),ot=Object(o.b)((function(e,t){return{role:Ge.getSelectors().selectById(e.roles,t.match.params.id)}}),(function(e){return{editRole:Object(Se.b)(Fe.actions.update,e)}}))(Object(u.g)(it)),ct=Object(u.g)((function(e){var t=e.history,a=Ve(),n=Object(o.d)((function(e){return e.roles})),r=Ge.getSelectors().selectAll(n);return l.a.createElement(ae,{columns:[{id:"col_name",name:"Name",data:"name",align:"left",orderable:!0},{id:"col_timestamp",name:"Erstellt am",data:function(e){var t;return new Date(null!==(t=e.createdOn)&&void 0!==t?t:Date.now()).toLocaleDateString("de-DE")},align:"left",orderable:!0,sort:function(e,t){return e.createdOn-t.createdOn}},{id:"col_actions",name:"Aktionen",align:"right",data:function(e){return l.a.createElement("div",{style:{float:"right",display:"flex"}},l.a.createElement(K.a,{color:"primary",onClick:function(){t.push("/zsku-mgmt/settings/roles/edit/"+e.id)}},l.a.createElement(P.f,{size:".75em"})),l.a.createElement($e,{title:"Posten l\xf6schen",message:"Soll der Posten ".concat(e.name," wirklich gel\xf6scht werden?"),onConfirm:function(){null!=e.id&&a(Fe.actions.delete(e.id))},component:l.a.createElement(K.a,{color:"primary"},l.a.createElement(P.g,{size:".75em"}))}))}}],rows:r,entriesPerPage:5})})),ut=Object(o.b)()(ct),st=function(){return l.a.createElement(nt.a,{elevation:3,className:"zsku-panel"},l.a.createElement("div",{className:"rolesMain settingszsku-panel"},l.a.createElement("div",{className:"zsku-panelHeading"},l.a.createElement("h1",null,"Posten"),l.a.createElement("div",{className:"logo"},l.a.createElement(de.f,{size:"4em",style:{backgroundColor:"#7DCE82"}})),l.a.createElement(c.b,{to:"/zsku-mgmt/settings/roles/addNew",style:{textDecoration:"none"}},l.a.createElement(tt.a,{variant:"text",color:"primary"},"Hinzuf\xfcgen"))),l.a.createElement("div",{className:"settingsContainer"},l.a.createElement(u.a,{path:"/zsku-mgmt/settings/roles/addNew",component:rt}),l.a.createElement(u.a,{path:"/zsku-mgmt/settings/roles/edit/:id",component:ot})),l.a.createElement(u.a,{path:"/zsku-mgmt/settings",component:ut})))},dt=Object(u.g)((function(e){var t=e.history,a=Ve(),n=Object(o.d)((function(e){return e.users})),r=Object(o.d)((function(e){return e.roles})),i=A.getSelectors().selectAll(n).filter((function(e){return!0!==e.deleted})),u=Ge.getSelectors().selectEntities(r);return l.a.createElement(ae,{columns:[{id:"col_name",name:"Name",data:function(e){return l.a.createElement(c.b,{to:"/zsku-mgmt/users/"+e.id},e.fullName)},align:"left",orderable:!0,sort:function(e,t){return e.fullName.localeCompare(t.fullName)}},{id:"col_abbreviation",name:"Abk\xfcrzung",data:"abbreviation",align:"left",orderable:!0,sort:function(e,t){return e.fullName.localeCompare(t.fullName)}},{id:"col_roles",name:"Posten",data:function(e){return e.roles.slice(0,3).map((function(e){var t;return null===(t=u[e])||void 0===t?void 0:t.name})).join(", ")+(e.roles.length>3?", ...":"")},align:"left"},{id:"col_timestamp",name:"Erstellt am",data:function(e){var t;return new Date(null!==(t=e.createdOn)&&void 0!==t?t:Date.now()).toLocaleDateString("de-DE")},align:"left",orderable:!0,sort:function(e,t){return e.createdOn-t.createdOn}},{id:"col_actions",name:"Aktionen",align:"right",data:function(e){return l.a.createElement("div",{style:{float:"right",display:"flex"}},l.a.createElement(K.a,{color:"primary",onClick:function(){t.push("/zsku-mgmt/users/"+e.id)}},l.a.createElement(P.f,{size:".75em"})),l.a.createElement($e,{title:"Mitglied l\xf6schen",message:"Soll das Mitglied ".concat(e.fullName," wirklich gel\xf6scht werden?"),onConfirm:function(){null!=e.id&&a(D.actions.delete(e.id))},component:l.a.createElement(K.a,{color:"primary"},l.a.createElement(P.g,{size:".75em"}))}))}}],rows:i,entriesPerPage:5})})),mt=Object(o.b)()(dt),pt=function(){return l.a.createElement(nt.a,{elevation:3,className:"zsku-panel"},l.a.createElement("div",{className:"usersMain settingszsku-panel"},l.a.createElement("div",{className:"zsku-panelHeading"},l.a.createElement("h1",null,"Mitglieder"),l.a.createElement("div",{className:"logo"},l.a.createElement(de.e,{size:"4em",style:{backgroundColor:"#6184D8"}})),l.a.createElement(c.b,{to:"/zsku-mgmt/users/new",style:{textDecoration:"none"}},l.a.createElement(tt.a,{variant:"text",color:"primary"},"Hinzuf\xfcgen"))),l.a.createElement(u.a,{path:"/zsku-mgmt/settings",component:mt})))},ft=function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"zsku-panel"},l.a.createElement(pt,null)),l.a.createElement("div",{className:"zsku-panel"},l.a.createElement(st,null)),l.a.createElement("div",{className:"zsku-panel"},l.a.createElement(Ye,null)))},vt=a(281),gt=a(282),bt=a(283),ht=function(){var e=Object(o.c)();return l.a.createElement("div",{className:"zsku-panelHeading"},l.a.createElement("h1",null,"Kein aktuelles Spiel"),l.a.createElement(b.a,{variant:"contained",color:"primary",onClick:function(){e(Be.actions.createGame())}},"Neues Spiel"))},yt=function(e){var t=e.penalties,a=e.editable,n=e.user,r=Object(ge.a)(e,["penalties","editable","user"]),i=Object(o.c)(),c=Object(o.d)((function(e){return fe.getSelectors().selectEntities(e.feeTypes)})),u=Object(o.d)(Ce),s=Object(k.entries)(t.reduce((function(e,t){return null==e[t.feeTypeId]&&(e[t.feeTypeId]={count:0,sum:0,penalties:[]}),e[t.feeTypeId].count++,e[t.feeTypeId].sum+=t.value,e[t.feeTypeId].penalties.push(t),e}),{}));return l.a.createElement("div",r,l.a.createElement(ae,{columns:[{id:"col_feetypename",data:function(e){var t,a;return null!==(t=null===(a=c[e[0]])||void 0===a?void 0:a.label)&&void 0!==t?t:"N/A"},name:"Strafe",orderable:!0},{id:"col_count",data:function(e){return a&&n?l.a.createElement("div",{style:{display:"flex",alignItems:"center"}},l.a.createElement(K.a,{onClick:function(){var a=t.find((function(t){return t.feeTypeId===e[0]}));null!=a&&i(Te.actions.delete(a.id))}},l.a.createElement(P.c,null)),l.a.createElement("span",null,e[1].count.toString()),l.a.createElement(K.a,{onClick:function(){var t,a;i(Te.actions.create({createdOn:Date.now(),feeTypeId:e[0],gameId:u.id,id:Object(y.a)(),userId:n,value:null!==(t=null===(a=c[e[0]])||void 0===a?void 0:a.value)&&void 0!==t?t:0}))}},l.a.createElement(P.d,null))):e[1].count.toString()},name:"Anzahl",orderable:!0,sort:function(e,t){return e[1].count-t[1].count}},{id:"col_sum",data:function(e){return l.a.createElement(G,{val:e[1].sum,style:{margin:0}})},name:"Summe",orderable:!0,sort:function(e,t){return e[1].sum-t[1].sum}}],rows:s,entriesPerPage:10}))},Et=function(e){var t,a=e.player,r=e.game,i=e.openAddPenalty,c=Object(o.c)(),u=Object(o.d)(Pe(r.id,a.id)),s=Object(n.useState)(!1),d=Object(W.a)(s,2),m=d[0],p=d[1],f=Object(o.d)((function(e){var t;return e.roles.entities[null!==(t=a.roles.find(Boolean))&&void 0!==t?t:""]}));return l.a.createElement("div",null,l.a.createElement(vt.a,{onClick:function(){return i(a)},elevation:2,style:{borderRadius:"1em",maxWidth:"750px",cursor:"pointer"}},l.a.createElement(gt.a,{avatar:l.a.createElement(h.a,{style:{backgroundColor:a.color}},a.abbreviation),action:l.a.createElement("div",{onClick:function(e){return e.stopPropagation()}},u.length>0?l.a.createElement(K.a,{title:"Details anzeigen",onClick:function(){p(!m)}},l.a.createElement(de.a,{size:".85em"})):null,l.a.createElement($e,{title:"Spieler entfernen",message:"Soll ".concat(a.fullName," aus dem Spiel entfernt werden? Alle Strafen f\xfcr diesen Spieler werden zur\xfcckgesetzt."),onConfirm:function(){c(Te.actions.deleteMultiple(u.map((function(e){return e.id})))),c(Be.actions.removePlayerFromGame({userId:a.id}))},component:l.a.createElement(K.a,{title:"Spieler entfernen"},l.a.createElement(P.e,{color:"red",size:".85em"}))})),subheader:null!==(t=null===f||void 0===f?void 0:f.name)&&void 0!==t?t:"Kein Posten",title:a.fullName},l.a.createElement("h4",null,a.fullName)),m&&u.length>0?l.a.createElement(bt.a,null,l.a.createElement(yt,{penalties:u,user:a.id,editable:!0,onClick:function(e){return e.stopPropagation()}})):null,l.a.createElement(bt.a,null,l.a.createElement("hr",{style:{borderTop:"1px solid #ddd",borderBottom:"0"}}),l.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"auto 1px auto",alignItems:"center",marginBottom:0,marginTop:".75em"}},l.a.createElement("div",{style:{width:"100%",textAlign:"center"}},l.a.createElement("p",{style:{margin:".5em",fontWeight:"bold",color:"#888",textTransform:"uppercase",letterSpacing:".1em",fontSize:"small"}},"Strafen"),l.a.createElement("p",{style:{margin:".25em",fontWeight:"bold",fontSize:"large"}},u.length)),l.a.createElement("div",{style:{borderRight:"1px solid #ddd",height:"3em",margin:"0"}}),l.a.createElement("div",{style:{width:"100%",textAlign:"center"}},l.a.createElement("p",{style:{margin:".25em",fontWeight:"bold",color:"#888",textTransform:"uppercase",letterSpacing:".1em",fontSize:"small"}},"Betrag"),l.a.createElement(G,{style:{margin:".25em",fontWeight:"bold",fontSize:"large"},val:u.reduce((function(e,t){return e+t.value}),0)}))))))},Ot=function(e){var t,a,n=e.penaltyModalOpen,r=e.setPenaltyModalOpen,i=e.penaltyModalPlayer,c=e.game,u=Object(o.c)(),s=pe.b({feeType:pe.c().required(),value:pe.a().positive().required(),quantity:pe.a().min(0).required()}),d=Object(se.a)({initialValues:{feeType:"",value:void 0,quantity:1},validationSchema:s,onSubmit:function(e){var t=m.find((function(t){return t.id===e.feeType}));if(null!=t){for(var a=[],n=0;n<e.quantity;n++){var l=[];t.applicationStrategy===B.AutoAll?l.push.apply(l,Object(_.a)(c.users)):t.applicationStrategy===B.AllButTarget?l.push.apply(l,Object(_.a)(c.users.filter((function(e){return e!==i.id})))):t.applicationStrategy===B.Target&&l.push(i.id),a.push.apply(a,Object(_.a)(l.map((function(a){var n;return{id:Object(y.a)(),createdOn:Date.now(),feeTypeId:t.id,gameId:c.id,userId:a,value:null!==(n=e.value)&&void 0!==n?n:0}}))))}u(Te.actions.createMultiple(a)),d.resetForm({values:{feeType:"",quantity:1,value:void 0},touched:{feeType:!1,quantity:!1,value:!1},errors:{feeType:void 0,quantity:void 0,value:void 0}}),r(!1)}}}),m=Object(o.d)((function(e){return fe.getSelectors().selectAll(e.feeTypes)}));return l.a.createElement(Ue.a,{open:n,onClose:function(){return r(!1)},maxWidth:"sm",fullWidth:!0},l.a.createElement(qe.a,null,"Strafe f\xfcr ",null!==(t=null===i||void 0===i?void 0:i.fullName)&&void 0!==t?t:"?"),l.a.createElement(Ze.a,null,l.a.createElement("form",{onSubmit:d.handleSubmit},l.a.createElement("div",{className:"zsku-keyValueGrid"},l.a.createElement("h4",null,"Strafe"),l.a.createElement(re.a,null,l.a.createElement(oe.a,{variant:"outlined",id:"feeType",name:"feeType",error:d.touched.feeType&&Boolean(d.errors.feeType),value:d.values.feeType,onChange:function(e){var t;d.setFieldValue("feeType",e.target.value);var a=m.find((function(t){return t.id===e.target.value}));d.setFieldValue("value",null!==(t=null===a||void 0===a?void 0:a.value)&&void 0!==t?t:0)},renderValue:function(){var e;return l.a.createElement("p",null,null===(e=m.find((function(e){return e.id===d.values.feeType})))||void 0===e?void 0:e.label)}},m.filter((function(e){return e.applicationStrategy!==B.AutoAll&&!0!==e.deleted})).sort((function(e,t){return e.label.localeCompare(t.label)})).map((function(e){return l.a.createElement(ce.a,{key:e.id,value:e.id},e.label)})))),l.a.createElement("h4",null,"Betrag"),l.a.createElement(re.a,null,l.a.createElement(Oe,{disabled:function(){var e=m.find((function(e){return e.id===d.values.feeType}));return null==e||null!=e.value}(),error:d.touched.value&&Boolean(d.errors.value),helperText:d.touched.value&&d.errors.value,size:"small",value:d.values.value,name:"Value",id:"value",onChange:function(e){return d.setFieldValue("value",e.target.value)}})),l.a.createElement("h4",null,"Anzahl"),l.a.createElement(re.a,null,l.a.createElement(ue.a,{type:"number",id:"quantity",variant:"outlined",size:"small",disabled:null==(null===(a=m.find((function(e){return e.id===d.values.feeType})))||void 0===a?void 0:a.value),onChange:d.handleChange,value:d.values.quantity,InputProps:{inputProps:{min:1}}}))),l.a.createElement(Je.a,null,l.a.createElement(b.a,{onClick:function(){return r(!1)}},"Abort"),l.a.createElement(b.a,{color:"primary",type:"submit"},"Best\xe4tigen")))))},kt=function(e){var t=e.game,a=Object(o.d)((function(e){return e.users.ids.filter((function(e){return t.users.findIndex((function(t){return t===e}))<0})).map((function(t){return e.users.entities[t]})).filter((function(e){return null!=e&&!0!==e.deleted}))})),r=Object(o.d)(De(t.id)),i=Object(o.d)(xe(t.id)),c=Object(o.d)((function(e){return fe.getSelectors().selectAll(e.feeTypes).filter((function(e){return e.applicationStrategy===B.AutoAll}))})),u=Object(o.d)((function(e){return T.getSelectors().selectTotal(e.transactions)})),s=Object(n.useState)(!1),d=Object(W.a)(s,2),m=d[0],p=d[1],f=Object(n.useState)(null),v=Object(W.a)(f,2),g=v[0],O=v[1],k=function(e){O(e),p(!0)},S=Object(o.c)(),j=function(e){if(0!==i.length||0!==c.length){S(Be.actions.finishGame());var a,n=Object(E.a)(r);try{var l=function(){var n=a.value,l=Object(_.a)(i.filter((function(e){return e.userId===n.id})));if(e){var r=c.map((function(e){var a;return{id:Object(y.a)(),createdOn:Date.now(),feeTypeId:e.id,gameId:t.id,userId:n.id,value:null!==(a=e.value)&&void 0!==a?a:0}}));S(Te.actions.createMultiple(r)),l.push.apply(l,Object(_.a)(r))}var o=l.reduce((function(e,t){return e+t.value}),0);if(0===l.length||0===o)return"continue";var s=Object(y.a)();S(C.actions.create({affectsGlobalLedger:!1,affectsUserLedger:!0,createdOn:Date.now(),description:"Penalties from "+t.name,id:s,name:"TRANS-"+(u+1).toString().padStart(4,"0"),userId:n.id,value:-o,penalties:l.map((function(e){return e.id}))}))};for(n.s();!(a=n.n()).done;)l()}catch(o){n.e(o)}finally{n.f()}}else S(Be.actions.abortGame())};return l.a.createElement("div",null,l.a.createElement("div",{className:"zsku-panelHeading"},l.a.createElement("h1",null,t.name),l.a.createElement($e,{title:"Spiel abbrechen",message:"Spiel wirklich abbrechen? Alle bisher verteilten Strafen werden gel\xf6scht.",onConfirm:function(){S(Be.actions.abortGame()),S(Te.actions.deleteMultiple(i.map((function(e){return e.id}))))},component:l.a.createElement(b.a,{variant:"text"},"Abbrechen")}),l.a.createElement($e,{title:"Spiel Abschlie\xdfen",message:"Spiel wirklich abschlie\xdfen? Alle bisher verteilten Strafen werden den Kontost\xe4nden der Spieler angerechnet.",custom:[{label:"Abbrechen"},{label:"Abschlie\xdfen (keine Standard-Strafen)",handle:function(){j(!1)}},{label:"Abschlie\xdfen (Standard-Strafen)",handle:function(){j(!0)}}],component:l.a.createElement(b.a,{variant:"outlined",style:{color:"red",borderColor:"red"}},"Spiel Speichern")})),l.a.createElement("div",{style:{margin:"0em 1em 1em",alignItems:"center"}},a.length>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",{style:{marginBottom:".5em"}},"Spieler hinzuf\xfcgen"),l.a.createElement("div",{style:{display:"flex",columnGap:"1em"}},a.map((function(e){return l.a.createElement(h.a,{key:e.id,title:e.fullName,style:{backgroundColor:e.color},onClick:function(){S(Be.actions.addPlayerToOpenGame({userId:e.id}))}},e.abbreviation)})))):null),l.a.createElement("div",null,l.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2em"}},r.map((function(e){return l.a.createElement(Et,{game:t,player:e,key:e.id,openAddPenalty:k})})))),l.a.createElement(Ot,{penaltyModalOpen:m,penaltyModalPlayer:g,setPenaltyModalOpen:p,game:t}))},St=function(){var e=Object(o.d)(Ce);return l.a.createElement("div",{className:"zsku-panel"},l.a.createElement(g.a,{elevation:3,className:"zsku-panel"},null==e?l.a.createElement(ht,null):l.a.createElement(kt,{game:e})))},jt=Object(u.g)((function(e){var t,a,n=Object(o.d)((function(t){return Ie(t,e.match.params.gameId)})),r=Object(o.d)(xe(null===n||void 0===n?void 0:n.id)),i=Object(o.d)((function(e){return fe.getSelectors().selectEntities(e.feeTypes)})),u=Object(o.d)((function(e){return null===n||void 0===n?void 0:n.users.map((function(t){return e.users.entities[t]}))}));return l.a.createElement("div",{className:"zsku-panel"},l.a.createElement(g.a,{elevation:3,className:"zsku-panel"},l.a.createElement("div",{className:"zsku-panelHeading"},l.a.createElement("h1",null,null!==(t=null===n||void 0===n?void 0:n.name)&&void 0!==t?t:"Spiel nicht gefunden")),l.a.createElement("div",{className:"zsku-keyValueGrid"},l.a.createElement("h4",null,"Gespielt am"),l.a.createElement("p",null,new Date(null===n||void 0===n?void 0:n.createdOn).toLocaleDateString("de-DE")),l.a.createElement("h4",null,"Strafen"),l.a.createElement("p",null,r.length),l.a.createElement("h4",null,"Gesamtbetrag"),l.a.createElement(G,{val:r.reduce((function(e,t){return e+t.value}),0),style:{margin:0}}),l.a.createElement("h4",null,"Durchschnitt"),l.a.createElement(G,{val:r.reduce((function(e,t){return e+t.value}),0)/u.length,style:{margin:0}})),(null===u||void 0===u?void 0:u.length)>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Mitspieler"),l.a.createElement(ae,{columns:[{id:"col_name",name:"Name",data:function(e){return l.a.createElement(c.b,{to:"/zsku-mgmt/users/"+e.id},e.fullName)},align:"left",orderable:!0,sort:function(e,t){return e.fullName.localeCompare(t.fullName)}},{id:"col_penaltycount",name:"Strafen",data:function(e){return l.a.createElement("p",{style:{margin:0}},r.filter((function(t){return t.userId===e.id})).length)},align:"left",orderable:!0,sort:function(e,t){return r.filter((function(t){return t.userId===e.id})).length-r.filter((function(e){return e.userId===t.id})).length}},{id:"col_penaltysum",name:"Gesamtbetrag",data:function(e){return l.a.createElement(G,{style:{margin:0},val:r.filter((function(t){return t.userId===e.id})).reduce((function(e,t){return e+t.value}),0)})},align:"left",orderable:!0,sort:function(e,t){return r.filter((function(t){return t.userId===e.id})).reduce((function(e,t){return e+t.value}),0)-r.filter((function(e){return e.userId===t.id})).reduce((function(e,t){return e+t.value}),0)}},{id:"col_penaltyfav",name:"Am h\xe4ufigsten",data:function(e){return l.a.createElement("p",{style:{margin:0}},function(){var t,a=r.filter((function(t){return t.userId===e.id}));if(0===a.length)return"Keine Strafe";var n=null!==(t=Object(k.maxBy)(Object(k.entries)(Object(k.countBy)(r.filter((function(t){return t.userId===e.id})),(function(e){return e.feeTypeId}))),(function(e){return Object(k.last)(e)})))&&void 0!==t?t:[],l=Object(W.a)(n,1)[0];if(null==l)return"N/A";var o=i[l];return null==o?"N/A":o.label+" (".concat(x(a.filter((function(e){return e.feeTypeId===o.id})).reduce((function(e,t){return e+t.value}),0)),")")}())},align:"left",orderable:!1}],rows:null!==u&&void 0!==u?u:[],entriesPerPage:null!==(a=null===u||void 0===u?void 0:u.length)&&void 0!==a?a:0})):null))})),Nt=function(){var e=Object(o.d)(Ae).sort((function(e,t){return t.createdOn-e.createdOn})),t=Object(o.d)((function(e){return we.getSelectors().selectAll(e.penalties)})),a=Object(o.d)((function(e){return A.getSelectors().selectEntities(e.users)}));return l.a.createElement("div",{className:"zsku-panel"},l.a.createElement(g.a,{elevation:3,className:"zsku-panel"},l.a.createElement("div",{className:"zsku-panelHeading"},l.a.createElement("h1",null,"Beendete Spiele")),l.a.createElement("div",null,l.a.createElement(ae,{columns:[{id:"col_name",name:"Name",data:function(e){return l.a.createElement(c.b,{to:"/zsku-mgmt/games/"+e.id},e.name)},orderable:!0,sort:function(e,t){return e.name.localeCompare(t.name)}},{id:"col_users",name:"Mitspieler",data:function(e){return l.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"}},e.users.map((function(e){return a[e]})).filter(Boolean).sort((function(e,t){return e.abbreviation.localeCompare(t.abbreviation,"de-DE")})).map((function(e){var t;return l.a.createElement(c.b,{to:"users/"+(null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:"0"),key:Object(y.a)()},l.a.createElement(h.a,{key:Object(y.a)(),style:{fontWeight:"normal",backgroundColor:e.color}},e.abbreviation))})))}},{id:"col_totalpenalties",name:"Strafen (Anzahl)",data:function(e){return t.filter((function(t){return t.gameId===e.id})).length.toString()},orderable:!0,sort:function(e,a){return t.filter((function(t){return t.gameId===e.id})).length-t.filter((function(e){return e.gameId===a.id})).length}},{id:"col_sumpenalties",name:"Strafen (Summe)",data:function(e){return x(t.filter((function(t){return t.gameId===e.id})).reduce((function(e,t){return e+t.value}),0))},orderable:!0,sort:function(e,a){return t.filter((function(t){return t.gameId===e.id})).reduce((function(e,t){return e+t.value}),0)-t.filter((function(e){return e.gameId===a.id})).reduce((function(e,t){return e+t.value}),0)}},{id:"col_date",name:"Gespielt am",data:function(e){return new Date(e.createdOn).toLocaleDateString("de-DE")},orderable:!0,sort:function(e,t){return e.createdOn-t.createdOn}}],rows:e,entriesPerPage:10}))))},zt=function(){return l.a.createElement("div",null,l.a.createElement(St,null),l.a.createElement(Nt,null))},wt=a(165),Tt=a(292),Ct=Object(u.g)((function(e){var t,a,n,r,i=Object(o.d)((function(t){return A.getSelectors((function(e){return e.users})).selectById(t,e.match.params.userId)})),s=Object(o.d)((function(e){return e.roles})),d=Object(o.d)((function(e){return e.transactions.ids.map((function(t){return e.transactions.entities[t]})).filter((function(e){return null!=i&&(null===e||void 0===e?void 0:e.userId)===i.id}))})),m=Object(o.d)((function(e){return null!=i&&we.getSelectors().selectAll(e.penalties).filter((function(e){return e.userId===i.id}))})),p=Object(o.c)(),f=Object(u.f)(),v=pe.b({fullName:pe.c().required("Der Nutzername ist erforderlich"),color:pe.c().matches(/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,"Bitte die Farbe als g\xfcltigen Hexcode eingeben")}),E=Object(se.a)({initialValues:{fullName:null!==(t=null===i||void 0===i?void 0:i.fullName)&&void 0!==t?t:"",color:null!==(a=null===i||void 0===i?void 0:i.color)&&void 0!==a?a:"",roles:null!==(n=null===i||void 0===i?void 0:i.roles)&&void 0!==n?n:[]},validationSchema:v,onSubmit:function(t){if("new"===e.match.params.userId){var a=Object(y.a)();p(D.actions.create({fullName:t.fullName,color:t.color,abbreviation:null==t.fullName||""===t.fullName?"":t.fullName.split(" ").filter((function(e){return e.length>0})).map((function(e){return e[0]})).join(""),id:a,createdOn:Date.now(),roles:t.roles})),f.push({pathname:"/zsku-mgmt/users/"+a})}else{var n;p(D.actions.update({id:e.match.params.userId,changes:{fullName:t.fullName,color:t.color,abbreviation:null==t.fullName||""===t.fullName?"":t.fullName.split(" ").filter((function(e){return e.length>0})).map((function(e){return e[0]})).join(""),roles:null!==(n=t.roles)&&void 0!==n?n:[]}}))}}}),O=function(e){return e.split(" ").filter((function(e){return e.length>0})).map((function(e){return e[0]})).join("")};return l.a.createElement("div",null,l.a.createElement("div",{className:"zsku-panel"},l.a.createElement(g.a,{elevation:3,className:"zsku-panel"},l.a.createElement("div",{className:"zsku-panelHeading"},l.a.createElement("h1",null,null!==(r=null===i||void 0===i?void 0:i.fullName)&&void 0!==r?r:"Neues Mitglied"),l.a.createElement("div",{className:"logo"},l.a.createElement(de.d,{size:"4em",style:{backgroundColor:"#7DCE82"}}))),l.a.createElement("form",{onSubmit:E.handleSubmit},l.a.createElement("div",{className:"zsku-keyValueGrid"},l.a.createElement("h4",null,"Name"),l.a.createElement(re.a,null,l.a.createElement(ue.a,{error:E.touched.fullName&&Boolean(E.errors.fullName),helperText:E.touched.fullName&&E.errors.fullName,variant:"outlined",size:"small",name:"fullName",id:"fullName",value:E.values.fullName,onChange:E.handleChange})),null!=i?l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Abk\xfcrzung"),l.a.createElement(ue.a,{variant:"outlined",size:"small",name:"abbreviation",id:"abbreviation",fullWidth:!0,disabled:!0,value:null==E.values.fullName||""===E.values.fullName?"":O(E.values.fullName)})):null,l.a.createElement("h4",null,"Farbe"),l.a.createElement(re.a,null,l.a.createElement(wt.a,{error:E.touched.color&&Boolean(E.errors.color),endAdornment:l.a.createElement(h.a,{style:{backgroundColor:E.values.color}},O(E.values.fullName)),name:"color",id:"color",value:E.values.color,onChange:E.handleChange})),null!=i?l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",null,"Erstellt am"),l.a.createElement(ue.a,{variant:"outlined",size:"small",name:"createdOn",id:"createdOn",fullWidth:!0,disabled:!0,value:new Date(i.createdOn).toLocaleDateString("de-DE")})):null,l.a.createElement("h4",null,"Posten"),l.a.createElement(re.a,null,l.a.createElement(oe.a,{variant:"outlined",multiple:!0,value:E.values.roles,onChange:function(e){return E.setFieldValue("roles",e.target.value)},renderValue:function(e){return l.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},e.map((function(e){var t;return l.a.createElement(Tt.a,{onMouseDown:function(e){e.stopPropagation()},key:e,label:null===(t=s.entities[e])||void 0===t?void 0:t.name,style:{margin:"5px 10px 0 0"},onDelete:function(t){E.setFieldValue("roles",E.values.roles.filter((function(t){return t!==e})))}})})))},MenuProps:{PaperProps:{style:{maxHeight:"30vh"}}}},s.ids.map((function(e){var t,a;return l.a.createElement(ce.a,{key:e,value:e},null!==(t=null===(a=s.entities[e])||void 0===a?void 0:a.name)&&void 0!==t?t:"Unknown")})))),l.a.createElement("div",{className:"gridSpacer"}),l.a.createElement("div",null,l.a.createElement(re.a,{style:{float:"right"}},l.a.createElement(b.a,{variant:"contained",type:"submit",id:"formSubmit",color:"primary",startIcon:l.a.createElement(me.a,{size:".75em"})},"Speichern"))))))),"new"===e.match.params.userId?null:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"zsku-panel"},l.a.createElement(g.a,{elevation:3,className:"zsku-panel"},l.a.createElement("div",{className:"zsku-panelHeading"},l.a.createElement("h1",null,"Strafen"),l.a.createElement("div",{className:"logo"},l.a.createElement(de.c,{size:"4em",style:{backgroundColor:"#7DCe82"}}))),l.a.createElement("div",{className:"zsku-keyValueGrid"},l.a.createElement("h4",null,"Gesamt"),l.a.createElement(G,{val:(null!==m&&void 0!==m?m:[]).reduce((function(e,t){var a;return e+(null!==(a=t.value)&&void 0!==a?a:0)}),0)})),l.a.createElement(yt,{penalties:null!==m&&void 0!==m?m:[]}))),l.a.createElement("div",{className:"zsku-panel"},l.a.createElement(g.a,{elevation:3,className:"zsku-panel"},l.a.createElement("div",{className:"zsku-panelHeading"},l.a.createElement("h1",null,"Transaktionen"),l.a.createElement(c.b,{to:"/zsku-mgmt/transactions/new/"+e.match.params.userId},l.a.createElement(b.a,{variant:"text",color:"primary"},"Hinzuf\xfcgen")),l.a.createElement("div",{className:"logo"},l.a.createElement(de.c,{size:"4em",style:{backgroundColor:"#7DCe82"}}))),l.a.createElement("div",{className:"zsku-keyValueGrid"},l.a.createElement("h4",null,"Kassenbestand"),l.a.createElement(F,{val:d.reduce((function(e,t){var a;return e+(null!==(a=t.value)&&void 0!==a?a:0)}),0)})),l.a.createElement(ne,{transactions:d})))))})),It=a(148);function At(){return l.a.createElement("div",null,l.a.createElement("ul",null,l.a.createElement(c.b,{to:"/zsku-mgmt/games"},l.a.createElement("li",null,l.a.createElement(It.a,{size:"1.75em"}),l.a.createElement("h4",null,"Spiele"))),l.a.createElement(c.b,{to:"/zsku-mgmt/ledgers"},l.a.createElement("li",null,l.a.createElement(It.c,{size:"1.75em"}),l.a.createElement("h4",null,"Kasse"))),l.a.createElement(c.b,{to:"/zsku-mgmt/settings"},l.a.createElement("li",null,l.a.createElement(It.b,{size:"1.75em"}),l.a.createElement("h4",null,"Einstellungen")))))}function Dt(e){var t=e.abbreviation,a=e.color;return l.a.createElement(h.a,{style:{backgroundColor:a}},t)}var Pt=Object(o.b)()((function(e){var t,a=e.user,n=null!==(t=Object(o.d)((function(e){return null===a||void 0===a?void 0:a.roles.map((function(t){return e.roles.entities[t]}))})))&&void 0!==t?t:[];return null==a?l.a.createElement("div",{className:"sidebarUser"},l.a.createElement("p",null,"Loading ...")):l.a.createElement("div",{className:"sidebarUser"},l.a.createElement(Dt,{color:null===a||void 0===a?void 0:a.color,abbreviation:null===a||void 0===a?void 0:a.abbreviation}),l.a.createElement("div",{className:"sidebarUserInfo"},l.a.createElement("h1",null,null===a||void 0===a?void 0:a.fullName),l.a.createElement("p",null,n.slice(0,3).map((function(e){return e.name})).join(", "))))})),xt=function(e){var t=e.user,a=Object(n.useState)(!1),r=Object(W.a)(a,2),i=r[0],o=r[1];return l.a.createElement("aside",{className:"sidebar"+(i?" minimized":"")},l.a.createElement(Pt,{user:t}),l.a.createElement(At,null),l.a.createElement(K.a,{className:"minimize",onClick:function(){o(!i)}},i?l.a.createElement(P.b,null):l.a.createElement(P.a,null)))},Bt=function(){var e=Object(o.d)((function(e){return S.a.first(A.getSelectors().selectAll(e.users))}));return l.a.createElement(c.a,null,l.a.createElement("div",{className:"mainContainer"},l.a.createElement("div",{className:"sidebarContainer"},l.a.createElement(xt,{user:e})),l.a.createElement("div",{className:"contentContainer"},l.a.createElement(u.c,null,l.a.createElement(u.a,{path:"/zsku-mgmt/users/:userId",component:Ct}),l.a.createElement(u.a,{path:"/zsku-mgmt/transactions/:transactionId/:userId?",component:ke}),l.a.createElement(u.a,{path:"/zsku-mgmt/ledgers",component:le}),l.a.createElement(u.a,{path:"/zsku-mgmt/settings",component:ft}),l.a.createElement(u.a,{path:"/zsku-mgmt/games/:gameId",exact:!0,component:jt}),l.a.createElement(u.a,{path:"/zsku-mgmt/games",exact:!0,component:zt}),l.a.createElement(u.a,{path:"/zsku-mgmt",strict:!0},l.a.createElement(v,{user:e}))))))};var Gt=Object(o.b)()((function(){var e=Object(o.d)((function(e){return e.loading}));return l.a.createElement("div",{className:"App"},e?l.a.createElement("div",null):l.a.createElement(Bt,null))})),Ft=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function _t(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(o.a,{store:Re},l.a.createElement(Gt,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/zsku-mgmt",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/zsku-mgmt","/service-worker.js");Ft?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):_t(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):_t(t,e)}))}}()}},[[203,1,2]]]);
//# sourceMappingURL=main.afd572ad.chunk.js.map